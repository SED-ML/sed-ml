% ChangeAttribute Class
\label{class:computeChange}
The \concept{ComputeChange} class permits changes on any element of the XML file addressable by an XPath expression (\fig{computeChange}). 
%
\sedfig[width=\textwidth]{computeChangeClass}{The \code{ComputeChange} class}{fig:computeChange}
%
The changes are described by mathematical expressions using a \hyperref[sec:mathML]{subset of MathML} (see again section \ref{sec:mathML} on \refpage{sec:mathML}). 

To define a computable change it is often necessary to introduce additional parameters for the mathematics. Therefore, the  \hyperref[class:parameter]{parameters} first need to be defined. They can then be referenced through their ID.
To use model variables for the definition of a mathematical expression, those  \hyperref[class:variable]{variables} need to be defined first, and can then be addressed by their ID.
Finally, the change itself is specified using an instance of the \hyperref[sec:math]{Math} class.


\tabtext{computeChange}{computeChange}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
target & \refpage{sec:target}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
listOfVariables$^{o}$ & \refpage{sec:listOfVariables}\\
listOfParameters$^{o}$ & \refpage{sec:listOfParameters}\\
math &\refpage{sec:math}\\
\hline
\end{tabular}
\label{tab:computeChange}
\caption{\tabcap{computeChange}}
\end{table}
%


\paragraph{The \code{math} element}
\label{sec:math}

The \code{math} element encodes mathematical functions. 
If used as an element of the \concept{ComputeChange} class, it computes the change of the element or attribute addressed by the \hyperref[sec:target]{target} attribute.
\LoneVone supports the subset of MathML 2.0 shown in section \ref{sec:mathML}.

\lsttext{computeChange}{computeChange}
%
\begin{myXmlLst}{The computeChange element}{lst:computeChange}
<model [..]>
    <computeChange target="/sbml:sbml/sbml:model/sbml:listOfParameters/sbml:parameter[@id='w']">
      <listOfVariables>
        <variable id="camkii" name="active calcium/calmoduline kinase II" 
                  target="/sbml:sbml/sbml:model[@id='calcium']/sbml:listOfSpecies/sbml:species[@id='KII']" />
        <variable id="w" name="synaptic weight"
                  target="/sbml:sbml/sbml:model[@id='synapse']/sbml:listOfParameters/sbml:parameter[@id='w']" />
      <listOfVariables/>
      <listOfParameters>
        <parameter id="w0" name="synaptic weight change" value="1">
        <parameter id="n" name="utrasensitivity to calcium" value="2">
        <parameter id="K" name="sensitivity to calcium" value="1e-6">
      <listOfParameters/>
      <math>
         <apply>
           <plus />
           <ci>w</ci>
           <apply>
             <times />
             <ci>w0</ci>
             <apply>
               <divide />
               <apply>
                 <power />
                 <ci>camkii</ci>
                 <ci>n</ci>
               </apply>
               <apply>
                 <plus />
                 <apply>
                   <power />
                   <ci>K</ci>
                   <ci>n</ci>
                 </apply>
                 <apply>
                   <power />
                   <ci> camkii </ci>
                   <ci>n</ci>
                 </apply>
               </apply>
             </apply>
           </apply> 
         </apply>
      </math>
    </computeChange>
  </listOfChanges>
</model>
\end{myXmlLst}
%

The example in listing \ref{lst:computeChange} computes a change on the model parameter $w$. To do so, it defines two variables. \code{camkii} corresponds to the value of the species \code{KII} defined in the model with ID \code{calcium}. \code{w} corresponds to the value of the parameter \code{w} defined in the model with ID \code{synapse}. 
In addition, three further parameters are defined: \code{w0=1}, \code{n=2}, and \code{K=1e-6}.
The mathematical expression in the mathML then computes the change of $w$ using the encoded equation:

\begin{math}
w + wo \times \frac{camkii^{n}}{camkii^{n}+K^{n}}
\end{math}
.
%A problem arises, because the individual supported model exchange languages allow different subsets of MathML. Thus, when an instance of ComputeChange replaces a %mathematical expression of  an SBML reaction, only the MathML subset allowed by SBML should be used here.


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V1"
%%% End: 
