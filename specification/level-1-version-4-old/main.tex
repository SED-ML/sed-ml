%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Master file SED-ML specification
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\listfiles
\documentclass[pdftex,rgb,dvipsnames,svgnames,hyperref,table]{report}
\usepackage{tocvsec2}
% layout (initially done for the SBGN project)
% BEGIN \input{sources/latex-style.tex}
%% ----------------------------------------------------------------------------
%% Load up packages we need.
%% ----------------------------------------------------------------------------

% Warning: more \usepackage commands are used later in this file.

\usepackage[a4paper,centering,margin=1in,marginparwidth=0.75in]{geometry}
\usepackage[utf8]{inputenc} % unicode support
\usepackage{shadow}
\usepackage{supertabular}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{lscape}
\usepackage{layout}
\usepackage{array}
\usepackage{fancybox}
\usepackage{xspace}
\usepackage{ifpdf}
\usepackage{etoolbox}

% Hyperref, xcolor, graphicx and possibly others have a flag "pdftex"
% that needs to be used if pdflatex is being used.  The following puts
% these inside a conditional for that situation.

\ifpdf
  % Case: using pdflatex
  \usepackage[pdftex,rgb,dvipsnames,svgnames,hyperref,table]{xcolor}

\else
  % Case: not using pdflatex
  \usepackage[rgb,dvipsnames,svgnames,hyperref,table]{xcolor}

\fi


\usepackage{float}
\usepackage[american]{varioref}
\usepackage[normalem]{ulem}
\usepackage{eso-pic}
\usepackage{natbib}
\usepackage{listings} % enabling listings

\usepackage{url} % enabling URLs


\usepackage{pifont}% enable dingbats
\usepackage{alltt}


%\usepackage{enumerate}
% to change enumeration starting numbers and so on

%\usepackage{color} % enabling text colors

% using pdflatex with emp package
 \ifx\pdftexversion\undefined
 \usepackage[dvips]{graphicx}
 \else
 \usepackage[pdftex]{graphicx}
 \graphicspath{{./}{./images/}}
\DeclareGraphicsExtensions{.png}
 \fi

% Hyperref, xcolor, graphicx and possibly others have a flag "pdftex"
% that needs to be used if pdflatex is being used.  The following puts
% these inside a conditional for that situation.

\ifpdf
  % Case: using pdflatex

  \usepackage[pdftex]{graphicx}
  \DeclareGraphicsExtensions{.pdf,.png}

  % Options get even more complicated.  If we're producing grayscale output,
  % we don't want to bother with coloring links, but we still want to load
  % hyperref so that its macros are defined (and we don't have to redefine
  % everything that uses hyperref).  So:

  \usepackage[pdftex,breaklinks=true,colorlinks=true,plainpages=false,
  pdfpagelabels,bookmarks=true,bookmarksopen=true,bookmarksopenlevel=2,
  pdfhighlight=/O,linkcolor={RoyalBlue},citecolor={RoyalBlue},
  urlcolor={RoyalBlue}]{hyperref}

  \usepackage[pdftex,rgb,dvipsnames,svgnames,hyperref,table]{xcolor}

\else
  % Case: not using pdflatex

  \usepackage{graphicx}
  \DeclareGraphicsExtensions{.eps,.png}

  \usepackage[breaklinks,plainpages=false,pdfpagelabels]{hyperref}
  \usepackage[rgb,dvipsnames,svgnames,hyperref,table]{xcolor}

\fi

% Package 'rotating' needs to come after the others.

\usepackage{rotating}

% Booktabs for sharp-looking \toprule, \midrule, \bottomrule in tables.

\usepackage{booktabs}
\setlength{\cmidrulewidth}{0.3 pt}
\setlength{\lightrulewidth}{0.3 pt}
\setlength{\heavyrulewidth}{0.9 pt}
\setlength{\parindent}{0pt} % no indents in the whole document

%% ----------------------------------------------------------------------------
%% Special customizations
%% ----------------------------------------------------------------------------

\makeatletter

% Adjust bottom-of-page behavior and page line spacing.

\raggedbottom
\renewcommand{\baselinestretch}{0.98}

% Numbers the paragraph, but does not lists them in the ToC

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{2}

% Fix placement of figures & tables.  This keeps latex from shoving big
% floats to the end of a document when they are somewhat big, which it will
% do even if you put [htb] as the argument.

\setcounter{topnumber}{3}
\renewcommand\topfraction{1.0}
\setcounter{bottomnumber}{2}
\renewcommand\bottomfraction{1.0}
\renewcommand\textfraction{0.0}
\renewcommand\floatpagefraction{0.9}

% Adjustment to the spacing around tables and figures.

\renewcommand{\intextsep}{2em}

% This sets up Helvetica for headings.  The font scaling is
% because the default Helvetica size is too big.

\RequirePackage{helvet}
\def\Hv@scale{0.87}

% The following sets up txtt for the typewriter font.

\renewcommand{\ttdefault}{txtt}
\DeclareMathAlphabet{\mathtt}{OT1}{txtt}{m}{n}
\SetMathAlphabet{\mathtt}{bold}{OT1}{txtt}{b}{n}

% The next bit is an adaption of code from ot1phv.fd and adapted to the txtt
% fonts.  The txtt fonts are just a tad too big, so this tries to rescale
% them down a tiny bit.  This isn't completely right because I couldn't
% figure out the right syntax when the DeclareFontShape uses ssub below.
% (Notice how the ones with ssub don't have the \Txtt@@scale factor.)

\def\Txtt@scale{0.975}
\edef\Txtt@@scale{s*[\csname Txtt@scale\endcsname]}%

\DeclareFontFamily{OT1}{txtt}{\hyphenchar \font\m@ne}
\DeclareFontShape{OT1}{txtt}{m}{n}{	%rebular
     <-> \Txtt@@scale txtt%
}{}
\DeclareFontShape{OT1}{txtt}{m}{sc}{	%cap & small cap
     <-> \Txtt@@scale txttsc%
}{}
\DeclareFontShape{OT1}{txtt}{m}{sl}{	%slanted
     <-> \Txtt@@scale txttsl%
}{}
\DeclareFontShape{OT1}{txtt}{m}{it}{	%italic
     <-> ssub * txtt/m/sl%
}{}
\DeclareFontShape{OT1}{txtt}{m}{ui}{	%unslanted italic
     <-> ssub * txtt/m/sl%
}{}
\DeclareFontShape{OT1}{txtt}{b}{n}{	%bold
     <-> \Txtt@@scale txbtt%
}{}
\DeclareFontShape{OT1}{txtt}{b}{sc}{	%bold cap & small cap
     <-> \Txtt@@scale txbttsc%
}{}
\DeclareFontShape{OT1}{txtt}{b}{sl}{	%bold slanted
     <-> \Txtt@@scale txbttsl%
}{}
\DeclareFontShape{OT1}{txtt}{b}{it}{	%bold italic
     <-> ssub * txtt/b/sl%
}{}
\DeclareFontShape{OT1}{txtt}{b}{ui}{	%bold unslanted italic
     <-> ssub * txtt/b/sl%
}{}
\DeclareFontShape{OT1}{txtt}{bx}{n}{	%bold extended
     <-> ssub * txtt/b/n%
}{}
\DeclareFontShape{OT1}{txtt}{bx}{sc}{	%bold extended cap & small cap
     <-> ssub * txtt/b/sc%
}{}
\DeclareFontShape{OT1}{txtt}{bx}{sl}{	%bold extended slanted
     <-> ssub * txtt/b/sl%
}{}
\DeclareFontShape{OT1}{txtt}{bx}{it}{	%bold extended italic
     <-> ssub * txtt/b/sl%
}{}
\DeclareFontShape{OT1}{txtt}{bx}{ui}{	%bold extended unslanted italic
     <-> ssub * txtt/b/sl%
}{}

% This next set of commands uses the sectsty package to change
% section labels to be in a sans-serif font and put the numbers
% into the left margin.

\usepackage{sectsty}
\allsectionsfont{\sffamily\raggedright}
\def\@seccntformat#1{\protect\makebox[0pt][r]{\csname the#1\endcsname\quad}}

% The next definitions change the style of the section headings.

% Definition of paragraph style.

\setlength{\parindent}{0 pt}            % Unindented paragraphs, separated ...
\setlength{\parskip}{1.3 ex}            % ... by roughly one blank line.
\setlength{\partopsep}{-1ex plus 0.1ex minus -0.2ex}
\setlength{\itemsep}{-0.25ex plus 0.15ex}

% \topsep is supposed to affect list environments like itemize,
% but does nothing there.  Instead, it affects environments like tabular.

\setlength{\topsep}{0.3ex plus 0.1ex minus -0.2ex}

% Definition of section heading style.

\renewcommand{\section}{\newpage\@startsection%
  {section}{1}{0pt}{-1.8ex \@plus -1ex \@minus -.2ex}%
  {0.8ex}{\clearpage\normalfont\Large\bfseries\sffamily}}

\renewcommand{\subsection}{\@startsection%
  {subsection}{2}{0pt}{-2ex \@plus 1ex \@minus -.2ex}%
  {0.8ex}{\large\bfseries\sffamily}}

\renewcommand{\subsubsection}{\@startsection%
  {subsubsection}{3}{0pt}{-1.5ex \@plus 1ex \@minus -.2ex}%
  {0.5ex}{\slshape\normalsize\bfseries\sffamily}}

\renewcommand{\paragraph}{\@startsection%
  {paragraph}{4}{0pt}{-1.25ex \@plus 1ex \@minus -.2ex}%
  {0.5ex}{\slshape\normalsize\sffamily}}

% Just for now I replaced those definitions
%
% \renewcommand{\section}{\@startsection%
%   {section}{1}{0pt}{-3ex \@plus -0.5ex \@minus -.2ex}%
%   {1ex}{\Large\bfseries\sffamily}}
%
% \renewcommand{\subsection}{\@startsection%
%   {subsection}{2}{0pt}{-2.5ex \@plus -1ex \@minus -.2ex}%
%   {1ex}{\large\bfseries\sffamily}}
%
% \renewcommand{\subsubsection}{\@startsection%
%   {subsubsection}{3}{0pt}{-1.5ex \@plus -1ex \@minus -.2ex}%
%   {0.8ex}{\slshape\normalsize\bfseries\sffamily}}
%
% \renewcommand{\paragraph}{\@startsection%
%   {paragraph}{4}{0pt}{-1.25ex \@plus -1ex \@minus -.2ex}%
%   {0.5ex}{\slshape\normalsize\sffamily}}


% Below, we take out the heading embedded by the \tableofcontents
% command so that we can control where it's put.

\renewcommand\tableofcontents{%
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi
}

% There seems to be no way to redefine the font used by the table of contents
% line printing command except to modify the source from latex.ltx.

\def\@dottedtocline#1#2#3#4#5{%
  \ifnum #1>\c@tocdepth \else
    \vskip \z@ \@plus.2\p@
    {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
     \parindent #2\relax\@afterindenttrue
     \interlinepenalty\@M
     \leavevmode
     \@tempdima #3\relax
     \advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
     {#4}\nobreak
     \leaders\hbox{$\m@th
        \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
        mu$}\hfill
     \nobreak
     \hb@xt@\@pnumwidth{\hfil\normalfont\sffamily \normalcolor #5}%
     \par}%
  \fi}

% The following was ripped out of caption.sty, version 1.4b.
% Copyright (C) 1994-95 Harald Axel Sommerfeldt
% The first few lines set up the parameters for the layout created
% by this style file.

\newcommand{\captionsize}{\small}
\newcommand{\captionfont}{\captionsize\itshape}
\newcommand{\captionlabelfont}{\captionsize\sffamily\bfseries\upshape}
\newlength{\captionmargin}
\setlength{\captionmargin}{6ex}

\newsavebox{\as@captionbox}
\newlength{\as@captionwidth}
\newcommand{\as@normalcaption}[2]{%
  #1 #2\par}
\let\as@caption\as@normalcaption
\newcommand{\as@centercaption}[2]{%
  \parbox[t]{\as@captionwidth}{{\centering#1 #2\par}}}
\let\as@shortcaption\as@centercaption
\newcommand{\as@makecaption}[2]{%
  \setlength{\leftskip}{\captionmargin}%
  \setlength{\rightskip}{\captionmargin}%
  \addtolength{\as@captionwidth}{-2\captionmargin}%
  \renewcommand{\baselinestretch}{0.9}
  \captionfont%
  \sbox{\as@captionbox}{{\captionlabelfont #1:} #2}%
  \ifdim \wd\as@captionbox >\as@captionwidth
    \as@caption{{\captionlabelfont #1:}}{#2}%
  \else%
    \as@shortcaption{{\captionlabelfont #1:}}{#2}%
  \fi}
\renewcommand{\@makecaption}[2]{%
  \vskip\abovecaptionskip%
  \setlength{\as@captionwidth}{\linewidth}%
  \as@makecaption{#1}{#2}%
  \vskip\belowcaptionskip}
\ifx\@makerotcaption\undefined
\else
  \typeout{\space\space\space\space\space\space\space\space\space
           `rotating' package detected}
  \renewcommand{\@makerotcaption}[2]{%
    \renewcommand{\baselinestretch}{0.9}
    \captionfont%
    \sbox{\as@captionbox}{{\captionlabelfont #1:} #2}%
    \ifdim \wd\as@captionbox > .8\vsize
      \rotatebox{90}{%
        \setlength{\as@captionwidth}{.8\textheight}%
        \begin{minipage}{\as@captionwidth}%
          \as@caption{{\captionlabelfont #1:}}{#2}%
        \end{minipage}}\par
    \else%
      \rotatebox{90}{\usebox{\as@captionbox}}%
    \fi
    \hspace{12pt}}
\fi
\ifx\floatc@plain\undefined
\else
  \typeout{\space\space\space\space\space\space\space\space\space
           `float' package detected}
  \renewcommand\floatc@plain[2]{%
    \setlength{\as@captionwidth}{\linewidth}%
    \as@makecaption{#1}{#2}}
  \ifx\as@ruled\undefined
  \else
    \renewcommand\floatc@ruled[2]{%
      \setlength{\as@captionwidth}{\linewidth}%
      \renewcommand{\baselinestretch}{0.9}
      \captionfont%
      \as@caption{{\captionlabelfont #1:}}{#2}}
  \fi
\fi

\renewcommand{\@makechapterhead}[1]{%
\vspace*{50 pt}%
{\setlength{\parindent}{0pt} \raggedright% \normalfont
\sffamily\bfseries\Huge\thechapter.\ #1
\par\nobreak\vspace{40 pt}}}


%% ----------------------------------------------------------------------------
%% The end.
%% ----------------------------------------------------------------------------

\makeatother

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:

% END \input{sources/latex-style.tex}

% packages and commands
% BEGIN \input{sources/latex-macros.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\token}[1]{\texttt{#1}}
\newcommand{\concept}[1]{\textcolor{blue}{#1}}
\newcommand{\element}[1]{\texttt{#1}}
\newcommand{\alert}[1]{\textcolor{red}{#1}}
\newcommand{\note}[1]{\paragraph*{} \emph{\scshape{\alert{Please Note}}: #1} \newline}
\newcommand{\mailto}[1]   {\link{mailto:#1}{#1}}
\newcommand{\link}[2]     {\literalFont{\href{#1}{#2}}}
\newcommand{\literalFont}[1]{\textup{\texttt{#1}}}
\newcommand{\version}{2\xspace}
\newcommand{\level}{1\xspace}
\newcommand{\LoneVone}{Level~1 Version~1\xspace}
\newcommand{\LoneVtwo}{Level~1 Version~2\xspace}
\newcommand{\LoneVthree}{Level~1 Version~3\xspace}
\newcommand{\currentLV}{Level~1 Version~3\xspace}
\newcommand{\previousLV}{Level~1 Version~2\xspace}
\newcommand{\biom}{BioModels Database\xspace}
% attribute table layout
\newcommand{\attribute}{attribute\xspace}
\newcommand{\desc}{description\xspace}
\newcommand{\subelements}{sub-elements\xspace}

\newcommand{\SedModel}{\hyperref[class:model]{Model}\xspace}
\newcommand{\SedDataSource}{\hyperref[class:dataSource]{DataSource}\xspace}
\newcommand{\SedDataDescription}{\hyperref[class:dataDescription]{DataDescription}\xspace}
\newcommand{\SedSlice}{\hyperref[class:slice]{Slice}\xspace}

\newcommand{\refpage}[1]{\hyperref[#1]{page \pageref{#1}}} % to hyperref to a particular page in the spec
\newcommand{\tabcap}[1]{  % to create table captions for overview tables for each SED-ML class
Attributes and nested elements for \concept{#1}. \emph{xy$^{o}$} denotes optional elements and attributes.
}

\newcommand{\tabtext}[2]{ % to create the introducing table text for each table reference
\tab{#1}~shows all attributes and sub-elements for the \concept{#2} element as defined by the SED-ML \currentLV XML Schema.
}

\newcommand{\lsttext}[2]{ % to create the introducing listing text for each listing reference
  Listing~\vref{lst:#1} shows the use of the \element{#2} element in a SED-ML file as defined by the SED-ML \currentLV XML Schema.
}

\newcommand{\lsttexta}[2]{ % to create the introducing listing text for each listing reference
  Listing~\vref{lst:#1} shows the use of the \element{#2} attribute in a SED-ML file as defined by the SED-ML \currentLV XML Schema.
}

%
\newcommand{\chap}[1]     {Chapter~\protect\ref{chap:#1}\xspace}
\newcommand{\sect}[1]     {Section~\protect\ref{sec:#1}\xspace}
\newcommand{\fig}[1]      {Figure~\protect\vref{fig:#1}\xspace}
\newcommand{\tab}[1]      {Table~\protect\vref{tab:#1}\xspace}
\newcommand{\lst}[1]      {Listing~\protect\ref{lst:#1}\xspace}
\newcommand{\eg}          {e.\,g.,\xspace}
\newcommand{\ie}          {i.\,e.,\xspace}

\newcommand{\tickYes}{\hspace{1pt}\ding{52}}
\newcommand{\tickNo}{\hspace{1pt}\ding{56}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% standard figure layout
\newcommand{\sedfig}[4][]
% 	 {\begin{figure}[H]\begin{center}{\includegraphics[width=0.9\textwidth,#1]{#2}}\caption{#3}\label{#4}\end{center}\end{figure}}
	 {\begin{figure}[hbt!]\begin{center}{\includegraphics[width=0.9\textwidth,#1]{#2}}\caption{#3}\label{#4}\end{center}\end{figure}}

\newcommand{\sedfigX}[4][]
	{\begin{figure}[H]\begin{center}{\includegraphics[#1]{#2}}\caption{#3}\label{#4}\end{center}\end{figure}}

% standard XML listing layout
\lstnewenvironment{myXmlLst}[2]
	{\lstset{basicstyle=\ttfamily\scriptsize, caption={#1},label={#2}, keywordstyle=\color{blue}\bfseries, stringstyle=\color{blue}, commentstyle=\color{red}, captionpos=b, breaklines=true, xleftmargin=1.5em, xrightmargin=1.5em, numbers=left, numberstyle=\ttfamily\tiny, numbersep=5pt, tabsize=4, showstringspaces=false, language=XML}} %, float=!h
	{}

% listings in appendixes:
\newcommand{\myXmlImport}[3]	{\lstinputlisting[basicstyle=\ttfamily\scriptsize,caption={#1},label={#2},%
	keywordstyle=\color{blue}\bfseries, stringstyle=\color{blue}, commentstyle=\color{red}, captionpos=b, breaklines=true, xleftmargin=1.5em, xrightmargin=1.5em, numbers=left, numberstyle=\ttfamily\tiny, numbersep=5pt, tabsize=4, showstringspaces=false, language=XML, stepnumber=1]{#3}} %float=h!

%% Conditional for L1V4 updates
\newbool{L1V4}
\setbool{L1V4}{true}

% END \input{sources/latex-macros.tex}

\begin{document}
% BEGIN \input{sources/front-page.tex}
% =============================================================================
% front-page
% =============================================================================

\begin{titlepage}

%\vspace*{0.75in}

\begin{center}

  \textbf{\sffamily\bfseries\huge
    Simulation Experiment Description Markup Language (SED-ML) :\\[0.3em]
    Level~1 Version~4}

\vspace*{0.5in}

\large
%Draft \\[0.25in]
\today\\[0.25in]

\cornersize{0.3}\ovalbox{\begin{minipage}{4.9in}\color{DarkRed}
Disclaimer: This is a working draft of the Simulation Experiment
Description Markup Language (SED-ML) Level~1 Version~4 specification.
It is not a normative document.
\end{minipage}}

\vspace{0.5in}

\textbf{\sffamily Editors}\\[7pt]
\begin{tabular}{l>{\hspace*{15pt}}r}
Frank T. Bergmann & \emph{University of Heidelberg, Germany}\\
Jonathan Cooper & \emph{University of Oxford, UK}\\
Matthias König & \emph{Humboldt University Berlin, Germany}\\
Brett Olivier & \emph{University Amsterdam}\\
Sven Sahle & \emph{University of Heidelberg, Germany}\\
Lucian Smith & \emph{University of Washington, US}\\
Ion Moraru & \emph{University of Connecticut Health Center, US}\\
Dagmar Waltemath    & \emph{University of Rostock, Germany}\\
\end{tabular}

\vspace{1.2in}

\normalsize
\begin{minipage}{5in}
\begin{center}
  The latest release of the \currentLV specification is available at
  \url{http://identifiers.org/combine.specifications/sed-ml.level-1.version-4}
  \paragraph*{}
  To discuss any aspect of the current SED-ML specification as well as language details, please send your messages
    to the mailing list \mailto{sed-ml-discuss@lists.sourceforge.net}.
  \paragraph*{}
  To get subscribed to the mailing list, please write to the same address \mailto{sed-ml-discuss@lists.sourceforge.net}.
  \paragraph*{}
  To contact the authors of the SED-ML specification, please write to \mailto{sed-ml-editors@lists.sourceforge.net}
%Bug reports and specific comments about the specification should be entered in the issue tracker \url{https://sourceforge.net/tracker/admin/?atid=1170625&group_id=178553}.
\end{center}
\end{minipage}
\vfill


\centerline{\includegraphics[width=2in]{images/logoSedml.png}}


\end{center}

\end{titlepage}

% The title page is considered unnumbered and the next page after this
% starts with the page number 1 (actually, i), but the duplication of page
% number 1 confuses hyperref and leads to the following latex warning:
%
%   "pdfTeX warning (ext4): destination with the same identifier
%   (name{page.1}) has been already used, duplicate ignored"
%
% The following change makes the title page have page number 1 and the next
% page after that it becomes page ii.  This is unorthodox, but seems not
% completely unreasonable, and it avoids the confusing warning above.

\setcounter{page}{2}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/front-page.tex}
\tableofcontents
\newpage
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% INTRODUCTION
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/introduction.tex}
% introduction
\chapter{Introduction}

The number of available computational models of biological systems is growing at an ever increasing pace.
At the same time, their size and complexity are also increasing. The need to build on existing studies by reusing models therefore becomes more imperative.
It is now generally accepted that one needs to be able to exchange the biochemical and mathematical structure of models.
The efforts to standardise the representation of computational models in various areas of biology, such as the \emph{Systems Biology Markup Language} (SBML, \citep{Hucka:2003}), \emph{CellML} \citep{cuellar:2003} or \emph{NeuroML} \citep{Goddard:2001}, resulted in such an increase of the exchange and re-use of models.
However, the description of the structure of models is not sufficient to enable the reproduction of simulation results.
One also needs to describe the procedures the models are subjected to, as described by the \emph{Minimum Information About a Simulation Experiment (MIASE)} \citep{Waltemath:2011}.

This document presents  \currentLV of the \emph{Simulation Experiment Description Markup Language} (SED-ML), a computer-readable format for encoding simulation experiments.
SED-ML files are encoded in the \emph{Extensible Markup Language} (XML) \citep{Bray:2006}. The SED-ML format is defined by an XML Schema \citep{Fallside:2001}.
\currentLV is the successor of \previousLV and \LoneVone, which is described in \citep{WAB+11}.

%% EXAMPLE OF A SIMULATION EXPERIMENT DESCRIPTION (INFORMAL)
% BEGIN \input{sources/motivation.tex}
% motivation
\section{Motivation: A sample experiment}
\label{motivation:example}

The \emph{repressilator} is a rather small, though famous, model that is capable of displaying rich and variable behaviors.
We will use this model to demonstrate how a simulation experiment can be described simply and effectively.
The simulation example is taken from \citet{Waltemath:2011}.

The \emph{repressilator} is a synthetic oscillating network of transcription regulators in Escherichia coli \citep{Elowitz:2000}. The network is composed of the three repressor genes Lactose Operon Repressor (lacI), Tetracycline Repressor (tetR) and Repressor CI (cI), which code for proteins binding to the promoter of the other, blocking their transcription. The three inhibitions together in tandem, form a cyclic negative-feedback loop. To describe the interactions of the molecular species involved in the network, the authors built a simple mathematical model of coupled first-order differential equations. All six molecular species included in the network (three mRNAs, three repressor proteins) participated in creation (transcription/translation) and degradation processes. The model was used to determine the influence of the various parameters on the dynamic behavior of the system. In particular, parameter values were sought which induce stable oscillations in the concentrations of the system components. Oscillations in the levels of the three repressor proteins are obtained by numerical integration.

\subsection{A simple time-course simulation}
 \label{sec:intro1}
 The first experiment we intend to run on the model is the simulation that will lead to the oscillation shown in Figure 1c of the reference publication \citep{Elowitz:2000}. This simulation experiment can be described as:

\begin{enumerate}
 	\item{Import the model identified by the Unified Resource Identifier (URI) \citep{Berners-Lee:2005} \url{urn:miriam:biomodels.db:BIOMD0000000012}.}
 	\item {Select a deterministic method.}
 	\item{Run a uniform time course simulation for 1000~min with an output interval of 1~min.}
 	\item{Plot the amount of \code{lacI}, \code{tetR} and \code{cI} against time in a 2D Plot.}
 \end{enumerate}

Following those steps and performing the simulation in the simulation tool COPASI \citep{Hoops:2006} led to the result shown in \fig{simEx1}.

\begin{figure}
\centering
\includegraphics[width=0.6\textwidth]{images/simEx1.png}
\caption{Time-course simulation of the repressilator model, imported from BioModels Database and simulated in COPASI. The number of repressor proteins lacI, tetR and cI is shown. (taken from \cite{Waltemath:2011})}
\label{fig:simEx1}
\end{figure}

\subsection{Applying pre-processing}
\label{sec:examplePreprocessing}
The fine-tuning of the model can be shown by adjusting parameters before simulation. When changing the initial values of the parameters \emph{protein copies per promoter} and \emph{leakiness in protein copies per promoter} the system's behavior switches from sustained oscillation to asymptotic steady-state. The adjustments leading to that behavior may be described as:

\begin{enumerate}
\item{Import the model as above.}
\item{Change the value of the parameter \code{tps$\_$repr} from “0.0005” to “1.3e-05”. }
\item{Change the value of the parameter \code{tps$\_$active} from “0.5 “ to “ 0.013“.}
\item{Select a deterministic method.}
\item{Run a uniform time course for the duration of 1000~min with an output interval of 1~min.}
\item Plot the amount of lacI, tetR and cI against time in a 2D Plot.
\end{enumerate}

\fig{simEx3} shows the result of the simulation.
%
\begin{figure}
\centering
\includegraphics[width=0.7\textwidth]{images/simEx3.png}
\caption{Time-course simulation of the repressilator model, imported from BioModels Database and simulated in COPASI after modification of the initial values of the \emph{protein copies per promoter} and the \emph{leakiness in protein copies per promoter}. The number of repressor proteins lacI, tetR and cI is shown. (taken from \cite{Waltemath:2011})}
\label{fig:simEx3}
\end{figure}


\subsection{Applying post-processing}
The raw numerical output of the simulation steps may be subjected to data post-processing before plotting or reporting.  In order to describe the production of a normalized plot of the time-course in the first example (section \ref{sec:intro1}), depicting the influence of one variable on another (in phase-planes), one could define the following further steps:

(Please note that the description steps 1 - 4 remain as given in section \ref{sec:intro1} above.)
\begin{enumerate}
\item[5.]{Collect lacI(t) , tetR(t) and cI(t).}
\item[6.]{Compute the highest value for each of the repressor proteins,  max(lacI(t)), max(tetR(t)), max(cI(t)).}
\item[7.]{Normalize the data for each of the repressor proteins by dividing each time point by the maximum value, i.\,e.\ lacI(t)/max(lacI(t) ), tetR(t)/max(tetR(t)) , and cI(t)/max(cI(t)).}
\item[8.]{Plot the normalized \code{lacI} protein as a function of the normalized \code{cI}, the normalized \code{cI}  as a function of the normalized \code{tetR} protein, and the normalized \code{tetR} protein against the normalized \code{lacI} protein in a 2D plot.}
\end{enumerate}
\fig{simEx2} illustrates the result of the simulation after post-processing of the output data.
\begin{figure}
\centering
\includegraphics[width=0.7\textwidth]{images/simEx2.png}
\caption{Time-course simulation of the repressilator model, imported from BioModels Database and simulated in COPASI, showing the normalized temporal evolution of repressor proteins lacI, tetR and cI in phase-plane. (taken from \cite{Waltemath:2011})}
\label{fig:simEx2}
\end{figure}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/motivation.tex}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/introduction.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% TECHNICAL SPECIFICATION
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/specification.tex}
\chapter{SED-ML technical specification}
\label{chp:specification}

This document represents the technical specification of SED-ML. We also provide an
XML Schema \citep{xmls} and a UML class diagram representation of that XML Schema (Appendix~\ref{app:uml}). UML class diagrams are a subset of the \emph{Unified Markup Language} notation (UML, \citep{uml22}). Sample experiment descriptions are given as XML snippets that comply with the XML Schema.

It should however be noted that some of the concepts of SED-ML cannot be captured using XML Schema alone. In these cases it is this specification that is considered the normative document.


%% NOTATION CONVENTIONS
% BEGIN \input{sources/conventions.tex}
\section{Conventions used in this document}
\label{sec:conventions}


%% UML
\subsection{UML Classes}
\label{sec:umlconventions}
A SED-ML UML class (\fig{umlClass}) consists of a class name (\code{ClassName}) and a number of attributes (\code{attribute}) each of a specific data type (\code{type}). The SED-ML UML specification does not make use of UML \code{operations}.
\begin{figure}[h]
\centering
\includegraphics[width=0.2\textwidth]{images/umlClass}
\caption{SED-ML UML class with class names and attributes}
\label{fig:umlClass}
\end{figure}

SED-ML class names always begin with upper case letters. If they are composed of different words, the camel case style is used, as in e.\,g.\ \code{DataGenerator}.

\subsection{UML Relationships}
%% RELATIONS
\subsubsection{UML Relation Types}
\begin{figure}[h]
\centering
\includegraphics[width=0.5\textwidth]{images/classRelation}
\caption{UML Class connectors}
\label{fig:umlConnectors}
\end{figure}

Links between classes specify the connection of objects with each other (\fig{umlConnectors}). The different relation types used in the SED-ML specification include aggregation, composite aggregation, and generalisation. The label on the line is called symbol (\code{label}) and describes the relation of the objects of both classes.

%% Association
The \concept{association} (\fig{umlAssociation}) indicates the existence of a connection between the objects of the participating classes. Often associations are directed to show how the label should be read (in which direction). Associations can be uni-directional (one arrowhead), or bidirectional (zero or two arrowheads).
\begin{figure}[h]
\centering
\includegraphics[width=0.5\textwidth]{images/umlAssociation}
\caption{UML Association}
\label{fig:umlAssociation}
\end{figure}


%% Aggregation
The \concept{aggregation} (\fig{umlAggregation}, top) indicates that the objects of the participating classes are connected in a way that one class (\code{Whole}) consists of several parts (\code{Part}). In an aggregation, the parts may be independent of the whole. For example, a car (\code{Whole})  has several parts called wheel (\code{Part}); however, the wheels can exist independently of the car while the car requires the wheels in order to function.
\begin{figure}[h]
\centering
\includegraphics[width=0.5\textwidth]{images/umlAggregation}
\caption{UML Aggregation (top) and Composition (bottom)}
\label{fig:umlAggregation}
\end{figure}

%% Composite Aggregation
The \concept{composite aggregation} (\fig{umlAggregation}, bottom) indicates that the objects of the participating classes are connected in a way that one class (\code{Whole}) consists of several parts (\code{Part}). In contrast to the aggregation, the subelements (\code{Part}) are dependent on the parent class (\code{Whole}). An example is that a university (\code{Whole}) consists of a number of departments (\code{Part}) which have a so-called ``lifetime responsibility'' with the university, e.\,g.\ if the university vanishes,  the departments will vanish with it \citep{Bel03}.

%% Inheritance
The \concept{generalisation} (\fig{umlGeneralisation}) allows to extend classes (\code{BaseClass}) by additional properties. The derived class (\code{DerivedClass}) inherits all properties of the base class and defines additional ones. In the given example, an instance of \code{DerivedClass} has two attributes \code{attribute1} and \code{attribute2}.
%
\begin{figure}[h]
\centering
\includegraphics[width=0.2\textwidth]{images/umlGeneralisation}
\caption{UML Generalisation}
\label{fig:umlGeneralisation}
\end{figure}
%
%% CARDINALITIES
\subsubsection{UML multiplicity}
UML multiplicity defines the number of objects in one class that can be related to one object in the other class (also known as \concept{cardinality}). Possible types of multiplicity include values (1), ranges (1$..$4), intervals (1,3,9), or combinations of ranges and intervals. The standard notation for ``many'' is the asterisk (*).

Multiplicity can be defined for both sides of a relationship between classes. The default relationship is ``many to many''.
The example in \fig{umlMulti} expresses that a class is given by a professor, and a professor might give one to many classes.
\begin{figure}[h]
\centering
\includegraphics[width=0.4\textwidth]{images/umlMultiplicity}
\caption{UML Multiplicity in an Aggregation}
\label{fig:umlMulti}
\end{figure}

%% XML SCHEMA
\subsection{XML Schema language elements}
The main building blocks of an XML Schema specification are:
\begin{itemize}
\item {simple and complex types}
\item {element specifications}
\item {attribute specifications}
\end{itemize}
XML Schema \concept{definitions} create new types, \concept{declarations} define new elements and attributes.
The definition of new (simple and complex) types can be based on a number of already existing, predefined types (string, boolean, float). Simple types are restrictions or extensions of predefined types. Complex types describe how attributes can be assigned to elements and how elements can contain further elements. The current SED-ML XML Schema only makes use of \emph{complex type definitions}.
An example for a complex type definition is given in \lst{complexType}:
%
\begin{myXmlLst}{Complex Type definition of the SED-ML \code{computeChange} element}{lst:complexType}
<xs:element name="computeChange">
	<xs:complexType>
		<xs:complexContent>
			<xs:extension base="SEDBase">
				<xs:sequence>
					<xs:element ref="listOfVariables" minOccurs="0" />
					<xs:element ref="listOfParameters" minOccurs="0" />
					<xs:element ref="math" />
				</xs:sequence>
				<xs:attribute name="target" use="required" type="xs:token" />
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
</xs:element>
\end{myXmlLst}
%
It shows the declaration of an element called \code{computeChange} that is used in SED-ML to change mathematical expressions. The element is defined using an \emph{unnamed} complex type which is built of further elements called \code{listOfVariables}, \code{listOfParameters}, and \code{math}.
Additionally, the element \code{computeChange} has an attribute \code{target} declared. Please note that the definition of the elements inside the complex type are only referred to and will be found elsewhere in the schema.

The nesting of elements in the schema can be expressed using the \code{xs:sequence} (a sequence of elements), \code{xs:choice} (an alternative of elements to choose from), or \code{xs:all} (a set of elements that can occur in any order) concepts. The current SED-ML XML Schema only uses the \emph{sequence} of elements.

\subsubsection{Multiplicities}
The standard multiplicity for each defined \code{element} is 1. Explicit multiplicity is to be defined using the \code{minOccurs} and \code{maxOccurs} attributes inside the complex type definition, as shown in \lst{multiplicity}.

\begin{myXmlLst}{Multiplicity for complex types in XML Schema}{lst:multiplicity}
<xs:element name="dataGenerator">
	<xs:complexType>
		<xs:complexContent>
			<xs:extension base="SEDBase">
				<xs:sequence>
					<xs:element ref="listOfVariables" minOccurs="0" />
					<xs:element ref="listOfParameters" minOccurs="0" />
					<xs:element ref="math" />
				</xs:sequence>
				<xs:attributeGroup ref="idGroup" />
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
</xs:element>
\end{myXmlLst}
%
In this example, the \code{dataGenerator} type is build of a sequence of three elements: The \code{listOfVariables} element is not necessary for the definition of a valid \code{dataGenerator} XML structure (it may occur 0 times or once). The same is true for the \code{listOfParameters} element (it may as well occur 0 times or once). The \code{math} element, however, uses the implicit standard multiplicity -- it must occur exactly 1 time in the \code{dataGenerator} specification.

\subsection{Type extensions}
XML Schema offers mechanisms to restrict and extend previously defined complex types.
Extensions add element or attribute declarations to existing types, while restrictions restrict the types by adding further characteristics and requirements (facets) to a type.
An example for a type extension is given in \lst{xmlExtension}.
%
\begin{myXmlLst}{Definition of the sedML type through extension of SEDBase in SED-ML}{lst:xmlExtension}
	<xs:element name="sedML">
		<xs:complexType>
			<xs:complexContent>
				<xs:extension base="SEDBase">
					<xs:sequence>
						<xs:element ref="listOfSimulations" minOccurs="0" />
						<xs:element ref="listOfModels" minOccurs="0" />
						<xs:element ref="listOfTasks" minOccurs="0" />
						<xs:element ref="listOfDataGenerators" minOccurs="0" />
						<xs:element ref="listOfOutputs" minOccurs="0" />
					</xs:sequence>
					<xs:attribute name="level" type="xs:decimal" use="required"
						fixed="1" />
					<xs:attribute name="version" type="xs:decimal" use="required"
						fixed="2" />
				</xs:extension>
			</xs:complexContent>
		</xs:complexType>
	</xs:element>
\end{myXmlLst}
%
%% Q: How about renaming sedML to sed-ml for the next version?
The \code{sedML} element is an extension of the previously defined \code{SEDBase} type. It extends \code{SEDBase} by a sequence of five additional elements (\code{listOfSimulations}, \code{listOfModels}, \code{listOfTasks}, \code{listOfDataGenerators}, and \code{listOfOutputs}) and two new attributes \code{version} and \code{level}.

%% MAPPINGS
% \subsection{Mappings}

% \subsubsection{Mapping the Workflow Structure to a UML Class Diagram Structure}
% The main structure of the above shown workflow can be easily recognised in main class structure of the UML class diagram as shown in Figure \ref{fig:sedml}. Other processes of the workflow have been mapped to according class attributes and/or additional classes in the UML class diagram structure.

% \subsubsection{Conversion of UML into XML Schema}
% Also, the conversion of the UML class diagram representation into the XML Schema model is very intuitive and follows a small set of rules: UML Classes from the diagram are mapped to XML \alert{tbc}
% Page 6 of the SBML spec


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/conventions.tex}

%% CONCEPTS
% BEGIN \input{sources/concepts.tex}
\section{Concepts used in SED-ML}

  %% MATHML SUBSET USED
% BEGIN \input{sources/mathML.tex}
% on the MathML subset used in SED-ML
\subsection{MathML subset}
\label{sec:mathML}
SED-ML files may encode pre-processing steps applied to the computational model,  as well as post processing applied to the raw simulation data before output.
The corresponding mathematical expressions are encoded using MathML 2.0 \citep{CIM+01}. MathML is an international standard for encoding mathematical expressions using XML. It is also used as a representation of mathematical expressions in other formats, such as SBML and CellML, two of the languages supported by SED-ML.

\subsubsection{MathML elements}
In order to support for the SED-ML format easier to implement we restrict the MathML subset to the following elements:

\begin{itemize}\setlength{\parskip}{-0.1ex}

\item \emph{token}: \token{cn}, \token{ci}, \token{csymbol},
  \token{sep}

\item \emph{general}: \token{apply}, \token{piecewise},
  \token{piece}, \token{otherwise}, \token{lambda}

\item \emph{relational operators}: \token{eq}, \token{neq},
  \token{gt}, \token{lt}, \token{geq}, \token{leq}

\item \emph{arithmetic operators}: \token{plus}, \token{minus},
  \token{times}, \token{divide}, \token{power}, \token{root},
  \token{abs}, \token{exp}, \token{ln}, \token{log},
  \token{floor}, \token{ceiling}, \token{factorial}

\item \emph{logical operators}: \token{and}, \token{or},
  \token{xor}, \token{not}

\item \emph{qualifiers}: \token{degree}, \token{bvar},
  \token{logbase}

\item \emph{trigonometric operators}: \token{sin}, \token{cos},
  \token{tan}, \token{sec}, \token{csc}, \token{cot},
  \token{sinh}, \token{cosh}, \token{tanh}, \token{sech},
  \token{csch}, \token{coth}, \token{arcsin}, \token{arccos},
  \token{arctan}, \token{arcsec}, \token{arccsc}, \token{arccot},
  \token{arcsinh}, \token{arccosh}, \token{arctanh},
  \token{arcsech}, \token{arccsch}, \token{arccoth}

\item \emph{constants}: \token{true}, \token{false},
  \token{notanumber}, \token{pi}, \token{infinity},
  \token{exponentiale}

\item \emph{MathML annotations}: \token{semantics},
  \token{annotation}, \token{annotation-xml}
\end{itemize}

\subsubsection{MathML Symbols}
All the operations listed above only operate on \emph{scalar} values. However, as one of SED-ML's aims is to provide post processing on the results of simulation experiments, we need to enhance this basic set of operations by some aggregate functions.
Therefore a defined set of MathML symbols that represent vector values are supported by SED-ML \currentLV.
To simplify the use of SED-ML L1V2 the only symbols to be used are the identifiers of variables defined in the listOfVariables of DataGenerators. These variables represent the data collected from the simulation experiment with the associated task.

\subsubsection{MathML functions}
The following aggregate functions are available for use in SED-ML \currentLV.

\begin{itemize}\setlength{\parskip}{-0.1ex}

\item \emph{min}: Where the minimum of a variable represents the smallest value
the simulation experiment yielded (Listing~\ref{lst:minFunction}).
%
\begin{myXmlLst}{Example for the use of the MathML \code{min} function.}{lst:minFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org/#min">
 		min
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\item \emph{max}: Where the maximum of a variables represents the largest value
the simulation experiment yielded (\lst{maxFunction}).
%
\begin{myXmlLst}{Example for the use of the MathML \code{max} function.}{lst:maxFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org/#max">
 		max
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\item \emph{sum}: All values of the variable returned by the simulation
experiment are summed (\lst{sumFunction}).
%
\begin{myXmlLst}{Example for the use of the MathML \code{sum} function.}{lst:sumFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org/#sum">
 		sum
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}


\item \emph{product}: All values of the variable returned by the simulation
experiment are multiplied (\lst{productFunction}).
%
\begin{myXmlLst}{Example for the use of the MathML \code{product} function.}{lst:productFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org//#product">
 		product
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\end{itemize}

These represent the only exceptions. At this point SED-ML \currentLV does not define a complete algebra of vector values. For more information see the description of the \hyperref[class:dataGenerator]{DataGenerator} class.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/mathML.tex}

  %% THE SUGGESTED URI SCHEME
% BEGIN \input{sources/uriScheme.tex}
% The proposed URI scheme to use
  \subsection{URI Scheme}
\label{sec:uriScheme}

URIs are needed at different points in SED-ML \currentLV.
Firstly, they are the preferred mechanism to refer to model encodings.
Secondly, they are used to specify the language of the referenced model.
Thirdly, they enable addressing implicit model variables.
Finally, annotations of SED-ML elements should be provided with a standardised annotation scheme.

The use of a standardised URI Scheme ensures long-time availability  of particular information that can unambiguously be identified.

\subsubsection{Model references}
\label{sec:modelURI}
The preferred way for referencing a model from a SED-ML file is adopted from the \concept{MIRIAM URI Scheme}.
MIRIAM enables identification of a data resource (in this case a model resource) by a predefined URN. A data entry inside that resource is identified by an ID.
That way each single  model  in a particular model repository can be unambiguously referenced. To become part of MIRIAM resources, a model repository must ensure permanent and consistent model references, that is stable IDs.

One model repository that is part of MIRIAM resources is the \concept{BioModels Database} \citep{LDR+10}. Its data resource name in MIRIAM is \code{urn:miriam:biomodels.db}. To refer to a particular model, a standardised identifier scheme is defined in \concept{MIRIAM Resources}\footnote{\url{http://www.ebi.ac.uk/miriam/}}. The ID entry maps to a particular model in the model repository. That model is never deleted.
A sample BioModels Database ID is \code{BIOMD0000000048}. Together with the data resource name it becomes unambiguously identifiable by the URN \code{urn:miriam:biomodels.db:BIOMD0000000048} (in this case referring to the 1999 Kholodenko model on EGFR signaling).
%

SED-ML recommends to follow the above scheme for model references, if possible.
SED-ML does not specify how to resolve the URNs. However, MIRIAM Resources offers web services to do so\footnote{\url{http://www.ebi.ac.uk/miriam/}}. For the above example of the \code{urn:miriam:biomodels.db:BIOMD0000000048} model, the resolved URL may look like:
\begin{itemize}
 \item{\code{http://biomodels.caltech.edu/BIOMD0000000048} or}
 \item{\code{http://www.ebi.ac.uk/biomodels-main/BIOMD0000000048}}
\end{itemize}
depending on the physical location of the resource chosen to resolve the URN.

An alternative means to obtain a model may be to provide a single resource containing necessary models and a SED-ML file. Although a specification of such a resource is beyond the scope of this document,  one proposal  --  COMBINE archive format -- is  described in Appendix~\ref{app:archive}.
Further information on the \hyperref[sec:source]{source} attribute referencing the model location is provided in Section~\ref{sec:source}.

\subsubsection{Language references}
\label{sec:languageURI}
To specify the language a model is encoded in, a set of pre-defined SED-ML URNs can be used.
The structure of SED-ML language URNs is \element{urn:sedml:language:}\emph{name.version}.
SED-ML allows to specify a model representation format very generally as being \code{XML}, if no standardised representation format has been used to encode the model. On the other hand, one can be as specific as defining
a model being in a particular version of a language, as ``SBML Level 2, Version 2, Revision 1''.

The list of URNs is available from \url{http://sed-ml.org/}.
Further information on the \hyperref[sec:language]{language} attribute is provided in Section~\ref{sec:language}.

\subsubsection{Implicit variables}
\label{sec:implicitVariable}

Some variables used in an experiment are not explicitly defined in the model, but may be implicitly contained in it. For example, to plot a variable's behaviour over time, that variable is defined in an SBML model, while \emph{time} is not explicitly defined.

To overcome this issue and allow SED-ML to refer to such variables in a common way, the notion of \emph{implicit variables} is used. Those variables are called \code{symbols} in SED-ML. They are defined following the idea of MIRIAM URNs and using the SED-ML URN scheme. The structure of the URNs is \element{urn:sedml:symbol:}\emph{implicit variable}. To refer from a SED-ML file to the definition of \emph{time}, for example, the URN is \element{urn:sedml:symbol:time}.

The list of predefined symbols is available from the SED-ML site on \url{http://sed-ml.org/documents.html}. From that source, a mapping of SED-ML symbols on existing concepts in the languages supported by SED-ML is provided.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Getting ready for L1V4
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifbool{L1V4}{% true part e
\begin{tabular}{lp{8cm}} \toprule
Symbol URN & Definition \\ \midrule
{\tt urn:sedml:symbol:time} & time in SBML is an intrinsic model variable that is addressable in model equations via a csymbol 'time'. \\[5pt]
{\tt urn:sedml:symbol:fullStoichiometryMatrix} & The full $m$ by $n$ stoichiometry matrix where $m$ is the number of state variables and $n$ the number of reactions. \\[5pt]
{\tt urn:sedml:symbol:reducedStoichiometryMatrix} & The reduced $m$ by $n$ stoichiometry matrix where $m$ is the number of independent state variables and $n$ the number of reactions. \\[5pt]
{\tt urn:sedml:symbol:N} & The full $m$ by $n$ stoichiometry matrix where $m$ is the number of state variables and $n$ the number of reactions. \\[5pt]
{\tt urn:sedml:symbol:Nr} & The reduced $m$ by $n$ stoichiometry matrix where $m$ is the number of independent state variables and $n$ the number of reactions. \\[5pt]
{\tt urn:sedml:symbol:J} & $n$ by $n$ matrix of $\displaystyle \partial f_i/\partial x_j$ where $f_i$ is the ith differential equation in the model and $n$ is the number of state variables.\\[5pt] 
{\tt urn:sedml:symbol:Jr} & $n_r$ by $n_r$ matrix of $\displaystyle \partial f_i/\partial x_j$ where $f_i$ is the ith differential equation in the model and $n_r$ is the number of independent state variables.\\[5pt] 
{\tt urn:sedml:symbol:fullJacobian} & $n$ by $n$ matrix of $\displaystyle \partial f_i/\partial x_j$ where $f_i$ is the ith differential equation in the model and $n$ is the number of state variables.\\[5pt] 
{\tt urn:sedml:symbol:reducedJacobian} & $n_r$ by $n_r$ matrix of $\displaystyle \partial f_i/\partial x_j$ where $f_i$ is the ith differential equation in the model and $n_r$ is the number of independent state variables.\\[5pt] 
{\tt urn:sedml:symbol:eigenvalue} & How do we specify the ith eigenvalue? \\[5pt]
{\tt urn:sedml:symbol:uelasticity} & Unscaled elasticity \\[5pt]
{\tt urn:sedml:symbol:elasticity} & Scaled elasticity \\[5pt]
{\tt urn:sedml:symbol:ucc} & Unscaled control coefficient \\[5pt]
{\tt urn:sedml:symbol:cc} & Scaled control coefficient \\
\bottomrule
\end{tabular}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
}{}

\subsubsection{Annotations}
\label{sec:annotations}
When annotating SED-ML elements with semantic \hyperref[class:annotation]{annotation}s, the \concept{MIRIAM URI Scheme} should be used. In addition to providing the data type (e.\,g.\ PubMed) and the particular data entry inside that data type (e.\,g.\ \code{10415827}), the relation of the annotation to the annotated element should be described using the standardised \concept{biomodels.net qualifier}. The list of qualifiers, as well as further information about their usage, is available from \url{http://www.biomodels.net/qualifiers/}.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/uriScheme.tex}

  %%XPATH
% BEGIN \input{sources/xpath.tex}
% XPath
\subsection{XPath usage}

\label{sec:xpath}
XPath is a language for finding information in an XML document \citep{xpath:1999}. Within \currentLV, XPath version 1 expressions are  used to identify nodes and attributes within an XML representation of a biological model in the following ways:
%
\begin{enumerate}
\item {Within a \hyperref[class:variable]{Variable} definition, where XPath identifies the model variable required for manipulation in SED-ML.}
\item {Within a  \hyperref[class:change]{Change} definition, where XPath is used to identify the target XML to which a change should be applied.}

\end{enumerate}

For proper application, XPath expressions should contain prefixes that allow their resolution to the correct XML namespace within an XML document. For example, the XPath expression referring to a species \emph{X} in an SBML model:
\begin{alltt}
/sbml:sbml/sbml:model/sbml:listOfSpecies/sbml:species[@id=`X'] {\color{green} \tickYes -\emph{CORRECT}}
\end{alltt}
is preferable to
\begin{alltt}
/sbml/model/listOfSpecies/species[@id=`X'] {\color{red} \tickNo -\emph{INCORRECT} }
\end{alltt}

which will only be interpretable by standard XML software tools if the SBML file declares no namespaces (and hence is invalid SBML).

Following the convention of other XPath host languages such as XPointer and XSLT, the prefixes used within XPath expressions must be declared using namespace declarations within the SED-ML document, and be in-scope for the relevant expression.
Thus for the correct example above, there must also be an ancestor element of the node containing the XPath expression that has an attribute like:
\begin{alltt}
xmlns:sbml=`http://www.sbml.org/sbml/level3/version1/core'
\end{alltt}
(a different namespace URI may be used; the key point is that the prefix `sbml' must match that used in the XPath expression).


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/xpath.tex}

  %% KISAO
% BEGIN \input{sources/kisao.tex}
% KiSAO
\subsection{KiSAO}
\label{sec:kisao}

The Kinetic Simulation Algorithm Ontology (KiSAO, \citep{CWK+10}) is
used in SED-ML to specify simulation algorithms and uniquely identify
algorithm parameters. KiSAO is a community-driven approach of
classifying and structuring simulation approaches by model
characteristics and numerical characteristics. The ontology is available
in OWL format from \concept{BioPortal} at
\url{http://purl.bioontology.org/ontology/KiSAO}.

SED-ML refers to terms from KiSAO as referencing a simulation algorithm,
or its parameters, solely through a name is error prone and ambiguous.
After all, typing mistakes or language differences complicate the
identification of the correct algorithm. Additionally, many algorithms
exist under multiple names or abbreviation.

The identification of a simulation algorithm through KISAO not only
identifies the simulation algorithm to be used in the SED-ML simulation,
it also enables software to find a related algorithm, if the specific
implementation is not available. For example, software could decide to
use the CVODE integration library for an analysis instead of a specific
Runge Kutta 4,5 implementation.

Should a particular simulation algorithm not exist within KISAO, please
request one from the project homepage at
\url{http://www.biomodels.net/kisao/}.




%In SED-ML, simulations are characterized by their type (e.\,g., time course simulations).
%Moreover, the reproducibility of a particular experiment is dependent on the algorithm used to analyze the system.
%The SED-ML \hyperref[class:algorithm]{Algorithm} class describes algorithms and their settings.
%The sole reference of a simulation algorithm through its name in form of a string is error prone and ambiguous.
%Firstly, typing mistakes or language differences may make the identification of the intended algorithm difficult.
%Secondly, many algorithms exist with more than one name, having synonyms or various abbreviations that are commonly used.

%To enable reproducibility of results, algorithms in SED-ML are specified as terms from a controlled vocabulary of simulation algorithms.
%The \emph{Kinetic Simulation Algorithm Ontology} (KiSAO, \citep{CWK+10}) is a community-driven approach of classifying and structuring simulation approaches by model characteristics and numerical characteristics.  Model characteristics include, for instance, the type of variables used for the simulation (such as discrete or continuous variables) and the spatial resolution (spatial or non-spatial descriptions). Numerical characteristics specify whether the system's behavior can be described as deterministic or stochastic, and whether the algorithms use fixed or adaptive time steps.
%Related algorithms are grouped together, producing classes of algorithms.
%KiSAO is available in OWL format from \concept{BioPortal} at \url{http://purl.bioontology.org/ontology/KiSAO}.
%The project homepage is at \url{http://www.biomodels.net/kisao/}.


%A sample categorisation for the Gillespie's Direct Method (\code{KISAO:0000029}) is given in Figure \ref{fig:kisao}.
%
%\sedfig[width=\textwidth]{kisaoExample}{KiSAO example: Gillespie's Direct Method}{fig:kisao}
%

%Although work is still at an early stage, the use of KiSAO is recommended when referring to a simulation algorithm from a SED-ML description. However, the use of KiSAO for the moment is limited. One may look up the algorithm that was used in the simulation experiment (through resolving the KiSAO ID) and then try and use one algorithm that is as similar to the original one as possible. KiSAO will become more supportive for SED-ML as soon as the ontology contains a wider range of relationships between different algorithms, as well as extended descriptions of the algorithm characteristics.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/kisao.tex}



% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% RESOURCES
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/resources.tex}
\subsection{SED-ML resources}
% further resources
%Further information on SED-ML as well as an extensive example for a SED-ML file can be be found in ``SED-ML -- An XML Format for the Implementation of the MIASE Guidelines'' \citep{KL08a}.
% -> I removed the reference to the CMSB paper, as the UML is slightly different to the one presented there. To avoid confusion.

Information on SED-ML can be found on \url{http://sed-ml.org}. The SED-ML XML Schema, the UML schema and related implementations, libraries, validators and so on can be found on the SED-ML sourceforge project page \url{http://sed-ml.svn.sourceforge.net/}.



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/resources.tex}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/concepts.tex}

\section{Primitive Types}

\subsection{Double}\label{sec:double}

The XML Schema 1.0 type {\tt double} is the data type of
floating-point numerical quantities in SED-ML.  It is restricted to IEEE
double-precision 64-bit floating-point type IEEE 754-1985\cite{ADD_REFERENCE}.  The
value space of {\tt double} consists of (a) the numerical
values $m \cdot 2^x$, where $m$ is an integer whose absolute
value is less than $2^{53}$, and $x$ is an integer between -1075
and 970, inclusive, (b) the special value positive infinity
({\tt INF}), (c) the special value negative infinity
({\tt -INF}), and (d) the special value not-a-number
({\tt NaN}).  The order relation on the values is the following:
$x < y$ if and only if $y - x$ is positive for values of $x$ and
$y$ in the value space of {\tt double}.  Positive infinity is
greater than all other values other than {\tt NaN}.  {\tt NaN}
is equal to itself but is neither greater nor less than any other
value in the value space.  (Software implementors should consult
the XML Schema 1.0 definition of {\tt double} for additional
details about equality and relationships to IEEE 754-1985.)

The general form of {\tt double} numbers is
{\tt $x$e$y$}, where $x$ is a decimal number (the mantissa),
{\tt e} is a separator character, and $y$ is an
exponent; the meaning of this is ``$x$ multiplied by 10 raised
to the power of $y$'', i.e., $x \cdot 10^y$.  More
precisely, a {\tt double} value consists of a mantissa with
an optional leading sign ({\tt +} or {\tt -}), optionally followed
by the character {\tt E} or {\tt e} followed by an integer
(the exponent).  The mantissa must be a decimal number: an integer
optionally followed by a period ({\tt .})\ optionally followed
by another integer.  If the leading sign is omitted, {\tt +} is
assumed.  An omitted {\tt E} or {\tt e} (and associated exponent) means
that a value of 0 is assumed for the exponent.  If the {\tt E}
or {\tt e} is present, it must be followed by an integer, or else an
error results.  The integer exponent must consist of
a decimal number optionally preceded by a leading sign ({\tt +} or
{\tt -}).  If the sign is omitted, {\tt +} is assumed.  The
following are examples of legal literal {\tt double} values:
\begin{center}\vspace*{-0.5ex}
\begin{tabular}{llllllllllll}
\token{-1E4}, & {\tt +4}, & {\tt 234.234e3}, & {\tt 6.02E-23}, 
& \token{0.3e+11}, & \token{2}, & \token{0}, & {\tt -0}, 
& \token{INF}, & \token{-INF}, & \token{NaN}
\end{tabular}
\end{center}\vspace*{-0.6ex}

\subsection{ColorType}\label{sec:ColorType}

The primitive {\tt ColorType} is a string encoding the hexadecimal color code. Color values are specified as a six {\bf or} eight character hexadecimal string which defines the RGBA value of the color. The string is formatted as {\tt `\#'} followed by the six or eight characters from {\tt 0-9 a-f A-F}. If only six characters are given (RGB), the alpha (A) value (also known as transparency or opacity of the color) is assumed to be {\tt FF}.

\subsection{MarkerType}\label{sec:MarkerType}

MarkerType is defined as an enumerated type that can take on one of the values shown in Table~\ref{tbl:MarkerType}.

\begin{table}
\centering
\begin{tabular}{ll} \toprule
Enumeration Value & Display \\ \midrule
{\tt 'square'} & \\
{\tt 'diamond'} & \\
{\tt 'triangle'} & \\
{\tt 'circle'} & \\ 
{\tt 'xCross'} & \\ 
{\tt 'plus'} & \\
{\tt 'star'} & \\ 
{\tt 'triangleDown'} & \\
{\tt 'hDash'} & \\
{\tt 'vDash'} & \\ 
{\tt 'none'} & \\  \bottomrule
\end{tabular}
\caption{List of marker types.}
\label{tbl:MarkerType}
\end{table}

\subsection{LineType}

LineType is defined as an enumerated type that can be one of the values listed in Table~\ref{tbl:LineType}.

\begin{table}
\centering
\begin{tabular}{ll} \toprule 
Enumeration Value & Display \\ \midrule
{\tt 'solid'} & \\
{\tt 'dash'} & \\
{\tt 'dot'} & \\
{\tt 'dashDot'} & \\ 
{\tt 'dashDotDot'} & \\ 
{\tt 'none'} & \\ \bottomrule
\end{tabular}
\caption{List of line types.}
\label{tbl:LineType}
\end{table}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% GENERAL LANGUAGE ELEMENTS
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/generalElements.tex}
\section{General attributes and classes}
In this section we introduce attributes and concepts used repeatedly throughout the SED-ML specification.

% BEGIN \input{sources/idAttribute.tex}
\subsection{\element{id}}
\label{sec:id}
%

Most objects in SED-ML carry an \concept{id} attribute.
The \hyperref[sec:id]{id} attribute, if it exists for an object, is always required and identifies SED-ML constituents unambiguously.
The data type for \code{id} is \code{SId} which is a datatype derived from the basic XML type \code{string}, but with restrictions about the characters permitted and the sequences in which those characters may appear. The definition is shown in
Figure~\vref{fig:sid}.

\begin{figure}[hbt]
  \ttfamily
  \small
  \centering
  \begin{tabular}{lll}
    letter & ::= & 'a'..'z','A'..'Z'\\
    digit  & ::= & '0'..'9'\\
    idChar & ::= & letter | digit | '\_'\\
    SId    & ::= & ( letter | '\_' ) idChar*\\
  \end{tabular}
  \vspace*{-1ex}
  \caption{The definition of the type \code{SId}}
  \label{fig:sid}
\end{figure}

For a detailed description see also the SBML specification on the ``Type SId'' \citep[p. 11]{HBH+10}.

All \code{id}s have a global scope, i.\,e.\ the \code{id} must be unambiguous throughout a whole SED-ML document. As such it identifies the constituent it is related to.

An example for a defined \concept{id} is given in Listing~\ref{lst:id}.
%
\begin{myXmlLst}{SED-ML identifier definition, e.\,g.\ for a model}{lst:id}
<model id="m00001" language="urn:sedml:language:sbml" source="urn:miriam:biomodels.db:BIOMD0000000012">
 [MODEL DEFINITION]
</model>
\end{myXmlLst}
%
The defined model carries the  \code{id} \code{m00001}. If the model is referenced elsewhere in the SED-ML document, it is referred to by that  \code{id}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/idAttribute.tex}

% BEGIN \input{sources/nameAttribute.tex}
\subsection{\element{name}}
\label{sec:name}
%

Besides an \hyperref[sec:id]{id}, a SED-ML constituent may carry an optional \concept{name}. However, names do not have identifying character;  several SED-ML constituents may carry the same name. The purpose of the \code{name} attribute is to keep a human-readable name of the constituent, e.\,g.\ for display to the user. In the XML Schema representation, names are of the data type \code{String}.

Listing \ref{lst:name} extends the model definition in \lst{id} by a model name.
%
\begin{myXmlLst}{SED-ML name definition, e.\,g.\ for a model}{lst:name}
<model id="m00001" name="Circadian oscillator" language="urn:sedml:language:sbml" source="urn:miriam:biomodels.db:BIOMD0000000012">
 [MODEL DEFINITION]
</model>
\end{myXmlLst}
%

% BEGIN \input{sources/sedBaseClass.tex}
% SED-Base class
\subsection{\element{SEDBase}}
\label{class:sedBase}
\concept{SEDBase} is the base class  of SED-ML \currentLV. All other classes are derived from it. As such it provides means to attach additional information on all other classes  (\fig{sedBase}). That information can be specified by human readable \hyperref[class:notes]{Notes} or custom \hyperref[class:annotation]{Annotations}.
%
\sedfig[width=0.9\textwidth]{images/sedBaseClass}{The SEDBase class}{fig:sedBase}
%

%SEDBase has one optional attribute \hyperref[sec:metaID]{metaID}.

\tabtext{sedbase}{SEDBase}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID} \\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{SEDBase}}
\label{tab:sedbase}
\end{table}
%

% BEGIN \input{sources/metaid.tex}
\subsubsection{\element{metaid}}
\label{sec:metaID}
The main purpose of the \element{metaid} attribute is to attach semantic annotations in form of the \hyperref[class:annotation]{Annotation} class to SED-ML elements.  The type of \code{metaid} is XML ID and as such the \code{metaid} attribute is globally unique throughout the whole SED-ML document.

An example showing how to link a semantic annotation to a SED-ML object via the \element{metaid} is given in the \hyperref[class:annotation]{Annotation} class description.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/metaid.tex}

% BEGIN \input{sources/notesClass.tex}
\subsubsection{\element{Notes}}
\label{class:notes}

A \concept{note} is considered a  human-readable description of the element it is assigned to. It serves to display information to the user.
Instances of the \concept{Notes} class may contain any valid XHTML \citep{P+02}, ranging from short comments to whole HTML pages for display in a Web browser.
The namespace URL for \code{XHTML} content inside the \hyperref[class:notes]{Notes} class is \url{http://www.w3.org/1999/xhtml}. It may either be declared in the \hyperref[class:sed-ml]{\code{sedML} XML element}, or directly used in top level XHTML elements contained within the  \code{notes} element. For further options of how to set the namespace and detailed examples, please refer to \citep[p. 14]{HBH+10}.

\tabtext{notes}{Notes}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
xmlns:string & \refpage{sec:xmlns} \\
 {``http://www.w3.org/1999/xhtml" } & \\
\hline
\hline
\textbf{\subelements} & \textbf{ }\\
\hline
\emph{well-formed content permitted in XHTML} & \\
\hline
\end{tabular}
\caption{\tabcap{Notes}}
\label{tab:notes}
\end{table}
%
\code{Notes}  does not have any further sub-elements defined in SED-ML, nor attributes associated with it.
%

\lsttext{notes}{notes}
%
\begin{myXmlLst}{The \element{notes} element}{lst:notes}
<sedML [..]>
 <notes >
  <p xmlns="http://www.w3.org/1999/xhtml">The enclosed simulation description shows the oscillating behaviour of
     the Repressilator model using deterministic and stochastic simulators.</p>
 </notes>
</sedML>
\end{myXmlLst}
%
In this example, the namespace declaration is inside the \element{notes} element and the note is related to the \element{sedML} root element of the SED-ML file. A note may, however, occur inside \emph{any} SED-ML XML element, except \code{note} itself and \hyperref[class:annotation]{\code{annotation}}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/notesClass.tex}

% BEGIN \input{sources/annotationClass.tex}
\subsubsection{\element{Annotation}}
\label{class:annotation}

An \concept{annotation} is considered a computer-processible piece of information.
Annotations may contain any valid XML content.
%No additional namespace declaration is needed for use of the annotation element. However, for the type of XML inside annotation, the according namespaces should be declared, if necessary.
For further guidelines on how to use annotations, we would like to encourage the reading of the corresponding section in the SBML specification \citep[pp. 14-16]{HBH+10}. The style of annotations in SED-ML is briefly described in Section~\ref{sec:annotations} on page \pageref{sec:annotations}.

%\concept{Annotation} does not define any further attributes, nor does it have classes associated to it.

\tabtext{annotation}{Annotation}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
\emph{none} & \\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
\emph{none in the SED-ML namespace} & \\
\hline
\end{tabular}
\caption{\tabcap{Annotation}}
\label{tab:annotation}
\end{table}
%

\lsttext{annotation}{annotation}
%
\begin{myXmlLst}{The annotation element}{lst:annotation}
<sedML>
  [..]
  <model id="model1" metaid="_001" language="urn:sedml:language:cellml"
   source="http://models.cellml.org/workspace/leloup_gonze_goldbeter_1999/@@rawfile/d6613d7e1051b3eff2bb1d3d419a445bb8c754ad/leloup_gonze_goldbeter_1999_a.cellml" >
   <annotation>
    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
             xmlns:bqmodel="http://biomodels.net/model-qualifiers/">
     <rdf:Description rdf:about="#_001">
      <bqmodel:isDescribedBy>
       <rdf:Bag>
        <rdf:li rdf:resource="urn:miriam:pubmed:10415827"/>
       </rdf:Bag>
      </bqmodel:isDescribedBy>
     </rdf:Description>
    </rdf:RDF>
   </annotation>
  </model>
  [..]
</sedML>
\end{myXmlLst}
%
In that example, a SED-ML \hyperref[class:model]{model} element is annotated with a reference to the original publication. The \element{model} contains an \element{annotation} that uses the \concept{biomodels.net model-qualifier} \element{isDescribedBy} to link to the external resource \element{urn:miriam:pubmed:10415827}.
In natural language the annotation content could be interpreted as ``The model \emph{is described by} the published article available from \emph{pubmed} under ID \emph{10643740}''.
The example annotation follows the proposed \hyperref[sec:uriScheme]{URI Scheme} suggested by the MIRIAM reference standard. The MIRIAM URN can be resolved to the PubMED (\url{http://pubmed.gov}) publication with ID 10415827, namely the article ``Alternating oscillations and chaos in a model of two coupled biochemical oscillators driving successive phases of the cell cycle.'' published by Romond et al. in  1999.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/annotationClass.tex}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/sedBaseClass.tex}

% BEGIN \input{sources/sed-mlClass.tex}
% sed-ml Class
\subsection{\element{SED-ML} top level element}
\label{class:sed-ml}
Each SED-ML \currentLV document has a main class called SED-ML which defines the document's structure and content (\fig{sed-mlMain}).
%
%\sedfig[width=0.35\textwidth]{pdf/sed-mlClass}{The SED-ML class}{fig:sed-ml}
%
It consists of several parts; the parts are all connected to the SED-ML class through aggregation:
the \hyperref[class:dataDescription]{DataDescription} class (for resolving external data, see Section~\ref{class:dataDescription}),
the \hyperref[class:model]{Model} class (for model specification, see Section~\ref{class:model}),
the \hyperref[class:simulation]{Simulation} class (for simulation setup specification, see Section~\ref{class:simulation}),
the \hyperref[class:abstractTask]{AbstractTask} class (for the linkage of models and simulation setups, see Section~\ref{class:abstractTask}),
the \hyperref[class:dataGenerator]{DataGenerator} class (for the definition of post-processing, see Section~\ref{class:dataGenerator}),
and the \hyperref[class:output]{Output} class (for the output specification, see Section~\ref{class:output}).
All of them are shown in \fig{sed-mlMain} and will be explained in more detail in the relevant sections of this document.
%
\sedfig[width=0.8\textwidth]{images/sed-mlMain}{The sub-classes of SED-ML}{fig:sed-mlMain}
%

\tabtext{sed-ml}{SED-ML}

%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
xmlns & \refpage{sec:xmlns}\\
level & \refpage{sec:level}\\
version & \refpage{sec:version}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
listOfDataDescriptions$^{o}$ & \refpage{sec:listOfDataDescriptions}\\
listOfModels$^{o}$ & \refpage{sec:listOfModels}\\
listOfSimulations$^{o}$ & \refpage{sec:listOfSimulations} \\
listOfTasks$^{o}$ & \refpage{sec:listOfTasks} \\
listOfDataGenerators$^{o}$ & \refpage{sec:listOfDataGenerators} \\
listOfOutputs$^{o}$ & \refpage{sec:listOfOutputs} \\
\hline
\end{tabular}
\caption{\tabcap{SED-ML}}
\label{tab:sed-ml}
\end{table}
%
A SED-ML document needs to have the SED-ML namespace defined through the mandatory \hyperref[sec:xmlns]{xmlns} attribute. In addition, the SED-ML \hyperref[sec:level]{level} and \hyperref[sec:version]{version} attributes are mandatory.

The basic XML structure of a SED-ML file is shown in listing  \vref{lst:sedmlRoot}.
%
\begin{myXmlLst}{The SED-ML root element}{lst:sedmlRoot}
<?xml version="1.0" encoding="utf-8"?>
<sedML xmlns:math="http://www.w3.org/1998/Math/MathML"
       xmlns="http://sed-ml.org/sed-ml/level1/version3" level="1" version="3">
 <listOfDataDescriptions />
  [DATA REFERENCES AND TRANSFORMATIONS]
 <listOfModels />
  [MODEL REFERENCES AND APPLIED CHANGES]
 <listOfSimulations />
  [SIMULATION SETUPS]
 <listOfTasks />
  [MODELS LINKED TO SIMULATIONS]
 <listOfDataGenerators />
  [DEFINITION OF POST-PROCESSING]
 <listOfOutputs />
  [DEFINITION OF OUTPUT]
</sedML>
\end{myXmlLst}
%
The root element of each SED-ML XML file is the \code{sedML} element, encoding \hyperref[sec:version]{version} and \hyperref[sec:level]{level} of the file, and setting the necessary namespaces. Nested inside the \code{sedML} element are the six lists serving as containers for the encoded data (\concept{listOfDataDescriptions} for all external data sources, \concept{listOfModels} for all models, \concept{listOfSimulations} for all simulations, \concept{listOfTasks} for all tasks, \concept{listOfDataGenerators} for all post-processing definitions, and \concept{listOfOutputs} for all output definitions).

% BEGIN \input{sources/xmlns.tex}
\subsubsection{\element{xmlns}}
\label{sec:xmlns}
The \concept{xmlns} attribute declares the namespace for the SED-ML document. The pre-defined namespace for SED-ML documents is \url{http://sed-ml.org/sed-ml/level1/version3}.

In addition, SED-ML makes use of the \concept{MathML} namespace \url{http://www.w3.org/1998/Math/MathML} to enable the encoding of mathematical expressions in MathML 2.0. SED-ML uses a subset of MathML as described in Section~\ref{sec:mathML} on page \pageref{sec:mathML}.

SED-ML \concept{notes} use the XHTML namespace \url{http://www.w3.org/1999/xhtml}.  The \hyperref[class:notes]{Notes} class is described in Section~\ref{class:notes} on page \pageref{class:notes}.

Additional external namespaces might be used in \hyperref[class:annotation]{annotations}.

%All namespace declarations will be omitted in the following SED-ML sample code snippets.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/xmlns.tex}

% BEGIN \input{sources/level.tex}
\subsubsection{\element{level}}
\label{sec:level}

The current SED-ML \concept{level} is ``level \level''. Major revisions containing substantial changes will lead to the definition of forthcoming levels.

The level attribute is \code{required} and its value is a \code{fixed} decimal. For SED-ML \currentLV the value is set to \code{1}, as shown in the example in Listing~\ref{lst:sedmlRoot}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/level.tex}

% BEGIN \input{sources/version.tex}
\subsubsection{\element{version}}
\label{sec:version}
The current SED-ML \concept{version} is ``version \version''. Minor revisions containing corrections and refinements of SED-ML elements, or new constructs which do not affect backwards compatibility, will lead to the definition of forthcoming versions.

The version attribute is \code{required} and its value is a \code{fixed} decimal. For SED-ML \currentLV the value is set to \code{2}, as shown in the example in Listing~\ref{lst:sedmlRoot}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/version.tex}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/sed-mlClass.tex}

% BEGIN \input{sources/referenceRelation.tex}
\subsection{Reference relations}
\label{sec:reference}

The \concept{reference} concept is used to refer to a particular element inside the SED-ML document. It may occur in six different ways in the SED-ML document:
%
\begin{enumerate}
\item{as an association between two \hyperref[class:model]{Model}s (\hyperref[sec:modelReference]{modelReference}),}
\item{as an association between a \hyperref[class:variable]{Variable} and a \hyperref[class:model]{Model} (\hyperref[sec:modelReference]{modelReference}),}
\item{as an association between a \hyperref[class:variable]{Variable} and an \hyperref[class:abstractTask]{AbstractTask} (\hyperref[sec:taskReference]{taskReference}),}
\item{as an association between a \hyperref[class:task]{Task} and the simulated \hyperref[class:model]{Model} (\hyperref[sec:modelReference]{modelReference}),}
\item{as an association between a \hyperref[class:task]{Task} and the \hyperref[class:simulation]{Simulation} run (\hyperref[sec:simulationReference]{simulationReference}), or}
\item{as an association between an \hyperref[class:output]{Output} and a \hyperref[class:dataGenerator]{DataGenerator} (\hyperref[sec:dataReference]{dataReference}).}
\end{enumerate}
%
The definition of a \hyperref[class:task]{Task} object requires a reference to a particular Model object (\hyperref[sec:modelReference]{modelReference}, see Section~\ref{sec:modelReference} on page \pageref{sec:modelReference}); furthermore, the Task object must be associated with a particular Simulation object (\hyperref[sec:simulationReference]{simulationReference}, see Section~\ref{sec:simulationReference} on page \pageref{sec:simulationReference}).

Depending on the use of the \concept{reference} relation in connection with a \hyperref[class:variable]{Variable} object, it may take different roles:
\begin{enumerate}
\item[a.]{The \concept{reference} association might occur between a Variable object and a Model object, e.g.\ if the variable is to define a \hyperref[class:change]{Change}.
In that case the \code{variable} element contains a \hyperref[sec:modelReference]{modelReference} to refer to the particular model that contains the variable used to define the change (see Section~\ref{sec:modelReference} on page \pageref{sec:modelReference}). }
\item[b.]{If the \concept{reference} is used as an association between a Variable object and an AbstractTask object inside the \hyperref[class:dataGenerator]{dataGenerator} class, then the \code{variable} element contains a \hyperref[sec:taskReference]{taskReference} to unambiguously refer to an observable in a given task (see Section~\ref{sec:taskReference} on page \pageref{sec:taskReference}).}
\end{enumerate}

Four different types of \concept{data references} exist in SED-ML \currentLV. They are used depending on the \emph{type} of output for the simulation. A 2d plot has an \hyperref[sec:xDataReference]{xDataReference} and a \hyperref[sec:yDataReference]{yDataReference} assigned. A 3D plot has in addition a \hyperref[sec:zDataReference]{zDataReference} assigned. To define a report, each data column has a \hyperref[sec:dataReference1]{dataReference} assigned.

% BEGIN \input{sources/modelReference.tex}
\subsubsection{modelReference}
\label{sec:modelReference}
%
The \concept{modelReference} either represents a relation between two \hyperref[class:model]{Model} objects, a \hyperref[class:variable]{Variable} object and a \hyperref[class:model]{Model} object, or  a relation between a \hyperref[class:task]{Task} object and a \hyperref[class:model]{Model} object.

The \code{source} attribute of a \hyperref[class:model]{Model} is allowed to reference either a URI or an \code{SId} to a second
\hyperref[class:model]{Model}. Constructs where a model \code{A} refers to a model \code{B} and \code{B} to \code{A} (directly or indirectly) are invalid.

If pre-processing needs to be applied to a model before simulation, then the model update can be specified by creating a \hyperref[class:change]{Change} object. In the particular case that a change must be calculated with a mathematical function, variables need to be defined. To refer to an existing entity in a defined \hyperref[class:model]{Model}, the \concept{modelReference} is used.

The \code{modelReference} attribute of the \code{variable} element contains the \concept{id} of a model that is defined in the document.
\lsttext{modelReference1}{modelReference}
%
\begin{myXmlLst}{SED-ML \code{modelReference} attribute inside a variable definition of a  \code{computeChange} element}{lst:modelReference1}
<model id="m0001" [..]>
 <listOfChanges>
   <computeChange>
    <listOfVariables>
     <variable id="v1" modelReference="cellML" target="/cellml:model/cellml:component[@cmeta:id='MP']/cellml:variable[@name='vsP']/@initial_value" />
     [..]
    </listOfVariables>
    <listOfParameters [..] />
    <math>
     [CALCULATION OF CHANGE]
    </math>
   </computeChange>
 </listOfChanges>
 [..]
</model>
\end{myXmlLst}
%
In the example, a change is  applied on model \code{m0001}. In the \code{computeChange} element a list of variables is defined. One of those variable is \code{v1} which is defined in another model (\code{cellML}).
The XPath expression given in the \hyperref[sec:target]{target} attribute identifies the variable in the model which carries the ID \code{cellML}.

The \concept{modelReference} is also used to indicate that a \hyperref[class:model]{Model} object is used in a particular  \hyperref[class:task]{Task}. Listing \ref{lst:modelReference2} shows how this can be done for a sample SED-ML document.
%
\begin{myXmlLst}{SED-ML \code{modelReference} definition inside a \element{task} element}{lst:modelReference2}
<listOfTasks>
 <task id="t1" name="Baseline" modelReference="model1" simulationReference="simulation1" />
 <task id="t2" name="Modified" modelReference="model2" simulationReference="simulation1" />
</listOfTasks>
\end{myXmlLst}
%
The example defines two different tasks; the first one applies the simulation settings of \code{simulation1} on \code{model1}, the second one applies the same simulation settings on \code{model2}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:

% END \input{sources/modelReference.tex}

% BEGIN \input{sources/taskReference.tex}
\subsubsection{taskReference}
\label{sec:taskReference}
\hyperref[class:dataGenerator]{DataGenerator} objects are created to apply post-processing to the simulation results before final output.

For certain types of post-processing \hyperref[class:variable]{Variable} objects need to be created.
These link to a \hyperref[class:abstractTask]{task} defined within the \hyperref[sec:listOfTasks]{listOfTasks} from which the model that contains the variable of interest can be inferred.
A \concept{taskReference} association is used to realise that link from a \hyperref[class:variable]{Variable} object inside a \hyperref[class:dataGenerator]{DataGenerator} to an \hyperref[class:abstractTask]{AbstractTask} object.
Listing \ref{lst:reference3} gives an example.
%
\begin{myXmlLst}{SED-ML \code{taskReference} definition inside a \element{dataGenerator} element}{lst:reference3}
<listOfDataGenerators>
 <dataGenerator id="tim3" name="tim mRNA (difference v1-v2+20)">
  <listOfVariables>
   <variable id="v1" taskReference="t1" [..] />
  </listOfVariables>
  <math [..]/>
 </dataGenerator>
</listOfDataGenerators>
\end{myXmlLst}
%
The example shows the definition of a variable \code{v1} in a \code{dataGenerator} element. The variable appears in the model that is used in task \code{t1}. The task definition of \code{t1} might look as shown in Listing~\ref{lst:taskReferences}.
\begin{myXmlLst}{Use of the reference relations in a task definition}{lst:taskReferences}
<listOfTasks>
  <task id="t1" name="task definition" modelReference="model1" simulationReference="simulation1" />
</listOfTasks>
\end{myXmlLst}
Task \code{t1} references the model \code{model1}. Therefore we can conclude that the variable \code{v1} defined in \lst{reference3} targets an element of the model with ID \code{model1}. The targeting process itself will be explained in section \ref{sec:target} on \refpage{sec:target}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/taskReference.tex}

% BEGIN \input{sources/simulationReference.tex}
\subsubsection{simulationReference}
\label{sec:simulationReference}
The \concept{simulationReference} is used to refer to a particular \hyperref[class:simulation]{Simulation} in a \hyperref[class:task]{Task}.
Listing \ref{lst:modelReference2} shows the reference to a defined simulation for a sample SED-ML document. In the example, both tasks \code{t1} and \code{t2} use the simulation settings defined in \code{simulation1} to run the experiment.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/simulationReference.tex}

% BEGIN \input{sources/dataReference.tex}
\subsubsection{dataReference}
\label{sec:dataReference}
The \concept{dataReference} is used to refer to a particular \hyperref[class:dataGenerator]{DataGenerator} instance from an \hyperref[class:output]{Output} instance.
Listing \ref{lst:dataReference} shows the reference to a defined data set for a sample SED-ML document.
%
\begin{myXmlLst}{Example for the use of data references in a curve definition}{lst:dataReference}
<listOfOutputs>
  <plot2D id="p1" [..] >
    <curve id="c1" xDataReference="dg1" yDataReference="dg2" />
    [..]
  </plot>
</listOfOutputs>
\end{myXmlLst}
%
In the example, the output type is a 2D plot, which defines one curve with id \code{c1}. A curve must refer to two different data generators which describe how to procure the data that is to be plotted on the x-axis and y-axis respectively.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/dataReference.tex}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End: % END \input{sources/referenceRelation.tex}

% BEGIN \input{sources/variableClass.tex}
% variable class
\subsection{\element{Variable}}
\label{class:variable}
\concept{Variables} are references to already existing entities, either existing in one of the defined \hyperref[class:model]{models} or implicitly defined \hyperref[sec:symbol]{symbols} (\fig{variable}).
%
\sedfig[width=0.35\textwidth]{images/variable}{The Variable class}{fig:variable}
%
If the variable is defined through a reference to a model constituent, such as an SBML species, or to an entity within the SED-ML file itself, then the reference is specified using the \hyperref[sec:target]{target} attribute.
If the variable is defined through a reference to an \hyperref[sec:implicitVariable]{implicit variable}, rather than one explicitly appearing in the model, then the \hyperref[sec:symbol]{symbol} attribute is used, which holds a SED-ML \hyperref[sec:uriScheme]{URI}.
A \code{variable} is always placed inside a \hyperref[sec:listOfVariables]{listOfVariables}.
The \code{symbol} and \code{target} attributes must not be used together in a single instance of Variable, although at least one must be present.

\tabtext{variable}{Variable}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
target & \refpage{sec:target}\\
symbol & \refpage{sec:symbol}\\
\hline
taskReference & \refpage{sec:taskReference}\\
modelReference & \refpage{sec:modelReference}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{Variable}}
\label{tab:variable}
\end{table}
%

A \code{variable} element must contain a \hyperref[sec:taskReference]{taskReference} if it occurs inside a \code{listOfVariables} inside a \hyperref[class:dataGenerator]{dataGenerator} element.
A \code{variable} element must contain a \hyperref[sec:modelReference]{modelReference} if it occurs inside a \code{listOfVariables} inside a \hyperref[class:computeChange]{computeChange} element.
A \code{variable} element appearing within a \hyperref[class:functionalRange]{functionalRange} or \hyperref[class:setValue]{setValue} element must contain a \hyperref[sec:modelReference]{modelReference} if and only if it references a model variable.

%
\lsttext{variable}{variable}

%
\begin{myXmlLst}{SED-ML \code{variable} definitions inside the \code{computeChange} element and inside the \code{dataGenerator} element}{lst:variable}
<sedML>
 <listOfModels>
  <model [..]>
   <listOfChanges>
    <computeChange target="TARGET ELEMENT OR ATTRIBUTE">
     <listOfVariables>
       <variable id="v1" name="maximum velocity"
        target="XPath TO A MODEL ELEMENT OR ATTRIBUTE IN ANY SPECIFIED MODEL" />
      [FURTHER VARIABLE DEFINITIONS]
     </listOfVariables>
     [..]
    </computeChange>
   </listOfChanges>
   [..]
  </model>
  [..]
 </listOfModels>
 <listOfDataGenerators>
  <dataGenerator [..]>
   <listOfVariables>
    <variable id="v2" name="time" taskReference="task1" symbol="urn:sedml:symbol:time" />
      [FURTHER VARIABLE DEFINITIONS]
   </listOfVariables>
  </dataGenerator>
 </listOfDataGenerators>
 [..]
</sedML>
\end{myXmlLst}
%
Listing \ref{lst:variable} defines a variable \code{v1} (line 7) to compute a change on a model constituent (referenced by the \code{target} attribute on \element{computeChange} in line 5). The value of \code{v1} corresponds with the value of the targeted model constituent referenced by the \code{target} attribute in line 8.
The second variable, \code{v2} (line 21), is used inside a \code{dataGenerator}. As the variable is \concept{time} as used in \code{task1}, the \code{symbol} attribute is used to refer to the SED-ML URI for time (line 21).

% BEGIN \input{sources/target.tex}
\subsubsection{\element{target}}
\label{sec:target}
An instance of \concept{Variable} can refer to a model constituent inside a particular \hyperref[class:model]{model} through an \concept{XPath} expression stored in the \concept{target} attribute.
%
XPath can be used to unambiguously identify an element or attribute in an XML file.

The \concept{target} attribute may also be used to reference an entity within the SED-ML file itself, by containing a fragment identifier consisting of a hash character (\code{\#}) followed by the \concept{id} of the desired element.
As of SED-ML \currentLV this is only used to refer to \hyperref[sec:ranges]{ranges} within a \hyperref[class:repeatedTask]{repeatedTask} (see Listing~\ref{lst:repeatedTask} for an example).


\lsttexta{target}{target}
%
\begin{myXmlLst}{SED-ML \code{target} definition}{lst:target}
  <listOfVariables>
    <variable id="v1" name="TetR protein" taskReference="task1"
      target="/sbml:sbml/sbml:listOfSpecies/sbml:species[@id='PY']" />
  </listOfVariables>
\end{myXmlLst}
%
It should be noted that the identifier and names inside the SED-ML document do not \emph{have} to match the identifiers and names that the model and its constituents carry in the model definition.
In listing \vref{lst:target}, the variable with ID \code{v1} is defined. It is described as the \code{TetR protein}. The reference points to a species in the referenced SBML model. The particular species can be identified through its ID in the SBML model, namely \code{PY}.
However, SED-ML also permits using identical identifiers and names as in the referenced models. The following Listing~\vref{lst:sedmlVariable} is another valid example for the specification of a variable, but uses the same naming in the variable definition as in the original model (as opposed to Listing~\ref{lst:target}):
%
\begin{myXmlLst}{SED-ML variable definition using the original model identifier and name in SED-ML}{lst:sedmlVariable}
   <listOfVariables>
    <variable id="PY" name="TetR protein"  taskReference="task1"
     target="/sbml:sbml/sbml:listOfSpecies/sbml:species[@id='PY']" />
   </listOfVariables>
\end{myXmlLst}
%

%
\begin{myXmlLst}{Species definition in the referenced model (extracted from \url{urn:miriam:biomodels.db:BIOMD0000000012})}{lst:sbmlModel}
<sbml [..]>
 <listOfSpecies]
  <species metaid="PY" id="PY" name="TetR protein" [..]>
   [..]
  </species>
 </listOfSpecies>
 [..]
</sbml>
\end{myXmlLst}
%

The XPath expression used in the \concept{\code{target}} attribute unambiguously leads to the particular place in the XML SBML model -- the species is to be found in the \emph{sbml} element, and there inside the \emph{listOfSpecies} (Listing~\vref{lst:sbmlModel}).
Note that while it is possible to write XPath expressions that select multiple nodes within a referenced model, when used within a \concept{target} attribute a single element or attribute \emph{must} be selected by the expression.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/target.tex}

% BEGIN \input{sources/symbol.tex}
\subsubsection{\element{symbol}}
\label{sec:symbol}

\concept{Symbols} are predefined, implicit variables that can be called in a SED-ML file by referring to the defined URNs representing that variable's concept. The notion of implicit variables is explained in Section~\ref{sec:implicitVariable} on \refpage{sec:implicitVariable}.

\lsttexta{symbol}{symbol}
The example encodes a computed change of model \code{m001}. To specify that change, a symbol is defined (i.\,e.\  the SED-ML symbol for \code{time} is assigned to the variable \code{t1}). How to compute the change itself is explained in Section~\ref{class:computeChange}.
%
\begin{myXmlLst}{SED-ML \code{symbol} definition}{lst:symbol}
  <listOfVariables>
    <variable id="t1" name="time" taskReference="task1"
      symbol="urn:sedml:symbol:time" />
  </listOfVariables>
\end{myXmlLst}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/symbol.tex}


%

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End: % END \input{sources/variableClass.tex}

% BEGIN \input{sources/parameterClass.tex}
% parameter class
\subsection{\element{Parameter}}
\label{class:parameter}
The SED-ML \concept{Parameter} class creates instances with a constant value (\fig{parameter}).
%
\sedfig[width=0.3\textwidth]{images/parameterClass}{The Parameter class}{fig:parameter}
%
SED-ML allows the use of named parameters wherever a mathematical expression is defined to compute some value (e.g.\ in \hyperref[class:computeChange]{ComputeChange}, \hyperref[class:functionalRange]{FunctionalRange} or \hyperref[class:dataGenerator]{DataGenerator}).
In all cases the parameter definitions are local to the particular class defining them.
A benefit of naming parameters rather than including numbers directly within the mathematical expression is that \hyperref[class:notes]{notes} and \hyperref[class:annotation]{annotations} may be associated with them.

\tabtext{parameter}{parameter}
%
\begin{table}[ht!]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID} \\
id & \refpage{sec:id}\\
name$^{o}$ & \refpage{sec:name}\\
\hline
value & \refpage{sec:value}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{parameter}}
\label{tab:parameter}
\end{table}
%

A parameter can unambiguously be identified through its given \hyperref[sec:id]{id}.
It may additionally carry an optional \hyperref[sec:name]{name}.
Each parameter has one associated \hyperref[sec:value]{value}.

\lsttext{parameter}{parameter}
The listing shows the definition of a parameter \code{p1} with the \code{value="40"} assigned.
%
\begin{myXmlLst}{The definition of a parameter in SED-ML}{lst:parameter}
<listOfParameters>
 <parameter id="p1" name="KM" value="40" />
</listOfParameters>
\end{myXmlLst}
%

% BEGIN \input{sources/value.tex}
\subsubsection{\element{value}}
\label{sec:value}
Each \concept{parameter} has exactly one fixed \concept{value}. The \code{value} attribute of XML data type \code{Double} is required for each \code{parameter} element.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/value.tex}

%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/parameterClass.tex}

% BEGIN \input{sources/listOfElements.tex}
\subsection{ListOf* containers}
\label{listOfElements}
SED-ML \concept{listOf*} elements serve as containers  for a collection of objects of the same type. For example, the \code{listOfModels} contains all \hyperref[class:model]{Model} objects of a SED-ML document. Lists do not carry any further semantics nor do they add additional attributes to the language. They might, however, be annotated with \hyperref[class:notes]{Notes} and \hyperref[class:annotation]{Annotations} as they are derived from \hyperref[class:sedBase]{SEDBase}.
All \concept{listOf*} elements are optional in a SED-ML document.

% BEGIN \input{sources/listOfVariables.tex}
\subsubsection{listOfVariables: The variable definition container}
\label{sec:listOfVariables}

SED-ML uses the \hyperref[class:variable]{variable} concept to refer to existing entities inside a model. The container for all variables is  \concept{listOfVariables} (\fig{listOfVariables}). It includes all variables that need to be defined to either describe a change in the model by means of mathematical equations (\hyperref[class:computeChange]{ComputeChange}) or to set up a \hyperref[class:dataGenerator]{dataGenerator}.

% Fig: sed model
\sedfig[width=0.85\textwidth]{images/listOfVariables}{The SED-ML listOfVariables container}{fig:listOfVariables}
%

\lsttext{listOfVariables}{listOfVariables}
 The \code{listOfVariables} is optional and may contain zero to many variables.
%
\begin{myXmlLst}{SED-ML listOfVariables element}{lst:listOfVariables}
<listOfVariables>
 <variable id="v1" name="maximum velocity" taskReference="task1"
     target="/cellml:model/cellml:component[@cmeta:id='MP']/cellml:variable[@name='vsP']/@initial_value" />
 <variable id="v2" taskReference="task2" symbol="urn:sedml:symbol:time" />
</listOfVariables>
\end{myXmlLst}
%
%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/listOfVariables.tex}

% BEGIN \input{sources/listOfParameters.tex}
\subsubsection{listOfParameters: The parameter definition container}
\label{sec:listOfParameters}
All \hyperref[class:parameter]{parameters} needed throughout the simulation experiment, whether to compute a change on a model prior to or during simulation (\hyperref[class:computeChange]{ComputeChange} and \hyperref[class:setValue]{SetValue}), to compute values in a \hyperref[class:functionalRange]{FunctionalRange}, or to set up a \hyperref[class:dataGenerator]{DataGenerator}, are defined inside a \concept{listOfParameters} (\fig{listOfParameters}).
% Fig: sed model
\sedfig[width=0.85\textwidth]{images/listOfParameters}{The SED-ML \code{listOfParameters} container}{fig:listOfParameters}
%

\lsttext{listOfParameters}{listOfParameters}
The element is optional and may contain zero to many parameters.
%
\begin{myXmlLst}{SED-ML \code{listOfParameters} element}{lst:listOfParameters}
<listOfParameters>
 <parameter id="p1" value="1" />
 <parameter id="p2" name="Kadp_2" value="0.23" />
</listOfParameters>
\end{myXmlLst}
%


%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End: % END \input{sources/listOfParameters.tex}

% BEGIN \input{sources/listOfModels.tex}
\subsubsection{listOfModels: The model description container}
\label{sec:listOfModels}
In order to specify a simulation experiment, the participating models have to be defined. SED-ML uses the \concept{listOfModels} container for all necessary models (\fig{listOfModels}).

% Fig: sed model
\sedfig[width=0.85\textwidth]{images/listOfModels}{The SED-ML listOfModels container}{fig:listOfModels}
%

\lsttext{listOfModels}{listOfModels}
The \code{listOfModels} is optional and may contain zero to many models. However, if the \currentLV document contains  one or more \code{Task} elements, at least one \code{Model} element must be defined to which the \code{Task} element refers (c.f.\ Section~\ref{sec:modelReference} on \refpage{sec:modelReference}).
%
\begin{myXmlLst}{SED-ML listOfModels element}{lst:listOfModels}
<listOfModels>
 <model id="m0001" language="urn:sedml:language:sbml"
  source="urn:miriam:biomodels.db:BIOMD0000000012" />
 <model id="m0002" language="urn:sedml:language:cellml"
  source="http://models.cellml.org/workspace/leloup_gonze_goldbeter_1999/@@rawfile/d6613d7e1051b3eff2bb1d3d419a445bb8c754ad/leloup_gonze_goldbeter_1999_a.cellml" />
</listOfModels>
\end{myXmlLst}
%



%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/listOfModels.tex}

% BEGIN \input{sources/listOfChanges.tex}
\subsubsection{listOfChanges: The change definition container}
\label{sec:listOfChanges}
The \concept{listOfChanges} contains the defined changes to be applied to a particular \hyperref[class:model]{model} (\fig{listOfChanges}).
%
\sedfig[width=0.85\textwidth]{images/listOfChanges}{The SED-ML listOfChanges container}{fig:listOfChanges}
%
It always occurs as an optional subelement of the \element{model} element.

\lsttext{listOfChanges}{listOfChanges}
The \code{listOfChanges} is nested inside the \code{model} element.
%
\begin{myXmlLst}{The SED-ML \element{listOfChanges} element, defining a change on a model}{lst:listOfChanges}
<model id="m0001" [..]>
 <listOfChanges>
  [CHANGE DEFINITION]
 </listOfChanges>
</model>
\end{myXmlLst}
%

%In the example, a change is defined on the model \element{m0001}. To encode the change, a \element{listOfChanges} is created that contains all changes, each stored in a single \element{change} element, as explained in the definition of the \hyperref[class:change]{Change} class.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/listOfChanges.tex}

% BEGIN \input{sources/listOfSimulations.tex}
\subsubsection{listOfSimulations: The simulation description container}
\label{sec:listOfSimulations}

The \concept{listOfSimulations} element is the container for \concept{simulation} descriptions (\fig{sedListOfSimulations}).
%
\sedfig[width=0.851\textwidth]{images/listOfSimulations}{The listOfSimulations container}{fig:sedListOfSimulations}
%

\lsttext{listOfSimulations}{listOfSimulation}
%
\begin{myXmlLst}{The SED-ML \element{listOfSimulations} element, containing two simulation setups}{lst:listOfSimulations}
 <listOfSimulations>
  <simulation id="s1" [..]>
   [UNIFORM TIMECOURSE DEFINITION]
  </simulation>
  <simulation id="s2" [..]>
   [UNIFORM TIMECOURSE DEFINITION]
  </simulation>
 </listOfSimulations>
\end{myXmlLst}
%
The \code{listOfSimulations} is optional and may contain zero to many simulations. However, if the \currentLV document contains one or more \code{Task} elements, at least one \code{Simulation} element must be defined to which  the \code{Task} element refers --- see section \ref{sec:simulationReference} on \refpage{sec:simulationReference}.

% A SED-ML description can be a sole storage container for a \emph{general} simulation setting, comparible to an experiment procudure description. In that case, no particular model needs to be related to the simulation description:
% %
% \begin{myXmlLst}{}{}
% <sedML>
%  <listOfModels />
%   <listOfSimulations>
%    [SIMULATION SETTINGS FOLLOWING]
%   </listOfSimulations>
% </sedML>
% \end{myXmlLst}
% %

%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/listOfSimulations.tex}

% BEGIN \input{sources/listOfAlgorithmParameters.tex}
% list of algorithm parameters

\subsubsection{listOfAlgorithmParameters: The container for algorithm parameters}
\label{sec:listOfAlgorithmParameters}

The \concept{listOfAlgorithmParameters} contains the the settings for the simulation algorithm used in a simulation experiment. It may list several instances of the \hyperref[class:algorithmParameter]{AlgorithmParameter} class.

% Fig: sed model
%\sedfig[width=0.85\textwidth]{pdf/listOfModels}{The SED-ML listOfModels container}{fig:listOfModels}
%
\lsttext{listOfAlgorithmParameters}{listOfAlgorithmParameters}
The \code{listOfAlgorithmParameters} is optional and may contain zero to many parameters.
%
\begin{myXmlLst}{SED-ML listOfAlgorithmParameters element}{lst:listOfAlgorithmParameters}
<listOfAlgorithmParameters>
  <algorithmParameter kisaoID="KISAO:0000211" value="23"/>
</listOfAlgorithmParameters>
\end{myXmlLst}
%

%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:% END \input{sources/listOfAlgorithmParameters.tex}

% BEGIN \input{sources/listOfTasks.tex}
\subsubsection{listOfTasks: The task specification container}
\label{sec:listOfTasks}
The \concept{listOfTasks} element contains the defined tasks for the simulation experiment (\fig{listOfTasks}).
%
\sedfig[width=0.85\textwidth]{images/listOfTasks}{The SED-ML listOfTasks container}{fig:listOfTasks}
%

\lsttext{listOfTasks}{listOfTasks}
%
\begin{myXmlLst}{The SED-ML \code{listOfTasks} element, defining one task}{lst:listOfTasks}
<listOfTasks>
 <task id="t1" name="simulating v1" modelReference="m1" simulationReference="s1">
 [FURTHER TASK DEFINITIONS]
</listOfTasks>
\end{myXmlLst}
The \code{listOfTasks} is optional and may contain zero to many tasks, each of which is an instance of a subclass of \hyperref[class:abstractTask]{AbstractTask}.
However, if the \currentLV document contains a \code{DataGenerator} element with at least one \code{Variable} element, at least one \concept{task} must be defined to which variable(s) in the \code{DataGenerator} element refer --- see Section~\ref{sec:taskReference} on \refpage{sec:taskReference}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/listOfTasks.tex}

% BEGIN \input{sources/listOfDatagenerators.tex}
\subsubsection{listOfDataGenerators: The post-processing container}
\label{sec:listOfDataGenerators}

In SED-ML, all variable- and parameter values that shall be used in the \hyperref[class:output]{Output} class need to be defined as a \hyperref[class:dataGenerator]{dataGenerator} beforehand. The container for those data generators is the \concept{listOfDataGenerators} (\fig{listOfDataGenerators}).
% Fig: DG
\sedfig[width=0.85\textwidth]{images/listOfDataGenerators}{The SED-ML listOfDataGenerators container}{fig:listOfDataGenerators}
%

\lsttext{listOfDataGenerators}{listOfDataGenerators}
%
\begin{myXmlLst}{The \code{listOfDataGenerators} element, defining two data generators \emph{time} and \emph{LaCI repressor}}{lst:listOfDataGenerators}
<listOfDataGenerators>
 <dataGenerator id="d1" name="time">
  [DATA GENERATOR DEFINITION FOLLOWING]
 </dataGenerator>
 <dataGenerator id="LaCI" name="LaCI repressor">
  [DATA GENERATOR DEFINITION FOLLOWING]
 </dataGenerator>
</listOfDataGenerators>
\end{myXmlLst}

The \code{listOfDataGenerators} is optional and in general may contain zero to many DataGenerators. However, if the \currentLV document contains  an  \code{Output}  element, at least one  \code{DataGenerator} must be defined to which the \code{Output} element refers -  see  section \ref{sec:dataReference} on \refpage{sec:dataReference}.
%



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/listOfDatagenerators.tex}

% BEGIN \input{sources/listOfOutputs.tex}
\subsubsection{listOfOutputs: The output specification container}
\label{sec:listOfOutputs}

The \concept{listOfOutputs} container holds the output specifications for a simulation experiment.
%
\sedfig[width=0.85\textwidth]{images/listOfOutputs}{The SED-ML listOfOutputs container}{fig:listOfOutputs}
%

The output can be defined as either a \hyperref[class:report]{report}, a \hyperref[class:plot2D]{plot2D} or  as a \hyperref[class:plot3D]{plot3D}.


\lsttext{listOfOutputs}{listOfOutputs}
The \code{listOfOutputs} is optional and may contain zero to many outputs.
%
\begin{myXmlLst}{The \code{listOfOutput} element}{lst:listOfOutputs}
<listOfOutputs>
 <report id="report1">
  [REPORT DEFINITION FOLLOWING]
 </report>
 <plot2D id="plot1">
  [2D PLOT DEFINITION FOLLOWING]
 </plot2D>
</listOfOutputs>
\end{myXmlLst}
%

\subsection{Marker}\label{sec:Marker}

A marker is a symbol used to indicate a data point on a graph. It has four attributes: the marker style, of type {\tt MarkerType}~\ref{sec:MarkerType}; the fill color and the line color, of type {\tt ColorType}~\ref{sec:ColorType}; and the line thickness of the outline, of type double. To make a marker invisible, use the style of {\tt none}.

\begin{myXmlLst}{The \element{marker} element}{lst:marker}
<sedML [..]>
 <marker style="square" fillColor="#FF0000" lineColor="#FF0000" lineThickness="2.0"/>
</sedML>
\end{myXmlLst}

\sedfig[width=0.55\textwidth]{images/markerType}{Marker Type}{fig:MarkerType}

\subsubsection{fillColor}

The {\tt fillColor} of a marker is of type {\tt ColorType} and is used to define the interior color of the marker. 

\subsubsection{lineColor}

The {\tt lineColor} of a marker is of type {\tt ColorType} and is used to define the outline color of the marker. The thickness of the outline is described by the thickness attribute.

\subsubsection{lineThickness}

The {\tt lineThickness} of a marker is of type {\tt double} and is used to define the thickness of the marker outline. The units of the thickness are not defined.

\subsection{Line}\label{sec:Line}

A line defines the styling characteristics of a plotted curve. It consists of three attributes: the line style, of type {\tt LineType}; the line color, of type {\tt ColorType}; and the line thickness, of type {\tt double}.

\begin{myXmlLst}{The \element{line} element}{lst:line}
<sedML [..]>
 <line style="solid" color="#00FF00" thickness="2.0"/>
</sedML>
\end{myXmlLst}

\sedfig[width=0.55\textwidth]{images/lineType}{Line Type}{fig:LineType}

\subsubsection{style}

The {\tt style} is of type {\tt LineStyle} and describes the appearance of the line, whether it be solid, dashed, none etc. To make a line invisible, use a value of {\tt none} for the style. 

\subsubsection{color}

The {\tt color} is of type {\tt ColorType} and defines the color of a line.

\subsubsection{thickness}

The {\tt thickness} is of type {\tt double} and defines the thickness of a drawn line. The units of the thickness are not defined.

%The example shows the definition of two different outputs, one being a data table (report), the other one a 2D plot.


%% SYNTAX
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/syntax.tex}
\settocdepth{subsubsection}

\section{SED-ML Components}
% the sed-ml elements
In this section we describe the major components of SED-ML. We use the UML notation presented in section \ref{sec:umlconventions}, and we show the use of SED-ML with XML examples.
In addition, we provide
%a detailed BPMN diagram with explanation of the SED-ML workflow in Appendix \ref{sec:overview} and
an XML Schema in Appendix~\ref{sec:xmlschema}.

%% DATA
% BEGIN \input{sources/dataDescriptionClass.tex}
\subsection{\element{DataDescription}}
% datadescription class
\label{class:dataDescription}
The \concept{DataDescription} class (\fig{sedDataDescription}) references a file containing data points, along with a description on how to access that file, and what information to extract from it.

The \concept{DataDescription} class introduces three attributes: the required attributes \token{id} and \token{source} and the optional attribute \token{name}. Additionally two elements are defined: \concept{dimensionDescription} and \concept{listOfDataSources}.

% Fig: sed model
\sedfig[width=1.0\textwidth]{images/dataDescriptionClass}{The SED-ML DataDescription class}{fig:sedDataDescription}
%

\tabtext{dataDescription}{dataDescription}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
source & \refpage{sec:sedsource}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
dimensionDescription$^{o}$ & \refpage{class:dimensionDescription}\\
listOfDataSources$^{o}$ & \refpage{class:listOfDataSources}\\
\hline
\end{tabular}
\caption{\tabcap{dataDescription}}
\label{tab:dataDescription}
\end{table}
%

\subsubsection{The \token{id} and \token{name} attributes}
The attribute \token{id} of type \token{SId} is meant to uniquely identify the \token{dataDescription} element, while the optional \token{name} attribute of type \token{string}, is there to provide a human readable representation if desired.

\subsubsection{The \token{source} attribute}
\label{sec:sedsource}
Analog to how the \token{source} attribute on the \SedModel is handled, this attribute provides a location of a data file. In order to resolve the \token{source} attribute, the same mechanisms are allowed as for \SedModel element: be it a local file system, a relative link or an online resource.

\note{The community decided, that the file will always be encoded in the NuML format.}

\lsttext{dataDescription}{dataDescription}
%
\begin{myXmlLst}{SED-ML \code{dataDescription} element}{lst:dataDescription}
   <dataDescription id="Data1" name="Oscli Time Course Data"
     source="http://svn.code.sf.net/p/libsedml/code/trunk/Samples/data/oscli.numl" >
     ...
    </dataDescription>
\end{myXmlLst}
%

\subsubsection{\element{dimensionDescription}}
\label{class:dimensionDescription}

The \concept{dimensionDescription} element is the data description from an NuML file. Consider for example:

%
\begin{myXmlLst}{SED-ML \code{dimensionDescription} element}{lst:dataDescription}
    <dimensionDescription>
        <compositeDescription indexType="double" id="time" name="time"
          xmlns="http://www.numl.org/numl/level1/version1">
        <compositeDescription indexType="string" id="SpeciesIds" name="SpeciesIds">
            <atomicDescription valueType="double" name="Concentration" />
        </compositeDescription>
        </compositeDescription>
    </dimensionDescription>
\end{myXmlLst}
%

Here a nested NuML \token{componentDescription} with \token{time} spanning one dimension and \token{SpeciesIds} another. This two dimensional space is then filled with \token{double} values representing concentrations.

\subsubsection{\element{listOfDataSources}}
\label{class:listOfDataSources}
The \concept{listOfDataSources} contains one or more \SedDataSource elements that are then used in the remainder of the SED-ML document.


% BEGIN \include{sources/dataSourceClass.tex}
\subsection{\element{DataSource}}
% datasource class
\label{class:dataSource}
The \concept{DataSource} class (\fig{sedDataSource}) extracts chunks out of the data file provided by the outer \SedDataDescription element.

The \concept{DataSource} class introduces three attributes: the required attribute \token{id} and the optional attribute \token{indexSet} and \token{name}. Additionally the \concept{listOfSlices} element is defined.

% Fig: sed model
\sedfig[width=0.9\textwidth]{images/dataSourceClass}{The SED-ML DataSource class}{fig:sedDataSource}
%

\tabtext{dataSource}{dataSource}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
indexSet & \refpage{sec:indexSet}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
listOfSlices$^{o}$ & \refpage{class:listOfSlices}\\
\hline
\end{tabular}
\caption{\tabcap{dataSource}}
\label{tab:dataSource}
\end{table}
%

\subsubsection{The \token{id} and \token{name} attributes}
The attribute \token{id} of type \token{SId} is meant to uniquely identify the \token{dataSource} element, while the optional \token{name} attribute of type \token{string}, is there to provide a human readable representation if desired.

\subsubsection{The \token{indexSet} attribute}
\label{sec:indexSet}
Since data elements in NuML are either values, or indices, the \SedDataSource element needs two ways of addressing those elements. The \token{indexSet} attribute allows to address all indices privided by NuML elements with \token{indexType}. For example in for the \token{time} \element{componentDescription} above, a \token{dataSource}:

%
\begin{myXmlLst}{}{lst:indexSet}
        <dataSource id="dataTime" indexSet="time" />
\end{myXmlLst}
%

would extract the set of all timepoints stored in the index. Similarly:


%
\begin{myXmlLst}{}{lst:indexSet2}
        <dataSource id="allIds" indexSet="SpeciesIds" />
\end{myXmlLst}
%

would extract all the species id strings stored in that index set. Valid values for \token{indexSet} are all NuML Id elements declared in the \token{dimensionDescription}. If the \token{indexSet} attribute is specified the corresponding \token{dataSource} may not define any \token{slice} elements.

\subsubsection{\element{listOfSlices}}
\label{class:listOfSlices}
The \concept{listOfSlices} contains one or more \SedSlice elements that are then used in the remainder of the SED-ML document.

\subsubsection{Using the \token{dataSource} elements}
Once the \SedDataSource elements are defined, they can be reused anywhere in the SED-ML Description. Specifically their \token{id} attribute can be referenced within the \element{listOfVariables} of \element{DataGenerators}, \element{computeChange} or \element{setValue} objects. Here an example that re-uses the data source \token{dataS1}:


%
\begin{myXmlLst}{}{lst:indexSet2}
   <dataGenerator id="dgDataS1" name="S1 (data)">
     <listOfVariables>
       <variable id="varS1" modelReference="model1" target="#dataS1" />
     </listOfVariables>
     <math xmlns="http://www.w3.org/1998/Math/MathML">
       <ci> varS1 </ci>
     </math>
   </dataGenerator>
\end{myXmlLst}
%

This represents a change from \LoneVone and \LoneVtwo, in which a \token{taskReference} was always present for a \token{variable} in a data generator.

To indicate that the target is an entity defined within the current SED-ML description the hashtag (\#) with the reference to an \token{id} was used. Additionally, this example uses the \token{modelReference}, in order to facilitate a mapping of the data encoded in the NuML document with a given model.

%\input {sources/sliceClass}
\subsection{\element{Slice}}
% datasource class
\label{class:slice}
If a \SedDataSource does not define the \token{indexSet} attribute, it will contain \SedSlice elements. Each slice removes one dimension from the data hypercube.

The \concept{Slice} class introduces two required attributes: \token{reference} and \token{value}.

% Fig: sed model
\sedfig[width=0.5\textwidth]{images/sliceClass}{The SED-ML Slice class}{fig:sedSlice}
%

\tabtext{slice}{slice}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
\hline
reference & \refpage{sec:sliceReference}\\
value & \refpage{sec:sliceValue}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{slice}}
\label{tab:slice}
\end{table}
%

\subsubsection{The \token{reference} attribute}
\label{sec:sliceReference}
The \token{reference} attribute references one of the indices described in the \token{dimensionDescription}. In the example above, valid values would be: \token{time} and \token{SpeciesIds}.

\subsubsection{The \token{value} attribute}
\label{sec:sliceValue}
The \token{value} attribute takes the value of a specific index in the referenced set of indices. For example:

%
\begin{myXmlLst}{}{lst:sliceValue1}
        <dataSource id="dataS1">
          <listOfSlices>
            <slice reference="SpeciesIds" value="S1" />
          </listOfSlices>
        </dataSource>
\end{myXmlLst}
%

would isolate the index set of all species ids specified, to only the single entry for \token{S1}, however over the full range of the \token{time} index set. As stated before, there could be multiple slice elements present, so it would be feasible to slice the data again, to obtain a single time point, for example the initial one:

%
\begin{myXmlLst}{}{lst:sliceValue2}
        <dataSource id="dataS1">
          <listOfSlices>
            <slice reference="time" value="0" />
            <slice reference="SpeciesIds" value="S1" />
          </listOfSlices>
        </dataSource>
\end{myXmlLst}
%

%% MODELS
% BEGIN \input{sources/modelClass.tex}
\subsection{\element{Model}}
% model class
\label{class:model}
The \concept{Model} class defines the models to be used in the simulation experiment (\fig{sedModel}).
% Fig: sed model
\sedfig[width=0.85\textwidth]{images/listOfChanges}{The SED-ML Model class}{fig:sedModel}
%

Each instance of the Model class has an unambiguous and mandatory \hyperref[sec:id]{id}. An additional, optional \hyperref[sec:name]{name} may be given to the model.

The \hyperref[sec:language]{language} may be specified, defining the format the model is encoded in, if such a format exists. Example formats are SBML or CellML.

The \concept{Model} class refers to the particular model of interest through the \hyperref[sec:source]{source} attribute. The restrictions on the model reference are
\begin{itemize}
 \item{The model must be encoded in an XML format.}
 \item{To refer to the model encoding language, a reference to a valid definition of that XML format must be given (\hyperref[sec:language]{language} attribute).}
 \item{To refer to a particular model in an external resource, an unambiguous reference must be given (\hyperref[sec:source]{source} attribute).}
\end{itemize}

A model might need to undergo preprocessing before simulation. Those pre-processing steps are specified in the SED-ML \hyperref[class:change]{Change} class.

\tabtext{model}{model}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
language$^{o}$ & \refpage{sec:language}\\
source & \refpage{sec:source}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
change$^{o}$ & \refpage{class:change}\\
\hline
\end{tabular}
\caption{\tabcap{model}}
\label{tab:model}
\end{table}
%

\lsttext{model}{model}
%
\begin{myXmlLst}{SED-ML \code{model} element}{lst:model}
<listOfModels>
 <model id="m0001" language="urn:sedml:language:sbml"
  source="urn:miriam:biomodels.db:BIOMD0000000012">
  <listOfChanges>
   <change>
    [MODEL PRE-PROCESSING]
   </change>
   </listOfChanges>
 </model>
 <model id="m0002" language="urn:sedml:language:sbml" source="m0001">
  <listOfChanges>
   [MODEL PRE-PROCESSING]
  </listOfChange>
 </model>
 <model id="m0003" language="urn:sedml:language:cellml" source="http://models.cellml.org/workspace/leloup_gonze_goldbeter_1999/@@rawfile/d6613d7e1051b3eff2bb1d3d419a445bb8c754ad/leloup_gonze_goldbeter_1999_a.cellml">
  [MODEL PRE-PROCESSING]
 </model>
</listOfModels>
\end{myXmlLst}
%

The above \code{listOfModels} contains three models:
The first model \code{m0001} is the Repressilator model taken from \biom.
The original model is available from \url{urn:miriam:biomodels.db:BIOMD0000000012}.
For the SED-ML simulation, the model might undergo preprocessing, described in the \hyperref[class:change]{change} element (lines 5-7).
Based on the description of the first model \code{m0001}, the second model is built.
It refers to the model \code{m001} in the \code{source} attribute, that is the modified version of the Repressilator model.
\code{m0002} might then have even further changes applied to it on top of the changes defined in the pre-processing of \code{m0001}.
The third model in the code example above (lines 13-15) is a different model in CellML representation. \code{m0003} is the model available from the given URL in the \code{source} attribute. Again, it might have additional pre-processing applied to it before used in the simulation.

% BEGIN \input{sources/language.tex}
\subsubsection{\element{language}}
\label{sec:language}
The evaluation of a SED-ML document is required in order for software to decide whether or not it can be used in a particular simulation environment. One crucial criterion is the particular model representation language used to encode the model. A simulation software usually only supports a small subset of the representation formats available to model biological systems computationally.

To help  software decide whether or not it supports a SED-ML description file, the information on the model encoding for each referenced model can be provided through the \concept{language} attribute, as the description of a language name and version through an unrestricted \code{String} is error-prone.
A prerequisite for a language to be fully supported by SED-ML is that a formalised language definition, e.\,g. an XML Schema, is provided online. SED-ML also defines a set of standard URIs to refer to particular language definitions.
The list of URNs for languages so far associated with SED-ML is available from the SED-ML web site on \url{http://sed-ml.org/}  (Section~\ref{sec:languageURI} on \refpage{sec:languageURI}).
To specify language and version, following the idea of MIRIAM URNs, the SED-ML URN scheme \code{urn:sedml:language:}\emph{language name} is used. A model's language being ``SBML Level 2 Version 2'' can be referred to, for example, through the URN \code{urn:sedml:language:sbml.level-2.version-2}.

The \concept{language} attribute is optional in the XML representation of a SED-ML file.
If it is not explicitly defined in the SED-ML file, the default value for the \concept{language} attribute is \code{urn:sedml:language:xml}, referring to any XML based model representation.

However, the use of the \concept{language} attribute is strongly encouraged for two reasons.
Firstly, it helps a user decide whether or not he is able to run the simulation, that is to parse the model referenced in the SED-ML file.
Secondly, the language attribute is also needed to decide how to handle the implicit variables in the \hyperref[class:variable]{Variable} class, as the interpretation of implicit variables depends on the language of the representation format. The concept of implicit variables has been introduced in Section~\ref{sec:implicitVariable} on \refpage{sec:implicitVariable}.




%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/language.tex}

% BEGIN \input{sources/source.tex}
\subsubsection{\element{source}}
\label{sec:source}
To make a model available for the execution of a SED-ML file, the model \element{source} must be specified through either a URI or a reference to an \code{SId} of an existing Model.

The URI should preferably point to a public, consistent location that provides the model description file and follows the proposed \hyperref[sec:uriScheme]{URI Scheme}.
References to curated, open model bases are recommended, such as the BioModels Database. However, any resource registered with MIRIAM resources\footnote{\url{http://www.ebi.ac.uk/miriam/main/}} can easily be referenced. Even without a MIRIAM URN, SED-ML can be used (Section~\ref{sec:modelURI} on \refpage{sec:modelURI}).

An example for the definition of a model, and using the  \hyperref[sec:uriScheme]{URI scheme} is given in Listing~\ref{lst:sourceA}.
%
\begin{myXmlLst}{The SED-ML \code{source} element, using the URI scheme}{lst:sourceA}
 <model id="m1" name="repressilator" language="urn:sedml:language:sbml"
  source="urn:miriam:biomodels.db:BIOMD0000000012">
  <listOfChanges>
   [MODEL PRE-PROCESSING]
  </listOfChanges>
 </model>
\end{myXmlLst}
%
The example defines one model \code{m1}. \code{urn:miriam:biomodels.db:BIOMD0000000012} defines the source of the model code. The MIRIAM URN can be resolved into the SBML model stored in BioModels Database under ID \element{BIOMD0000000012} using the MIRIAM web service. The resulting URL is \url{http://www.ebi.ac.uk/biomodels-main/BIOMD0000000012}.

An example for the definition of a model and using a URL is given in Listing~\ref{lst:sourceB}.
%
\begin{myXmlLst}{The SED-ML \code{source} element, using a URL}{lst:sourceB}
 <model id="m1" name="repressilator" language="urn:sedml:language:cellml"
  source="http://models.cellml.org/exposure/bba4e39f2c7ba8af51fd045463e7bdd3/aguda_b_1999.cellml">
  <listOfChanges />
 </model>
\end{myXmlLst}
%
In the example one model is defined. The \element{language} of the model is \element{CellML}. As the CellML model repository currently does not provide a MIRIAM URI for model reference, the \emph{URL} pointing to the model code is used to refer to the model. The URL is given in the \element{source} attribute.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/source.tex}


%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End: % END \input{sources/modelClass.tex}

% BEGIN \input{sources/changeClass.tex}
% Change Class
  \subsection[Change]{\element{Change}}
\label{class:change}
SED-ML not only allows to use the sole model for simulation, but also enables the description of \concept{changes} to be made on the model before simulation  (\fig{sedChange}). Changes can be of three distinct types:
\begin{enumerate}
 \item{Changes on attributes of the model's XML representation (\hyperref[class:changeAttribute]{ChangeAttribute})}
 \item{Changes on any XML snippet of the model's XML representation (\hyperref[class:addXml]{AddXML}, \hyperref[class:changeXml]{ChangeXML}, \hyperref[class:removeXml]{RemoveXML})}
 \item{Changes based on mathematical calculations (\hyperref[class:computeChange]{ComputeChange})}
 \end{enumerate}

The \concept{Change} class is abstract and serves as the base class for different types of changes.
Therefore, a SED-ML document will only contain the derived classes, i.e.\ \hyperref[class:changeAttribute]{ChangeAttribute}, \hyperref[class:addXml]{AddXML}, \hyperref[class:changeXml]{ChangeXML}, \hyperref[class:removeXml]{RemoveXML}, or \hyperref[class:computeChange]{ComputeChange}.
%
\sedfig[width=\textwidth]{images/changeClass}{The SED-ML Change class}{fig:sedChange}
%

\tabtext{change}{change}
%
\begin{table}[h!]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
target & \refpage{sec:target}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{change}}
\label{tab:change}
\end{table}
%

Each Change has a \hyperref[sec:target]{target} attribute that holds a valid XPath expression pointing to the XML element or XML attribute that is to undergo the defined changes.
Except for the cases of \hyperref[class:changeXml]{ChangeXML} and \hyperref[class:removeXml]{RemoveXML}, this XPath expression must always select a \emph{single} element or attribute within the relevant model.

% BEGIN \input{sources/newXmlClass.tex}
\subsubsection{\element{NewXML}}
\label{sec:newXml}

The \code{newXML} element provides a piece of XML code (\fig{sedChange}).
\code{NewXML} must hold a valid piece of XML which after insertion into the original model must lead to a valid model file, according to the model language specification (as given by the \hyperref[sec:language]{language} attribute).

%\sedfig[width=0.35\textwidth]{pdf/newXmlClass}{The \code{NewXML} class}{fig:newXml}

\tabtext{newXML}{newXML}

%
\begin{table}[h!]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
\emph{none} & \\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
\emph{anyXML} & \\
\hline
\end{tabular}
\caption{\tabcap{newXML}}
\label{tab:newXML}
\end{table}
%


The \code{newXML} element is used at two different places inside SED-ML \currentLV:
%
\begin{enumerate}
\item{If it is used as a sub-element of the \hyperref[class:addXml]{addXML} element, then the XML it contains  it is to be \emph{inserted as a child} of the XML element addressed by the XPath.}
\item{If it is used as a sub-element of the \hyperref[class:changeXml]{changeXML} element, then the XML it contains is to \emph{replace} the XML element addressed by the XPath.}
\end{enumerate}
%
Examples are given in the relevant change class definitions.



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/newXmlClass.tex}

% BEGIN \input{sources/addXmlClass.tex}
% ChangeAttribute Class
  \subsubsection{\element{AddXML}}
\label{class:addXml}
The \concept{AddXML} class specifies a snippet of XML that is to be added as a child of the element selected by the XPath expression in the \hyperref[sec:target]{target} attribute (\fig{addXMLClass}).
The new piece of XML code is provided by the \hyperref[sec:newXml]{NewXML} class.
%
\sedfig[width=0.85\textwidth]{images/addXMLClass}{The SED-ML \code{AddXML} class}{fig:addXMLClass}
%

\tabtext{addXml}{addXml}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
target & \refpage{sec:target}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
newXML & \refpage{sec:newXml}\\
\hline
\end{tabular}
\caption{\tabcap{addXML}}
\label{tab:addXml}
\end{table}
%

An example for a change that adds an additional parameter to a model is given in \lst{addXML}.
%
\begin{myXmlLst}{The \code{addXML} element with its \code{newXML} sub-element}{lst:addXML}
<model language="urn:sedml:language:sbml" [..]>
 <listOfChanges>
  <addXML target="/sbml:sbml/sbml:model/sbml:listOfParameters" >
   <newXML>
     <parameter metaid="metaid_0000010" id="V_mT" value="0.7" />
  </newXML>
  </addXML>
 </listOfChanges>
</model>
\end{myXmlLst}
%

The code of the model is changed so that a parameter with ID \code{V\_mT} is added to its list of parameters. The \code{newXML} element adds an additional XML element to the original model. The element's name is \code{parameter} and it is added to the existing parent element \code{listOfParameters} that is addressed by the XPath expression in the \code{target} attribute.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/addXmlClass.tex}

% BEGIN \input{sources/changeXmlClass.tex}
% ChangeAttribute Class
  \subsubsection{\element{ChangeXML}}
\label{class:changeXml}
The \concept{ChangeXML} class allows you to replace any XML element(s) in the model that can be addressed by a valid XPath expression (\fig{changeXml}).
%
\sedfig[width=0.75\textwidth]{images/changeXmlClass}{The \code{ChangeXML} class}{fig:changeXml}
%
The XPath expression is specified in the required \hyperref[sec:target]{target} attribute (Section~\ref{sec:target} on \refpage{sec:target}).
The replacement XML content is specified in the \hyperref[sec:newXml]{NewXML} class.

\tabtext{changeXml}{changeXml}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
target & \refpage{sec:target}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
newXML & \refpage{sec:newXml}\\
\hline
\end{tabular}
\caption{\tabcap{changeXML}}
\label{tab:changeXml}
\end{table}
%

An example for a change that adds an additional parameter to a model is given in \lst{changeXML}.
%
\begin{myXmlLst}{The \code{changeXML} element}{lst:changeXML}
<model [..]>
 <listOfChanges>
  <changeXML target="/sbml:sbml/sbml:model/sbml:listOfParameters/sbml:parameter[@id='V_mT']" >
   <newXML>
     <parameter metaid="metaid_0000010" id="V_mT_1" value="0.7" />
     <parameter metaid="metaid_0000050" id="V_mT_2" value="4.6"> />
   </newXML>
  </changeXML>
 </listOfChanges>
</model>
\end{myXmlLst}
%
The code of the model is changed in the way that its parameter with ID \code{V\_mT} is substituted by two other parameters \code{V\_mT\_1} and \code{V\_mT\_2}.
The \code{target} attribute defines that the parameter with ID \code{V\_mT} is to be changed. The \code{newXML} element then specifies the XML that is to be exchanged for that parameter.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/changeXmlClass.tex}

% BEGIN \input{sources/removeXmlClass.tex}
% ChangeAttribute Class
\subsubsection{\element{RemoveXML}}
\label{class:removeXml}
The \concept{RemoveXML} class can be used to delete XML elements or attributes in the model that are addressed by the XPath expression (\fig{removeXml}).
%
\sedfig[width=0.3\textwidth]{images/removeXmlClass}{The \code{RemoveXML} class}{fig:removeXml}
%

The XPath is specified in the required \hyperref[sec:target]{target} attribute.

\tabtext{removeXml}{removeXml}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
target & \refpage{sec:target}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{removeXML}}
\label{tab:removeXml}
\end{table}
%

An example for the removal of an XML element from a model is given in Listing~\ref{lst:removeXML}.
%
\begin{myXmlLst}{The \code{removeXML} element}{lst:removeXML}
<model [..]>
 <listOfChanges>
  <removeXML target="/sbml:sbml/sbml:model/sbml:listOfReactions/sbml:reaction[@id='J1']" />
 </listOfChanges>
</model>
\end{myXmlLst}
%

The code of the model is changed by deleting the reaction with ID \code{V\_mT} from the model's list of reactions.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/removeXmlClass.tex}

% BEGIN \input{sources/changeAttributeClass.tex}
% ChangeAttribute Class
  \subsubsection{\element{ChangeAttribute}}
\label{class:changeAttribute}
The \concept{ChangeAttribute} class allows to define updates on the XML attribute values of the corresponding model (\fig{changeAttribute}).
%
\sedfig[width=0.75\textwidth]{images/changeAttributeClass}{The \code{ChangeAttribute} class}{fig:changeAttribute}
%

The \concept{ChangeXML} class covers the possibilities provided by the \hyperref[class:changeAttribute]{ChangeAttribute} class. That is, everything that can be expressed by a \hyperref[class:changeAttribute]{ChangeAttribute} construct can also be expressed by a \concept{ChangeXML}. However, for the common case of changing an attribute value \concept{ChangeAttribute} is easier to use, and so it is recommended to use the \concept{ChangeAttribute} for any changes of an XML attribute's value, and to use the more general \hyperref[class:changeXml]{ChangeXML} for other cases.

\concept{ChangeAttribute} requires to specify the \hyperref[sec:target]{target} of the change, i.\,e.\ the location of the addressed XML attribute, and also the \hyperref[sec:newValue]{new value} of that attribute.
Note that the XPath expression in the \concept{target} attribute must select a single attribute within the corresponding model.


\tabtext{changeAttribute}{changeAttribute}
%
\begin{table}[h!]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
target & \refpage{sec:target}\\
newValue & \refpage{sec:newValue}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{ChangeAttribute}}
\label{tab:changeAttribute}
\end{table}
%


\paragraph{\element{newValue}}
\label{sec:newValue}
The mandatory \code{newValue} attribute assignes a new value to the targeted XML attribute.

The example in Listing~\ref{lst:changeAttribute} shows the update of the initial concentration of two parameters inside an SBML model.
%
\begin{myXmlLst}{The \code{changeAttribute} element and its \code{newValue} attribute}{lst:changeAttribute}
<model id="model1" name="Circadian Chaos" language="urn:sedml:language:sbml"
       source="urn:miriam:biomodels.db:BIOMD0000000021">
 <listOfChanges>
  <changeAttribute target="/sbml:sbml/sbml:model/sbml:listOfParameters/sbml:parameter[@id='V_mT']/@value" newValue="0.28"/>
  <changeAttribute target="/sbml:sbml/sbml:model/sbml:listOfParameters/sbml:parameter[@id='V_dT']/@value" newValue="4.8"/>
 </listOfChanges>
</model>
\end{myXmlLst}
%

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/changeAttributeClass.tex}

% BEGIN \input{sources/computeChangeClass.tex}
% ChangeAttribute Class
  \subsubsection{\element{ComputeChange}}
\label{class:computeChange}
The \concept{ComputeChange} class permits to change, prior to the experiment, the numerical value of any element or attribute of a model addressable by an XPath expression, based on a calculation (\fig{computeChange}).
%
\sedfig[width=0.85\textwidth]{images/computeChangeClass}{The \code{ComputeChange} class}{fig:computeChange}
%
The computed new value is described by a mathematical expression using a \hyperref[sec:mathML]{subset of MathML} (see section \ref{sec:mathML} on \refpage{sec:mathML}).
The computation can use the value of variables from any model defined in the simulation experiment.
Those \hyperref[class:variable]{variables} need to be defined, and can then be addressed by their ID.
A variable used in a \concept{ComputeChange} must carry a \hyperref[sec:modelReference]{modelReference} attribute (\refpage{sec:modelReference}) but no \hyperref[sec:taskReference]{taskReference} attribute (\refpage{sec:taskReference}).
To carry out the calculation it may be necessary to introduce additional parameters, that are not defined in any of the models used by the experiment.
This is done through the \hyperref[class:parameter]{parameter} class, and such parameters are thereafter refered to by their ID.
Finally, the change itself is specified using an instance of the \hyperref[sec:math]{Math} class.

Note that where a \concept{ComputeChange} refers to another model, that model is not allowed to be modified by \concept{ComputeChange}s which directly or indirectly refer to this model.
In other words, cycles in the definitions of computed changes are prohibited, since then the new values would not be well defined.


\tabtext{computeChange}{computeChange}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
target & \refpage{sec:target}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
listOfVariables$^{o}$ & \refpage{sec:listOfVariables}\\
listOfParameters$^{o}$ & \refpage{sec:listOfParameters}\\
math &\refpage{sec:math}\\
\hline
\end{tabular}
\caption{\tabcap{computeChange}}
\label{tab:computeChange}
\end{table}
%


\paragraph{\element{Math}}
\label{sec:math}

The \element{Math} element encodes mathematical functions.
If used as an element of the \concept{ComputeChange} class, it computes the change of the element or attribute addressed by the \hyperref[sec:target]{target} attribute.
\currentLV supports the subset of MathML 2.0 shown in section \ref{sec:mathML}.

\lsttext{computeChange}{computeChange}
%
\begin{myXmlLst}{The computeChange element}{lst:computeChange}
<model [..]>
    <computeChange target="/sbml:sbml/sbml:model/sbml:listOfParameters/sbml:parameter[@id='sensor']">
      <listOfVariables>
        <variable modelReference="model1" id="R" name="regulator"
                  target="/sbml:sbml/sbml:model/sbml:listOfSpecies/sbml:species[@id='regulator']" />
        <variable modelReference="model2" id="S" name="sensor"
                  target="/sbml:sbml/sbml:model/sbml:listOfParameters/sbml:parameter[@id='sensor']" />
      <listOfVariables/>
      <listOfParameters>
        <parameter id="n" name="cooperativity" value="2">
        <parameter id="K" name="sensitivity" value="1e-6">
      <listOfParameters/>
      <math  xmlns="http://www.w3.org/1998/Math/MathML">
        <apply>
          <times />
          <ci>S</ci>
          <apply>
            <divide />
            <apply>
              <power />
              <ci>R</ci>
              <ci>n</ci>
            </apply>
            <apply>
              <plus />
              <apply>
                <power />
                <ci>K</ci>
                <ci>n</ci>
              </apply>
              <apply>
                <power />
                <ci>R</ci>
                <ci>n</ci>
              </apply>
            </apply>
          </apply>
        </math>
    </computeChange>
  </listOfChanges>
</model>
\end{myXmlLst}
%

The example in \lst{computeChange} computes a change of the variable \code{sensor} of the model \code{model2}. To do so, it uses the value of the variable \code{regulator} coming from model \code{model1}. In addition, the calculation used two additional parameters, the cooperativity \code{n}, and the sensitivity \code{K}.
The mathematical expression in the mathML then computes the new initial value of \code{sensor} using the equation:

\begin{math}
S =  S \times \frac{R^{n}}{K^{n}+R^{n}}
\end{math}
.
%A problem arises, because the individual supported model exchange languages allow different subsets of MathML. Thus, when an instance of ComputeChange replaces a %mathematical expression of  an SBML reaction, only the MathML subset allowed by SBML should be used here.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/computeChangeClass.tex}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/changeClass.tex}


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% SIMULATIONS

% BEGIN \input{sources/simulationClass.tex}
% simulation class
 \subsection{\element{Simulation}}
\label{class:simulation}

A simulation is the execution of some defined algorithm(s).
Simulations are described differently depending on the type of simulation experiment to be performed (\fig{sedSimulation}).
%
\sedfig[width=0.85\textwidth]{images/simulationClass}{The SED-ML Simulation class}{fig:sedSimulation}
%
\concept{Simulation} is an abstract class and serves as the container for the different types of simulation experiments.
SED-ML \currentLV offers the predefined simulation classes \hyperref[class:uniformTimeCourse]{UniformTimeCourse}, \hyperref[class:oneStep]{OneStep} and \hyperref[class:steadyState]{SteadyState}.
Further simulation classes are planned for future versions of SED-ML, including simulation classes for bifurcation analysis.
Simulation algorithms used for the execution of a simulation setup are defined in the \hyperref[class:algorithm]{Algorithm} class.

\tabtext{simulation}{simulation}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
algorithm & \refpage{class:algorithm}\\
\hline
\end{tabular}
\caption{\tabcap{simulation}}
\label{tab:simulation}
\end{table}
%

\lsttext{simulation}{simulation}
%
\begin{myXmlLst}{The SED-ML \code{listOfSimulations} element, defining two different simulations}{lst:simulation}
<listOfSimulations>
  <uniformTimeCourse [..]>
    [SIMULATION SPECIFICATION]
  </uniformTimeCourse>
  <uniformTimeCourse [..]>
    [SIMULATION SPECIFICATION]
  </uniformTimeCourse>
</listOfSimulations>
\end{myXmlLst}
%
Two timecourses with uniform range are defined.
%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/simulationClass.tex}

% BEGIN \input{sources/algorithmClass.tex}
% algorithm class
 \subsubsection{\element{Algorithm}}
\label{class:algorithm}

SED-ML makes use of the \hyperref[sec:kisao]{KiSAO ontology} (Section~\ref{sec:kisao} on \refpage{sec:kisao}) to refer to a term in the controlled vocabulary identifying the particular simulation algorithm to be used in the simulation.

Each instance of the \hyperref[class:simulation]{Simulation} class must contain one reference to a simulation algorithm (\fig{algorithm}).
%
\sedfig[width=0.35\textwidth]{images/algorithm}{The \code{Algorithm} class}{fig:algorithm}
%

Each instance of the \concept{Algorithm} class must contain a \hyperref[sec:kisao]{KiSAO} reference to a simulation algorithm. The reference should define the  simulation algorithm to be used in the simulation as precisely as possible, and should be defined in the correct syntax, as defined by the regular expression \code{KISAO:[0-9]\{7\}}.

The \concept{Algorithm} class contains an optional list of parameters (\hyperref[class:algorithmParameter]{algorithmParameter}) that are used to parameterize the particular algorithm used in the simulation.

\tabtext{algorithm}{Algorithm}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{attribute} & \textbf{description}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
kisaoID & \refpage{sec:kisao}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
algorithmParameter$^{o}$ & \refpage{class:algorithmParameter}\\
\hline
\end{tabular}
\caption{\tabcap{algorithm}}
\label{tab:algorithm}
\end{table}
%

The example given in code snippet in Listing~\ref{lst:simulation}, completed by algorithm definitions results in the code given in Listing \ref{lst:algorithm}.
%
\begin{myXmlLst}{The SED-ML \code{algorithm} element for two different time course simulations, defining two different algorithms. KISAO:0000030 refers to the \emph{Euler forward method} ; KISAO:0000021 refers to the \emph{StochSim nearest neighbor algorithm}.}{lst:algorithm}
<listOfSimulations>
 <uniformTimeCourse id="s1" name="time course simulation over 100 minutes" [..]>
  <algorithm kisaoID="KISAO:0000030" />
 </uniformTimeCourse>
 <uniformTimeCourse id="s2" name="time course definition for concentration of p" [..]>
  <algorithm kisaoID="KISAO:0000021" />
 </uniformTimeCourse>
</listOfSimulations>
\end{myXmlLst}
%
For both simulations, one algorithm is defined. In the first simulation \code{s1} a deterministic approach has been chosen (Euler forward method), in the second simulation \code{s2} a stochastic approach is used (Stochsim nearest neighbor).

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/algorithmClass.tex}

% BEGIN \input{sources/algorithmParameterClass.tex}
% algorithmParameter class
 \subsubsection{\element{AlgorithmParameter}}
\label{class:algorithmParameter}

The \concept{AlgorithmParameter} class allows to parameterize a particular simulation algorithm. The set of possible parameters for a particular instance is determined by the algorithm that is referenced by the \concept{kisaoID} of the enclosing \hyperref[class:algorithm]{algorithm} element. Parameters of simulation algorithms are unambiguously referenced by the mandatory \concept{kisaoID} attribute. Their value is set in the mandatory \concept{value} attribute.

\begin{myXmlLst}{The SED-ML \code{algorithmParameter} element setting the parameter value for the simulation algorithm. KISAO:0000032 refers to the \emph{explicit fourth-order Runge-Kutta method}; KISAO:00000211 refers to the \emph{absolute tolerance}.}{lst:algorithmParameter}
<algorithm kisaoID="KISAO:0000032">
  <listOfAlgorithmParameters>
    <algorithmParameter kisaoID="KISAO:0000211" value="23"/>
  </listOfAlgorithmParameters>
</algorithm>
\end{myXmlLst}

%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/algorithmParameterClass.tex}

% BEGIN \input{sources/timeCourseSimulationClass.tex}
\subsubsection{\element{UniformTimeCourse}}
\label{class:uniformTimeCourse}
%
\sedfig[width=0.75\textwidth]{images/timecourseSimulation}{The \code{UniformTimeCourse} class}{fig:timecourseSimulation}
%


\tabtext{uniformTimeCourse}{uniformTimeCourse}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{attribute} & \textbf{description}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
initialTime & \refpage{sec:initialTime}\\
outputStartTime & \refpage{sec:outputStartTime}\\
outputEndTime & \refpage{sec:outputEndTime}\\
numberOfPoints & \refpage{sec:numberOfPoints}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
algorithm & \refpage{class:algorithm}\\
\hline
\end{tabular}
\caption{\tabcap{uniformTimeCourse}}
\label{tab:uniformTimeCourse}
\end{table}
%

\lsttext{timecourse}{uniformTimeCourse}

%
\begin{myXmlLst}{The SED-ML \code{uniformTimeCourse} element, defining a uniform time course simulation over 2500 time units with 1000 simulation points.}{lst:timecourse}
<listOfSimulations>
 <uniformTimeCourse id="s1"  name="time course simulation of variable v1 over 100 minutes"
  initialTime="0" outputStartTime="0" outputEndTime="2500" numberOfPoints="1000">
  <algorithm [..] />
 </uniformTimeCourse>
</listOfSimulations>
\end{myXmlLst}

\paragraph{\element{initialTime}}
\label{sec:initialTime}

The attribute \element{initialTime} of type \code{double} represents the time from which to start the simulation. Usually this will be \code{0}. Listing~\ref{lst:timecourse} shows an example.

\paragraph{\element{outputStartTime}}

\label{sec:outputStartTime}

Sometimes a researcher is not interested in simulation results at the start of the simulation (i.e. the initial time). To accommodate this in SED-ML the \element{uniformTimeCourse} class uses the  attribute \element{outputStartTime} of type \code{double}. To be valid the \element{outputStartTime} cannot be before \element{initialTime}.  For an example, see Listing~\ref{lst:timecourse}.

\paragraph{\element{outputEndTime}}
\label{sec:outputEndTime}

The attribute \element{outputEndTime} of type \code{double} marks the end time of the simulation. See Listing~\ref{lst:timecourse} for an example.

\paragraph{\element{numberOfPoints}}
\label{sec:numberOfPoints}

When executed, the \element{uniformTimeCourse} simulation produces output on a regular grid starting with \element{outputStartTime} and ending with \element{outputEndTime}. The attribute  \element{numberOfPoints} of type \code{integer} describes the number of points expected in the result. Software interpreting the \element{uniformTimeCourse} is expected to produce a first outputPoint at time \element{outputStartTime} and then \element{numberOfPoints} output points with the results of the simulation. Thus a total of \code{numberOfPoints + 1} output points will be produced.

Just because the output points lie on the regular grid described above, this does not mean that the simulation algorithm has to work with the same step size. Usually the step size the simulator chooses will be adaptive and much smaller than the required output step size. On the other hand a stochastic simulator might not have any new events occurring between two grid points. Nevertheless the simulator has to produce data on this regular grid. For an example, see Listing~\ref{lst:timecourse}.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/timeCourseSimulationClass.tex}

% BEGIN \input{sources/oneStepSimulationClass.tex}
\subsubsection{\element{OneStep}}
\label{class:oneStep}
%
\sedfig[width=0.3\textwidth]{images/oneStep}{The \code{OneStep} class}{fig:oneStepSimulation}
%

The SED-ML \code{oneStep} calculates one further output step for the model from its current state. Note that this does NOT necessarily equate to one integration step. The simulator is allowed to take as many steps as needed. However, after running oneStep, the desired output time is reached.

\tabtext{oneStep}{oneStep}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{attribute} & \textbf{description}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
step & \refpage{sec:step}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
algorithm & \refpage{class:algorithm}\\
\hline
\end{tabular}
\caption{\tabcap{oneStep}}
\label{tab:oneStep}
\end{table}
%

\lsttext{oneStep}{oneStep}

%
\begin{myXmlLst}{The SED-ML \code{oneStep} element, specifying to apply the simulation algorithm for another output step of size 0.1.}{lst:oneStep}
<listOfSimulations>
  <oneStep id="s1" step="0.1">
    <algorithm kisaoID="KISAO:0000019" />
  </oneStep>
</listOfSimulations>

\end{myXmlLst}

\paragraph{\element{step}}
\label{sec:step}
The \element{oneStep} class has one required attribute \element{step} of type \code{double}.
It defines the next output point that should be reached by the algorithm, by specifying the increment from the current output point.
Listing~\ref{lst:oneStep} shows an example.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/oneStepSimulationClass.tex}

% BEGIN \input{sources/steadyStateSimulationClass.tex}
\subsubsection{\element{SteadyState}}
\label{class:steadyState}

The \element{SteadyState} class represents a steady state computation (as for example implemented by NLEQ or Kinsolve).

%
\sedfig[width=0.3\textwidth]{images/steadyState}{The \code{SteadyState} class}{fig:steadyStateSimulation}
%

\tabtext{steadyState}{steadyState}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{attribute} & \textbf{description}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
algorithm & \refpage{class:algorithm}\\
\hline
\end{tabular}
\caption{\tabcap{steadyState}}
\label{tab:steadyState}
\end{table}
%

\lsttext{steadyState}{steadyState}

%
\begin{myXmlLst}{The SED-ML \code{steadyState} element, defining a steady state simulation with id \code{steady}.}{lst:steadyState}
<listOfSimulations>
  <steadyState id="steady">
    <algorithm kisaoID="KISAO:0000282" />
  </steadyState >
</listOfSimulations>
\end{myXmlLst}


%\subsubsection{The AnySimulation Class \alert{obsolete}}
%\input{sources/anySimulationClass.tex}

%\subsubsection{Range Class (\alert{prob not part of L1V1})}
%\input{sources/rangeClass.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% TASKS

% BEGIN \input{sources/abstractTaskClass.tex}
\subsection{\element{Abstract Task}}
\label{class:abstractTask}

An abstract task in SED-ML represents the base class for all SED-ML tasks. It is not meant to be instantiated directly.
%
\sedfig[width=0.80\textwidth]{images/abstractTask}{The SED-ML Abstract Task class}{fig:abstractTask}
%

\tabtext{abstractTask}{abstractTask}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{abstractTask}}
\label{tab:abstractTask}
\end{table}
%

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End: % END \input{sources/abstractTaskClass.tex}
% BEGIN \input{sources/taskClass.tex}
\subsection{\element{Task}}
\label{class:task}

A task in SED-ML links a \hyperref[class:model]{model} to a certain \hyperref[class:simulation]{simulation} description via their respective identifiers (\fig{sedTask}), using the \hyperref[sec:modelReference]{modelReference} and the \hyperref[sec:simulationReference]{simulationReference}. The task class receives the id and name attributes from the \hyperref[class:abstractTask]{AbstractTask}.
%
\sedfig[width=0.75\textwidth]{images/taskClass}{The SED-ML Task class}{fig:sedTask}
%
In SED-ML \currentLV it is only possible to link one simulation description to one model at a time.
However, one can define as many tasks as needed within one experiment description.
Please note that the tasks may be executed in any order, as determined by the implementation.

\tabtext{task}{task}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
modelReference & \refpage{sec:modelReference}\\
simulationReference & \refpage{sec:simulationReference}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{task}}
\label{tab:task}
\end{table}
%

\lsttext{task}{task}

%
\begin{myXmlLst}{The \code{task} element}{lst:task}
<listOfTasks>
  <task id="t1" name="task definition" modelReference="model1"
        simulationReference="simulation 1" />
  <task id="t2" name="another task definition" modelReference="model2"
        simulationReference="simulation 1" />
</listOfTasks>
\end{myXmlLst}
%
In the example, a simulation setting \emph{simulation1} is applied first to \emph{model1} and then is applied to \emph{model2}.

\subsubsection{Other Tasks}

There are a range of other tasks that can be specified. These are generally related to model specific properties. Figure~\ref{fig:abstractTask} lists the current set of such tasks. 

{\bf CalculateJacobian} The {\tt CalculateJacobian} task is used to compute the Jacobian matrix at the current state of the model. The matrix will be $m$ by $m$ where $m$ is the number state variables in the model. For those models where there are dependencies among the state variables (eg in reaction network models) it is also possible to specify the calculation of a reduced Jacobian matrix. The attribute {\tt reduced} is Boolean value than can specify a reduced of full matrix. 

{\bf CalculateStoichiometryMatrix} The {\tt CalculateStoichiometryMatrix} task is used to retrieve the stoichiometry matrix from the current model. This calculation is only applicable for reaction network models. The Boolean attribute {\tt reduced} can be used to specify either a reduced or full stoichiometry matrix. 

{\bf CalculateEigenvalues} The {\tt CalculateEigenvalues} task is used to compute the eigenvalues for a model at the last computed state of the model. The task generates two vectors, one vector contains the real numbers and the other the imaginary numbers. 

{\bf CalculateEigenvectors} The {\tt CalculateEigenvalues} task is used to compute the eigenvectors for a model at the last computed state of the model. The task generates a matrix where the columns are the corresponding eigenvectors. 

{\bf CalculateLocalSensitivities} The {\tt CalculateLocalSensitivities} is used to specify sensitivity of a model variable with respect to a parameter. 
%
$$ \frac{dx}{dp} $$
%
where $x$ is a model variable and $p$ a model parameter. For reaction network models, the variable can be a species concentration, reaction flux, or other output of the model. The parameter can be a rate constant or boundary species or other value that the model is dependent upon.

The Boolean attribute {\tt scaled} can be used to compute scaled sensitivities as defined below:
%
$$ \frac{dx}{dp} \frac{x}{p} $$
%
In metabolic control analysis the scaled sensitivities are called the control coefficients and in biochemical systems theory, the logarithmic gains. 

The Boolean attribute {\tt all} can be used to specify that all sensitivities should be computed. In this case the parameter independent sensitivities are computed (See ref). 

{\bf CalculateMoietyConservationLaws} The {\tt CalculateMoietyConservationLaws} can be used to obtain the moiety concervation laws for a model. This is applicable to reaction network based models where it is possible for a linear combination of species amounts to be fixed throughout a simulation.

The task will return a matrix where each row corresponds to a conservation law. The columns will corresponds to the floating species in the model and indicate the amount of each species in a given conservation law. The last column will include the total amount represented by the conservation law. 

For example the model {\tt S1 -> S2; S2 -> S1} has a single conservation laws $S1 + S2$, this would be represented using the matrix:

$$
\left[
\begin{array}{ll}
1 & 1 \\
\end{array}
\right]
$$

% BEGIN \input{sources/repeatedTaskClass.tex}
\subsection{\element{Repeated Task}}
\label{class:repeatedTask}

The \concept{repeatedTask} class provides a generic looping construct, allowing complex tasks to be represented by composing separate steps. It performs a specified task (or sequence of tasks) multiple times (where the exact number is specified through a \hyperref[sec:ranges]{range} construct), while allowing specific quantities in the model to be altered at each iteration (as defined in the \hyperref[sec:changes]{listOfChanges}).

The \concept{RepeatedTask} inherits from \concept{AbstractTask}.
Additionally it has two required attributes \hyperref[sec:rangeAttribute]{range} and \hyperref[sec:resetModel]{resetModel} as well as child elements \hyperref[sec:ranges]{listOfRanges}, \hyperref[sec:changes]{listOfChanges} and \hyperref[class:subTask]{listOfSubTasks}.
Of these only \hyperref[sec:changes]{listOfChanges} is optional.

Note that the order of activities within each iteration of a \concept{repeatedTask} is as follows.
Firstly the model is reset, if specified by the \element{resetModel} attribute.
Secondly any changes to the model specified by \element{setValue} elements are made.
Finally, the \element{subTasks} are executed once each in order.

%
\sedfig[width=.90\textwidth]{images/repeatedTaskClass}{The SED-ML RepeatedTask class}{fig:sedRptTask}
%

% TODO: Add tables (and individual UML) for the various child elements?

\tabtext{repeatedTask}{repeatedTask}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
range & \refpage{sec:rangeAttribute}\\
resetModel & \refpage{sec:resetModel}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
range & \refpage{sec:ranges}\\
change$^{o}$ & \refpage{sec:changes}\\
subTask$^{o}$ & \refpage{class:subTask}\\
\hline
\hline
\end{tabular}
\caption{\tabcap{repeatedTask}}
\label{tab:repeatedTask}
\end{table}
%

\lsttext{repeatedTask}{repeatedTask}

%
\begin{myXmlLst}{The \code{repeatedTask} element}{lst:repeatedTask}
<task id="task1" modelReference="model1" simulationReference="simulation1" />

<repeatedTask id="task3" resetModel="false" range="current"
    xmlns:s='http://www.sbml.org/sbml/level3/version1/core'>
  <listOfRanges>
    <vectorRange id="current">
        <value> 1 </value>
        <value> 4 </value>
        <value> 10 </value>
    </vectorRange>
  </listOfRanges>
  <listOfChanges>
     <setValue target="/s:sbml/s:model/s:listOfParameters/s:parameter[@id='w']" modelReference="model1">
       <listOfVariables>
         <variable id="val" name="current range value" target="#current" />
       </listOfVariables>
       <math xmlns="http://www.w3.org/1998/Math/MathML">
         <ci> val </ci>
       </math>
     </setValue>
  </listOfChanges>
  <listOfSubTasks>
    <subTask task="task1" />
  </listOfSubTasks>
</repeatedTask>
\end{myXmlLst}
%
In the example, \code{task1} is repeated three times, each time with a different value for a model parameter \code{w}.


\subsubsection{The \element{range} attribute}
\label{sec:rangeAttribute}
The \element{repeatedTask} class has a required attribute \element{range} of type \code{SId}.
It specifies which \hyperref[sec:ranges]{range} defined in the \element{listOfRanges} this repeated task iterates over.
Listing~\ref{lst:repeatedTask} shows an example of a \element{repeatedTask} iterating over a single range comprising the values: \code{1}, \code{4} and \code{10}.
If there are multiple ranges in the \element{listOfRanges}, then only the \concept{master range} identified by this attribute determines how many iterations there will be in the \element{repeatedTask}.
All other ranges must allow for at least as many iterations as the master range, and will be moved through in lock-step; their values can be used in \hyperref[class:setValue]{setValue} constructs.


\subsubsection{The \element{resetModel} attribute}
\label{sec:resetModel}
The \element{repeatedTask} class has a required attribute \element{resetModel} of type \code{boolean}. It specifies whether the model should be reset to the initial state before processing an iteration of the defined \hyperref[class:subTask]{subTasks}. Here initial state refers to the state of the model as given in the \element{listOfModels}.  In the example in  Listing~\ref{lst:repeatedTask} the repeated task is not to be reset, so a change is made, \code{task1} is carried out, another change is made, then \code{task1} continues from there, another change is applied, and \code{task1} is carried out a last time.


\subsubsection{The \element{listOfRanges}}
\label{sec:ranges}
Ranges represent the iterative element of the nested simulation experiment that provides the collection of values to iterate over. In order to be able to refer to the current value of a range element, an \code{id} attribute is added. When the value of the \code{id} attribute is used in a \element{listOfVariables} within the repeated task class its value is to be replaced with the current value of the range.

There are three different range types permitted in the \element{listOfRanges}: \hyperref[class:uniformRange]{UniformRange}, \hyperref[class:vectorRange]{VectorRange} and \hyperref[class:functionalRange]{FunctionalRange}.
They each inherit from an abstract \hyperref[class:range]{Range} class.

\paragraph{\element{Range}}
\label{class:range}

The \concept{Range} class is abstract and exists solely as the base class for the different types of range.
Therefore, a SED-ML document will only contain the derived classes listed below.

\paragraph{\element{UniformRange}}
\label{class:uniformRange}
%
\sedfig[width=.3\textwidth]{images/uniformRange}{The SED-ML UniformRange class}{fig:sedUniformRange}
%
The \element{UniformRange} is quite similar to what is used in the \hyperref[class:uniformTimeCourse]{UniformTimeCourse} simulation class.
This range is defined through four mandatory attributes: \code{start}, the start value; \code{end}, the end value and \code{numberOfPoints} that contains the number of points the range contains.
A fourth attribute \code{type} that can take the values \code{linear} or \code{log} determines whether to draw the values logarithmically (with a base of $10$) or linearly.

For example:
\begin{myXmlLst}{The \code{UniformRange} element}{lst:uniformRange}
    <uniformRange id="current" start="0.0" end="10.0" numberOfPoints="100" type="linear" />
\end{myXmlLst}
As for \hyperref[class:uniformTimeCourse]{UniformTimeCourse}, this range will actually produce 101 values uniformly spaced on the interval $[0, 10]$, in ascending order.

The following logarithmic example generates the three values \code{1}, \code{10} and \code{100}.
\begin{myXmlLst}{The \code{UniformRange} element with a logarithmic range.}{lst:uniformRangeLog}
    <uniformRange id="current" start="1.0" end="100.0" numberOfPoints="2" type="log" />
\end{myXmlLst}

\paragraph{\element{VectorRange}}
\label{class:vectorRange}
%
\sedfig[width=.3\textwidth]{images/vectorRangeClass}{The SED-ML VectorRangeClass class}{fig:sedVectorRangeClass}
%
A \element{VectorRange} describes an ordered collection of real values, listing them explicitly within child \element{value} elements.
For example, the range below iterates over the values $1$, $4$ and $10$ in that order.
\begin{myXmlLst}{The \code{VectorRange} element}{lst:vectorRange}
    <vectorRange id="current">
        <value> 1 </value>
        <value> 4 </value>
        <value> 10 </value>
    </vectorRange>
\end{myXmlLst}

\paragraph{\element{FunctionalRange}}
\label{class:functionalRange}
%
\sedfig[width=.9\textwidth]{images/functionalRangeClass}{The SED-ML FunctionalRange class}{fig:sedFunctionalRangeClass}
%
A \element{FunctionalRange} constructs a range through calculations that determine the next value based on the value(s) of other range(s) or model variables.
In this it is quite similar to the \hyperref[class:computeChange]{ComputeChange} element, and shares some of the same child elements.
It consists of an optional attribute \code{range}, two optional elements \hyperref[sec:listOfVariables]{listOfVariables} and \hyperref[sec:listOfParameters]{listOfParameters}, and a required element \element{math}.

The optional attribute \code{range} may be used as a shorthand to specify the \code{id} of another \concept{Range}.
The current value of the referenced range may then be used within the function defining this \concept{FunctionalRange}, just as if that range had been referenced using a \hyperref[class:variable]{variable} element, except that the \code{id} of the range is used directly.
In other words, whenever the expression contains a \code{ci} element that contains the value specified in the \code{range} attribute, the value of the referenced range is to be inserted.

In the \element{listOfVariables}, \hyperref[class:variable]{variable} elements define identifiers refering to model variables or range values, which may then be used within the \element{math} expression.
These references always retrieve the \concept{current value} of the model variable or range at the current iteration of the enclosing \element{repeatedTask}.
For a model not being simulated by any \element{subTask}, the initial state of the model is used.

The \element{function} encompasses the mathematical expression that is used to compute the value for the functional range at each iteration of the enclosing \element{repeatedTask}.

For example:

\begin{myXmlLst}{An example of a \code{functionalRange} where a parameter \code{w} of model \code{model2} is multiplied by \code{index} each time it is called.}{lst:functionalRange}
  <functionalRange id="current" range="index"
      xmlns:s='http://www.sbml.org/sbml/level3/version1/core'>
    <listOfVariables>
      <variable id="w" name="current parameter value" modelReference="model2"
          target="/s:sbml/s:model/s:listOfParameters/s:parameter[@id='w']" />
    </listOfVariables>
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply>
        <times/>
        <ci> w </ci>
        <ci> index </ci>
      </apply>
    </math>
  </functionalRange>
\end{myXmlLst}

Here is another example, this time using the values in a piecewise expression:

\begin{myXmlLst}{A \code{functionalRange} element that returns \code{8} if \code{index} is smaller than \code{1}, \code{0.1} if \code{index} is between \code{4} and \code{6}, and \code{8} otherwise.}{lst:functionalRange2}
        <uniformRange id="index" start="0" end="10" numberOfPoints="100" />
        <functionalRange id="current" range="index">
          <math xmlns="http://www.w3.org/1998/Math/MathML">
            <piecewise>
              <piece>
                <cn> 8 </cn>
                <apply>
                  <lt />
                  <ci> index </ci>
                  <cn> 1 </cn>
                </apply>
              </piece>
              <piece>
                <cn> 0.1 </cn>
                <apply>
                  <and />
                  <apply>
                    <geq />
                    <ci> index </ci>
                    <cn> 4 </cn>
                  </apply>
                  <apply>
                    <lt />
                    <ci> index </ci>
                    <cn> 6 </cn>
                  </apply>
                </apply>
              </piece>
              <otherwise>
                <cn> 8 </cn>
              </otherwise>
            </piecewise>
          </math>
        </functionalRange>
\end{myXmlLst}



\subsubsection{The \element{listOfChanges}}
\label{sec:changes}
\label{class:setValue}

The \element{listOfChanges} element, when present, contains one or more \element{setValue} elements.
These elements allow the modification of values in the model prior to the next execution of the \concept{subTasks}.

A \element{setValue} element inherits from the \hyperref[class:computeChange]{computeChange} class, which allows it to compute arbitrary expressions involving a number of variables and parameters.
The element \element{setValue} adds a mandatory \code{modelReference} attribute, and two optional attributes \code{range} and \code{symbol}.

The value to be changed is identified via the combination of the attributes \code{modelReference} and either \code{symbol} or \code{target}, in order to select an implicit or explicit variable within the referenced model.

As in \hyperref[class:functionalRange]{functionalRange}, the atribute \code{range} may be used as a shorthand for refering to the range whose values will be used to compute a value for the specified model element.

The child \element{math} contains the expression computing the value by refering to optional parameters, variables or ranges.
Again as for \hyperref[class:functionalRange]{functionalRange}, variable references always retrieve the \concept{current value} of the model variable or range at the current iteration of the enclosing \element{repeatedTask}.
For a model not being simulated by any \element{subTask}, the initial state of the model is used.

\begin{myXmlLst}{A \code{setValue} element setting \code{w} to the values of the range with id \code{current}.}{lst:setValue}
  <listOfChanges>
    <setValue target="/s:sbml/s:model/s:listOfParameters/s:parameter[@id='w']"
              range="current" modelReference="model1">
      <math xmlns="http://www.w3.org/1998/Math/MathML">
        <ci> current </ci>
      </math>
    </setValue>
  </listOfChanges>
\end{myXmlLst}


\subsubsection{The \element{listOfSubTasks}}
\label{class:subTask}

The \element{listOfSubTasks} contains one or more \element{subTask} elements that specify what simulations are to be performed by the \element{RepeatedTask}.
All \element{subTask}s have to be carried out sequentially, each continuing from the current model state (i.e.\ as at the end of the previous \code{subTask}, assuming it simulates the same model), and with their results concatenated (thus appearing identical to a single complex simulation).
The \code{subTask} itself has one required attribute \code{task} that references the \code{id} of another task defined in the \code{listOfTasks}.
The order in which to run multiple \code{subTask}s should be specified using \code{order} attributes on the \code{subTask} elements; if these are omitted the ordering is given by the order of the subTask elements.
In order to establish that one \code{subTask} should be carried out before another its \code{order} attribute has to have a lower number (c.f.\ Listing~\ref{lst:subTask}).

\begin{myXmlLst}{The \code{subTask} element. In this example the task \code{task2} has to be carried out before \code{task1}.}{lst:subTask}
  <listOfSubTasks>
    <subTask task="task1" order="2"/>
    <subTask task="task2" order="1"/>
  </listOfSubTasks>
\end{myXmlLst}




%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End: % END \input{sources/repeatedTaskClass.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% DATA GENERATORS
% BEGIN \input{sources/dataGeneratorClass.tex}
\subsection{\element{DataGenerator}}
\label{class:dataGenerator}

The \concept{DataGenerator} class prepares the raw simulation results for later output (\fig{sedDG}). It encodes the post-processing  to be applied to the simulation data. The post-processing steps could be anything, from simple normalisations of data to mathematical calculations.
%
\sedfig[width=0.3\textwidth]{images/dataGeneratorClass}{The SED-ML DataGenerator class}{fig:sedDG}
%
Each instance of the \concept{DataGenerator} class is identifiable within the experiment by its unambiguous \concept{id}. It can be further characterised by an optional \concept{name}. The related \hyperref[sec:math]{Math} class contains a mathML expression for the calculation of the data generator. Mathematical functions available for the specification of data generators are given in Section~\ref{sec:mathML} on \refpage{sec:mathML}. \hyperref[class:variable]{Variable} and \hyperref[class:parameter]{Parameter} instances can be used to encode the mathematical expression.

\tabtext{dataGenerator}{dataGenerator}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
%listOfVariables$^{o}$ & \refpage{sec:listOfVariables}\\
%listOfParameters$^{o}$ & \refpage{sec:listOfParameters}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
math & \refpage{sec:math}\\
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
variable$^{o}$ & \refpage{class:variable}\\
parameter$^{o}$ & \refpage{class:parameter}\\
\hline
\end{tabular}
\caption{\tabcap{dataGenerator}}
\label{tab:dataGenerator}
\end{table}
%

\lsttext{dataGenerator}{dataGenerator}
%
\begin{myXmlLst}{Definition of two \code{dataGenerator} elements, \emph{time} and \emph{LaCI repressor}}{lst:dataGenerator}
<listOfDataGenerators>
 <dataGenerator id="d1" name="time">
  <listOfVariables>
   <variable id="time" taskReference="task1" symbol="urn:sedml:symbol:time" />
  </listOfVariables >
  <listOfParameters />
  <math xmlns="http://www.w3.org/1998/Math/MathML">
   <ci> time </ci>
  </math>
 </dataGenerator>
 <dataGenerator id="d2" name="LaCI repressor">
  <listOfVariables>
   <variable id="v1" taskReference="task1"
    target="/sbml:sbml/sbml:model/sbml:listOfSpecies/
            sbml:species[@id='PX']" />
  </listOfVariables>
  <math:math>
   <math:ci>v1</math:ci>
  </math:math>
 </dataGenerator>
</listOfDataGenerators>
\end{myXmlLst}
%
The \code{listOfDataGenerator} contains two \code{dataGenerator} elements.
The first one, \code{d1}, refers to the task definition \code{t1} (which itself refers to a particular model), and from the corresponding model it reuses the symbol \code{time}.
The second one, \code{d2}, references a particular species defined in the same model (and referred to via the \code{taskReference="t1"}). The model species with ID \code{PX} is reused for the data generator \code{d2} without further post-processing.

%% Change in schema: The math attribute in the UML would become an attribuet in the XMLS -> maybe better to define a Math class (for consistent conversion and reuse of the Math class)

%% Comment: listOfVariables and listOfParameters should be global lists which are then referred to from inside the listOfDataGenerator/listOfChanges and so on -> propose a change in the XML schema

% BEGIN \input{sources/outputClass.tex}
% Output
\subsection{\element{Output}}
\label{class:output}

The \concept{Ouput} class describes how the results of a simulation should be presented to the user (\fig{sedOutput}).
%
\sedfig{images/outputClass}{The SED-ML Output class}{fig:sedOutput}
%
It does not contain the data itself, but the type of output and the \hyperref[class:dataGenerator]{data generators} used to produce a particular output.

The types of output pre-defined in SED-ML \currentLV are plots and \hyperref[class:report]{reports}. The output can be defined as a \hyperref[class:plot2D]{2D plot} or alternatively as a \hyperref[class:plot3D]{3D plot}.

Note that even though the terms ``2D plot" and ``3D plot" are used, the exact type of plot is not specified. In other words, whether the 3D plot represents a surface plot, or three dimensional lines in space, cannot be distinguished by SED-ML alone. It is expected that applications use \hyperref[class:annotation]{annotations} for this purpose.

\tabtext{output}{output}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{description}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
\hline
\textbf{sub-elements} & \textbf{description}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
plot2D$^{o}$ & \refpage{class:plot2D}\\
plot3D$^{o}$ & \refpage{class:plot3D}\\
report$^{o}$ & \refpage{class:report}\\
\hline
\end{tabular}
\caption{\tabcap{output}}
\label{tab:output}
\end{table}
%

\subsubsection{\element{Plot}}
\label{class:plot}

The {\tt plot} class contains a number of attributes that are common to descendant plots. These include the relative dimensions of the plot {\tt xRelativeDimension, yRelativeDimension}, the $x$ and $y$ axes limits {\tt xAxisMin, xAxisMax, yAxisMin} and {yAxisMax}, a Boolean attribute called {\tt legend} to indicate whether the legend should be displayed or not. Axes titles called {\tt xLabelname} and {\tt yLabelname} and finally two Boolean attributes to indicate if the $x$ or $y$ axes are drawn in a log scale or not, {\tt xLogAxis} and {\tt yLogAxis}.

\sedfig[width=0.75\textwidth]{images/plot}{The SED-ML Abstract Plot class}{fig:plot2D}

\subsubsection{Relative Dimension}

The attribute {\tt relativeDimension} indicates the relative size of the axis relative to all other axies defined for the plot. 

\subsubsection{Min and Max}

The {\tt min} and {\tt max} attributes in the {\tt Axis} class indicate the minimum and maximum values for the axis. 

% BEGIN \input{sources/2dPlotClass.tex}
\subsubsection{\element{Plot2D}}
\label{class:plot2D}

A \concept{2 dimensional plot} (\fig{plot2D}) contains a number of \hyperref[class:curve]{curve} definitions as well as information on

\sedfig[width=0.75\textwidth]{images/abstractCurve}{The SED-ML Abstract Plot class}{fig:plot2D}
%

\subsubsection{Axes Limits}

The attributes {\tt xAxisMin, xAxisMax, yAxisMin} and {\tt yAxisMax} are of type {\tt double} and indicate the limits on the $x$ anbd $y$ axes respectively. For example if {\tt xAxisMax = 5.0}, then the upper limit of values on the $x$ axis will be 5.0. 

\subsubsection{Legend}

The attribute {\tt Legend} is of type Boolean that indicates whether a legend is drawn or not. 

\subsubsection{Log Axes}

The attributes {\tt xLogAxis} and {\tt yLogAxis} are of type Boolean and define where the corresponding axis will be drawn with a log scale or not. 

\subsubsection{Axes Titles}

The attributes {\tt xLabelname} and {\tt yLabelname} define the labels that will be drawn next to each axis. It is usual that the $y$ axis label will be drawn vertically.  

%\tabtext{plot2D}{plot2D}
%
\lsttext{listOfCurves}{listOfCurves}
%
\begin{myXmlLst}{The \code{plot2D} element with the nested \code{listOfCurves} element}{lst:listOfCurves}
<plot2D>
 <listOfCurves>
  <curve>
    [CURVE DEFINITION]
  </curve>
  [FURTHER CURVE DEFINITIONS]
 </listOfCurves>
</plot2D>
\end{myXmlLst}
%
The listing shows the definition of a 2 dimensional plot containing one \hyperref[class:curve]{curve} element inside the \code{listOfCurves}. The curve definition follows in Section~\ref{class:curve} on \refpage{class:curve}.


% BEGIN \input{sources/3dPlotClass.tex}
\subsubsection{\element{Plot3D}}
\label{class:plot3D}
A \concept{3 dimensional plot} (\fig{plot3D}) contains a number of \hyperref[class:surface]{surface} definitions in addition to a number of new attributes that are specific to plotting in 3D. These include {\tt zAxisMin} and {\tt zAxisMax}, whether the $z$ axis is drawn using a log scale, the relative dimension of the $z$ axis in relation to the other two axes (see {\tt xRelativeDimension} and {\tt yRelativeDimension} in {\tt plot}) and {\tt zLabelName} which indicates the text used to add a description to the $z$ axis. 

% Fig: 3DPlot
\sedfig[width=0.75\textwidth]{images/abstractSurface}{The SED-ML Plot2D class}{fig:plot2D}

%\sedfig[width=0.75\textwidth]{images/plot3DClass}{The SED-ML %Plot3D class}{fig:plot3D}
%
\begin{myXmlLst}{The \code{plot3D} element with the nested \code{listOfSurfaces} element}{lst:plot3D}
<plot3D>
 <listOfSurfaces>
  <surface>
   [SURFACE DEFINITION]
  </surface>
  [FURTHER SURFACE DEFINITIONS]
 </listOfSurfaces>
</plot3D>
\end{myXmlLst}
%
The example defines a \hyperref[class:surface]{surface} for the 3 dimensional plot.
The surface definition follows in Section~\ref{class:surface} on \refpage{class:surface}.

\subsubsection[Report]{The Report class}
% BEGIN \input{sources/reportClass.tex}
\label{class:report}
The \concept{Report} class defines a data table consisting of several single instances of the \hyperref[class:dataSet]{DataSet} class (\fig{report}).
Its output returns the simulation result in actual \emph{numbers}. The particular columns of the report table are defined by creating an instance of the \hyperref[class:dataSet]{DataSet} class for each column.
%
\sedfig[width=0.75\textwidth]{images/report}{The SED-ML Report class}{fig:report}
%


\tabtext{report}{report}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
dataSet & \refpage{class:dataSet}\\
\hline
\end{tabular}
\caption{\tabcap{report}}
\label{tab:report}
\end{table}
%

\lsttext{listOfDataSets}{listOfDataSets}
%
\begin{myXmlLst}{The \code{report} element with the nested \code{listOfDataSets} element}{lst:listOfDataSets}
<report>
 <listOfDataSets>
  <dataSet>
   [DATA REFERENCE]
  </dataSet>
 </listOfDataSets>
</report>
\end{myXmlLst}
%

The simulation result itself, i.\,e. concrete result numbers, are not stored in SED-ML, but the directive how to \emph{calculate} them from the output of the simulator is provided through the \concept{dataGenerator}.

The encoding of simulation results is outside the scope of SED-ML, but other efforts exist, for example the \emph{Systems Biology Result Markup Language} (SBRML, \citep{DSM10}).

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/reportClass.tex}

%An example for a 2D plot and a report defined in one output is given in \lst{listOfOutputs}.
%
%\begin{myXmlLst}{The listOfOutput element}{lst:listOfOutputs}
%<listOfOutputs>
% <plot2D id="plot1" name="sample 2D plot">
%  <listOfCurves>
%   \alert{[..]}
%  </listOfCurves>
% </plot2D>
%</listOfOutputs>
%\end{myXmlLst}
%


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/outputClass.tex}

% BEGIN \input{sources/outputComponents.tex}
\subsection{Output components}

% BEGIN \input{sources/curveClass.tex}
\subsubsection{\element{Curve}}
\label{class:curve}
One or more instances of the \concept{Curve} class define a 2D plot.
A \concept{curve} needs a data generator reference to refer to the data that will be plotted on the x-axis, using the \concept{xDataReference}. A second data generator reference is needed to refer to the data that will be plotted on the y-axis, using the \concept{yDataReference}.
%
\sedfig[width=0.75\textwidth]{images/curveClass}{The SED-ML Curve class}{fig:curve}
%

\tabtext{curve}{curve}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
logX & \refpage{sec:logX}\\
xDataReference & \refpage{sec:xDataReference}\\
logY & \refpage{sec:logY}\\
yDataReference & \refpage{sec:yDataReference}\\
marker & \refpage{sec:marker} \\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{curve}}
\label{tab:curve}
\end{table}
%

\lsttext{curve}{curve}
%
\begin{myXmlLst}{The SED-ML \code{curve} element, defining the output curve showing the result of simulation for the referenced dataGenerators}{lst:curve}
<listOfCurves>
  <curve id="c1" name="v1 / time" xDataReference="dg1" yDataReference="dg2" logX="true" logY="false" />
</listOfCurves>
\end{myXmlLst}
Here, only one curve is created, results shown on the x-axis are generated by the data generator \code{dg1}, results shown on the y-axis are generated by the data generator \code{dg2}. Both \code{dg1} and \code{dg2} need to be already defined in the \hyperref[sec:listOfDataGenerators]{listOfDataGenerators}. The x-axis is plotted logarithmically.

\paragraph{\element{logX}}
\label{sec:logX}
\concept{logX} is a required attribute of the \hyperref[class:curve]{Curve} class and defines whether or not the data output on the x-axis is logarithmic. The data type of \concept{logX} is \code{boolean}.
To make the output on the x-axis of a plot logarithmic, \concept{logX} must be set to ``true'', as shown in the sample Listing~\ref{lst:curve}.

\concept{logX} is also used in the definition of a \hyperref[class:surface]{Surface} output.

\paragraph{\element{logY}}
\label{sec:logY}
\concept{logY} is a required attribute of the \hyperref[class:curve]{Curve} class and defines whether or not the data output on the y-axis is logarithmic. The data type of \concept{logY} is \code{boolean}.
To make the output on the y-axis of a plot logarithmic, \concept{logY} must be set to ``true'', as shown in the sample Listing~\ref{lst:curve}.

\concept{logY} is also used in the definition of a \hyperref[class:surface]{Surface} output.

\paragraph{\element{xDataReference}}
\label{sec:xDataReference}
The \concept{xDataReference} is a mandatory attribute of the \hyperref[class:curve]{Curve} object. Its content refers to a dataGenerator ID which denotes the \hyperref[class:dataGenerator]{DataGenerator} object that is used to generate the output on the x-axis of a \hyperref[class:curve]{Curve} in a \hyperref[class:plot2D]{2D Plot}.
The \concept{xDataReference} data type is \code{string}. However, the valid values for the \concept{xDataReference} are restricted to the IDs of already defined \hyperref[class:dataGenerator]{DataGenerator objects}.

An example for the definition of a curve is given in Listing~\ref{lst:curve}.
\concept{xDataReference} is also used in the definition of the x-axis of a \hyperref[class:surface]{Surface} in a \hyperref[class:plot3D]{3D Plot}.

\paragraph{\element{yDataReference}}
\label{sec:yDataReference}
The \concept{yDataReference} is a mandatory attribute of the \hyperref[class:curve]{Curve} object. Its content refers to a dataGenerator ID which denotes the \hyperref[class:dataGenerator]{DataGenerator} object that is used to generate the output on the y-axis of a \hyperref[class:curve]{Curve} in a \hyperref[class:plot2D]{2D Plot}.
The \concept{yDataReference} data type is \code{string}. However, the number of valid values for the \concept{yDataReference} is restricted to the IDs of already defined \hyperref[class:dataGenerator]{DataGenerator objects}.

An example for the definition of a curve is given in \lst{curve}.
\concept{yDataReference} is also used in the definition of the y-axis of a \hyperref[class:surface]{Surface} in a \hyperref[class:plot3D]{3D Plot}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/curveClass.tex}

% BEGIN \input{sources/surfaceClass.tex}
\subsubsection{\element{Surface}}
\label{class:surface}

A \concept{surface} is a three-dimensional figure representing a simulation result (\fig{surface}).
%
\sedfig[width=0.85\textwidth]{images/surfaceClass}{The SED-ML Surface class}{fig:surface}
%

Creating an instance of the \concept{Surface} class requires the definition of three different axes, that is which data to plot on which axis and in which way. The aforementioned \hyperref[sec:xDataReference]{xDataReference} and \hyperref[sec:yDataReference]{yDataReference} attributes define the according \hyperref[class:dataGenerator]{data generators} for both the x- and y-axis of a surface. In addition, the \hyperref[sec:zDataReference]{zDataReference} attribute defines the output for the z-axis. All axes might be logarithmic or not. This can be specified through the \hyperref[sec:logX]{logX}, \hyperref[sec:logY]{logY}, and the \hyperref[sec:logZ]{logZ} attributes in the according dataReference elements.

\tabtext{surface}{surface}
%
\begin{table}[ht]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
logX & \refpage{sec:logX}\\
xDataReference & \refpage{sec:xDataReference}\\
logY & \refpage{sec:logY}\\
yDataReference & \refpage{sec:yDataReference}\\
logZ & \refpage{sec:logZ}\\
zDataReference & \refpage{sec:zDataReference}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{surface}}
\label{tab:surface}
\end{table}
%
\lsttext{surface}{surface}
%
\begin{myXmlLst}{The SED-ML \code{surface} element, defining the output showing the result of the referenced task}{lst:surface}
<listOfSurfaces>
  <surface id="s1" name="surface" xDataReference="dg1" yDataReference="dg2" zDataReference="dg3"
   logX="true"  logY="false" logZ="false" />
  [FURTHER SURFACE DEFINITIONS]
</listOfSurfaces>
\end{myXmlLst}

Here, only one surface is created, results shown on the x-axis are generated by the data generator \code{dg1}, results shown on the y-axis are generated by the data generator \code{dg2}, and results shown on the z-axis are generated by the data generator \code{dg3}. All \code{dg1}, \code{dg2} and \code{dg3} need to be already defined in the \hyperref[sec:listOfDataGenerators]{listOfDataGenerators}.


\paragraph{\element{logZ}}
\label{sec:logZ}
\concept{logZ} is a required attribute of the \hyperref[class:surface]{Surface} class and defines whether or not the data output on the z-axis is logarithmic. The data type of \concept{logZ} is \code{boolean}.
To make the output on the z-axis of a surface plot logarithmic, \concept{logZ} must be set to ``true'', as shown in the sample Listing~\ref{lst:surface}.

\paragraph{\element{zDataReference}}
\label{sec:zDataReference}
The \concept{zDataReference} is a mandatory attribute of the \hyperref[class:surface]{Surface} object. Its content refers to a dataGenerator ID which denotes the \hyperref[class:dataGenerator]{DataGenerator} object that is used to generate the output on the z-axis of a \hyperref[class:plot3D]{3D Plot}.
The \concept{zDataReference} data type is \code{string}. However, the valid values for the \concept{zDataReference} are restricted to the IDs of already defined \hyperref[class:dataGenerator]{DataGenerator objects}.

An example using the \code{zDataReference} is given in Listing~\ref{lst:surface} on \refpage{lst:surface}.
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/surfaceClass.tex}

% BEGIN \input{sources/dataSetClass.tex}
\subsubsection{\element{DataSet}}
\label{class:dataSet}
The \concept{DataSet} class holds definitions of data to be used in the \hyperref[class:report]{Report} class (\fig{dataSet}).
%
\sedfig[width=0.75\textwidth]{images/dataSetClass}{The SED-ML DataSet class}{fig:dataSet}
%
Data sets are labeled references to instances of the \hyperref[class:dataGenerator]{DataGenerator} class.

\tabtext{dataSet}{dataSet}
%
\begin{table}[h!t]
\center
\begin{tabular}{|l|l|}
\hline
\textbf{\attribute} & \textbf{\desc}\\
\hline
metaid$^{o}$ & \refpage{sec:metaID}\\
id & \refpage{sec:id} \\
name$^{o}$ & \refpage{sec:name}\\
\hline
dataReference & \refpage{sec:dataReference1}\\
label & \refpage{sec:label}\\
\hline
\hline
\textbf{\subelements} & \textbf{\desc}\\
\hline
notes$^{o}$ & \refpage{class:notes}\\
annotation$^{o}$ & \refpage{class:annotation}\\
\hline
\end{tabular}
\caption{\tabcap{dataSet}}
\label{tab:dataSet}
\end{table}
%

\paragraph{\element{label}}
\label{sec:label}
Each data set in a \hyperref[class:report]{Report} does have to carry an unambiguous \concept{label}. A label is a human readable descriptor of a data set for use in a  \hyperref[class:report]{report}. For example, for a tabular data set of time series results, the label could be the column heading.

\paragraph{\element{dataReference}}
\label{sec:dataReference1}

The \concept{dataReference} attribute contains the ID of a \concept{dataGenerator} element and as such represents a link to it. The data produced by that particular data generator fills the according data set in the \hyperref[class:report]{report}.
\lsttext{dataSet}{dataSet}
%
\begin{myXmlLst}{The SED-ML \code{dataSet} element, defining a data set containing the result of the referenced task}{lst:dataSet}
<listOfDataSets>
  <dataSet id="d1" name="v1 over time" dataReference="dg1" label="_1">
</listOfDataSets>
\end{myXmlLst}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/dataSetClass.tex}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/outputComponents.tex}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/syntax.tex}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/specification.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% ACKNOWLEDGMENTS
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/acknowledgements.tex}
\chapter{Acknowledgements}
\label{sec:acknowledgments}
The SED-ML specification has been developed with the input of many people. The following individuals served as past SED-ML Editors and contributed to SED-ML specifications. Their efforts helped shape what SED-ML is today.
\begin{itemize}
\item Richard Adams
\item Andrew Miller
\end{itemize}

Moreover, we would like to thank all the participants of the meetings where SED-ML has been discussed as well as the members of the SED-ML community.

%%% Local Variables:
%%% mode: plain-tex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/acknowledgements.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% APPENDIX
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\appendix

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% UML DIAGRAM -- SED-ML UML OVERVIEW
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/UML.tex}
\chapter{SED-ML UML Overview}
\fig{sedML} shows the complete UML diagram of the SED-ML. It gives the full picture of all implemented classes (see the XML Schema definition on page \pageref{lst:schema}).
\label{app:uml}
% SED-ML complete UML
\sedfig[width=\textwidth]{images/sedML}{The SED-ML UML class diagram}{fig:sedML}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/UML.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% XML SCHEMA
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/XMLschema.tex}
\chapter{XML Schema}
Listing \ref{lst:schema} shows the full SED-ML XML Schema. The code is commented inline.
\label{sec:xmlschema}
\myXmlImport{The SED-ML XML Schema definition}{lst:schema}{xsd/sed-ml-L1-V3.xsd}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/XMLschema.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% SAMPLE FILES
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% BEGIN \input{sources/examples.tex}
\chapter{Examples}

This appendix present a few examples SED-ML uses. These examples are only illustrative and do not intend to demonstrate the full capabilities of SED-ML. Please read the specification for  a for a more comprehensive view (Chapter~\ref{chp:specification}).

The current examples make use of models encoded in SBML and CellML. It is important to remember that SED-ML is not restricted to those formats, but can be used with models encoded in many formats, so long as they are serialized in XML. A list of formats known to have been used, at least tentatively, with SED-ML is available on \url{http://sed-ml.org/}.

\section{Le Loup Model (SBML)}
% BEGIN \input{xml/leloupSbml.tex}
% sed-ml example file
The following example provides a SED-ML description for the simulation of the model based on the publication by Leoup, Gonze and Goldbeter ``Limit Cycle Models for Circadian Rhythms Based on Transcriptional Regulation in Drosophila and Neurospora'' (PubMed ID: 10643740).

This model is referenced by its SED-ML ID  \code{model1} and refers to the model with the MIRIAM URN \url{urn:miriam:biomodels.db:BIOMD0000000021}.
Software applications interpreting this example know how to dereference this URN and access the model in \biom \citep{N+06}.

A second model is defined in l. 11 of the example, using \code{model1} as a source and applying even further changes to it, in this case updating two model parameters.

One simulation setup is defined in the \code{listOfSimulations}. It is a \code{uniformTimeCourse} over 380 time units, providing 1000 output points. The algorithm used is the CVODE solver, as denoted by the KiSAO ID \code{KiSAO:0000019}.

A number of \code{dataGenerator}s are defined in ll. 23-62. Those are the prerequisite for defining the outputs of the simulation. The first dataGenerator named \code{time} collects the simulation time. \code{tim1} in l. 31 maps on the \code{Mt} entity in the model that is used in \code{task1} which here is the model with ID \code{model1}. The dataGenerator named \code{per-tim1} in l. 39 maps on the \code{Cn} entity in \code{model1}. Finally  the fourth and fifth dataGenerators map on the \code{Mt} and \code{per-tim} entity respectively in the updated model with ID \code{model2}.

The \code{output} defined in the experiment consists of three 2D plots. The first plot has two different curves (ll. 65-70) and provides the time course of the simulation using the tim mRNA concentrations from both simulation experiments. The second plot shows the \code{per-tim} concentration against the \code{tim} concentration for the oscillating model. And the third plot shows the same plot for the chaotic model. The resulting three plots are shown in Figure \ref{fig:leloupExample}.
%
\sedfigX[scale=0.8]{xml/leloupSBML}{The simulation result gained from the simulation description given in \lst{leloup1}}{fig:leloupExample}
%


\myXmlImport{LeLoup Model Simulation Description in SED-ML}{lst:leloup1}{xml/leloupSbml.xml}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V1"
%%% End:
% END \input{xml/leloupSbml.tex}

\section{Le Loup Model (CellML)}
% BEGIN \input{xml/leloupCellml.tex}
% sed-ml example file
The following example provides a SED-ML description for the simulation of the model based on the publication by Leloup, Gonze and Goldbeter ``Limit Cycle Models for Circadian Rhythms Based on Transcriptional Regulation in Drosophila and Neurospora'' (PubMed ID: 10643740).
Whereas the previous example used SBML to encode the simulation experiment, here the model is taken from the CellML Model Repository \citep{LLH+08}.

The original model used in the simulation experiment is referred to using a URL (\url{http://models.cellml.org/workspace/leloup_gonze_goldbeter_1999/@@rawfile/7606a47e222bc3b3d9117baa08d2e7246d67eedd/leloup_gonze_goldbeter_1999_a.cellml}, ll. 14).

A second model is defined in l. 15 of the example, using \code{model1} as a source and applying even further changes to it, in this case updating two model parameters.

One simulation setup is defined in the \code{listOfSimulations}. It is a \code{uniformTimeCourse} over 380 time units, using 1000 simulation points. The algorithm used is the CVODE solver, as denoted by the KiSAO ID \code{KiSAO:0000019}.

A number of \code{dataGenerator}s are defined in ll. 27-73. Those are the prerequisite for defining the output of the simulation. The dataGenerator named \code{tim1} in l. 37 maps on the \code{Mt} entity in the model that is used in \code{task1}, which here is the model with ID \code{model1}. The dataGenerator named \code{per-tim} in l. 46 maps on the \code{CN} entity in \code{model1}. Finally  the fourth and fifth dataGenerators map on the \code{Mt} and \code{per-tim} entity respectively in the updated model with ID \code{model2}.

The \code{output} defined in the experiment consists of three 2D plots (ll. 74-91). They reproduce the same output as the previous example.

%
\sedfigX[scale=0.6]{xml/leloupCellml}{The simulation result gained from the simulation description given in \lst{leloup}}{fig:leloupExample2}
%

\myXmlImport{LeLoup Model Simulation Description in SED-ML}{lst:leloup}{xml/leloupCellml.xml}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V1"
%%% End:
% END \input{xml/leloupCellml.tex}

\newpage
\section{The IkappaB-NF-kappaB signaling module (SBML)}
% BEGIN \input{xml/IkBNFkB_Signaling.tex}
% sed-ml example file
The following example provides a SED-ML description for the simulation of the IkappaB-NF-kappaB signaling module based on the publication by Hoffmann, Levchenko, Scott and  Baltimore ``The IkappaB-NF-kappaB signaling module: temporal control and selective gene activation. '' (PubMed ID: 12424381)

This model is referenced by its SED-ML ID  \code{model1} and refers to the model with the MIRIAM URN \url{urn:miriam:biomodels.db:BIOMD0000000140}.
Software applications interpreting this example know how to dereference this URN and access the model in \biom \citep{N+06}.

The simulation description specifies one simulation \code{simulation1}, which is a uniform timecourse simulation that simulates the model for 41 hours. \code{task1} then applies this simulation to the model.

As output this simulation description collects four parameters: \code{Total\_NFkBn}, \code{Total\_IkBbeta}, \code{Total\_IkBeps} and \code{Total\_IkBalpha}. These variables are to be plotted against the simulation time and displayed in four separate plots, as shown in Figure \ref{fig:ikappabExample}.
%
\sedfig[width=0.8\textwidth]{ikappab}{The simulation result gained from the simulation description given in \lst{ikappab}}{fig:ikappabExample}
%

The SED-ML description of the simulation experiment is given in \lst{ikappab}.

\myXmlImport{IkappaB-NF-kappaB signaling Model Simulation Description in SED-ML}{lst:ikappab}{xml/IkBNFkB_Signaling.xml}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V1"
%%% End:
% END \input{xml/IkBNFkB_Signaling.tex}

\section{Examples for Simulation Experiments involving \concept{repeatedTask}s}
% BEGIN \input{sources/repeatedTaskExamples.tex}
The \hyperref[class:repeatedTask]{repeatedTask} introduced in \LoneVtwo makes it possible to encode a large number of different simulation experiments. In this section several simulation experiment are presented that use the repeated tasks construct.

\subsection{One dimensional steady state parameter scan}
Here the repeated task calls out to a \hyperref[class:oneStep]{oneStep} task (performing a steady state computation). Each time a parameter is carried in order to collect different responses.

In the description below the range to be used in the \hyperref[class:setValue]{setValue} construct use of the \token{range} attribute.

%
\sedfigX[scale=0.6]{xml/v3-example1-repeated-steady-scan-oscli}{The simulation result gained from the simulation description given in \lst{repeated1}}{fig:figrepeated1}
%

\myXmlImport{SED-ML document implementing the one dimensional steady state parameter scan}
{lst:repeated1}
{xml/v3-example1-repeated-steady-scan-oscli.xml}

\subsection{Perturbing a Simulation}
Often it is interesting to see how the dynamic behavior of a model changes when some perturbations are applied to the model. In this example we include one repeated task that makes repeated use of a oneStep task (that advances an ODE integration to the next output step). During the steps one parameter is modified effectively causing the oscillations of a model to stop. Once the value is reset the oscillations recover.

Note: In the example below we use a functionalRange, although the same result could also be achieved using the setValue element directly.

%
\sedfigX[scale=0.6]{xml/v3-example2-oscli-nested-pulse}{The simulation result gained from the simulation description given in \lst{repeated2}}{fig:figrepeated2}
%

\myXmlImport{SED-ML document implementing the perturbation experiment}
{lst:repeated2}
{xml/v3-example2-oscli-nested-pulse.xml}

\subsection{Repeated Stochastic Simulation}
NOTE: This example produces three dimensional results (time, species concentration, multiple repeats). While \LoneVtwo does not include a way to post-processing these values. So it is left to the implementation on how to display them. One example would be to flatten the values by overlaying them onto the desired plot.

Running just one stochastic trace does not provide a complete picture of the behavior of a system. A large number of traces are needed to provide a result. This example demonstrates the basic use case of running ten traces of a simulation to. This is achieved by running on repeatedTask running ten uniform time course simulations (each of which performing a stochastic simulation run).

%
\sedfigX[scale=0.6]{xml/v3-example3-repeated-stochastic-runs}{The simulation result gained from the simulation description given in \lst{repeated3}}{fig:figrepeated3}
%

\myXmlImport{SED-ML document implementing repeated stochastic runs}
{lst:repeated3}
{xml/v3-example3-repeated-stochastic-runs.xml}

\subsection{One dimensional time course parameter scan}
NOTE: This example produces three dimensional results (time, species concentration, multiple repeats). While \LoneVtwo does not include a way to post-processing these values. So it is left to the implementation on how to display them. One example would be to flatten the values by overlaying them onto the desired plot.

Here one repeatedTask  runs repeated uniform time course simulations (performing a deterministic simulation run) after each run the parameter value is changed.


%
\sedfigX[scale=0.6]{xml/v3-example4-repeated-scan-oscli}{The simulation result gained from the simulation description given in \lst{repeated4}}{fig:figrepeated4}
%

\myXmlImport{SED-ML document implementing the one dimensional time course parameter scan}
{lst:repeated4}
{xml/v3-example4-repeated-scan-oscli.xml}

\subsection{Two dimensional steady state parameter scan}
NOTE: This example produces three dimensional results (time, species concentration, multiple repeats). While \LoneVtwo does not include a way to post-processing these values. So it is left to the implementation on how to display them. One example would be to flatten the values by overlaying them onto the desired plot.

Here a repeatedTask runs over another repeatedTask which runs over a oneStep task (performing a steady state computation). Each repeated simulation task modifies a different parameter.

%
\sedfigX[scale=0.6]{xml/v3-example5-boris-2d-scan}{The simulation result gained from the simulation description given in \lst{repeated5}}{fig:figrepeated5}
%

\myXmlImport{SED-ML document implementing the one dimensional steady state parameter scan}
{lst:repeated5}
{xml/v3-example5-boris-2d-scan.xml}% END \input{sources/repeatedTaskExamples.tex}

\section{Example referencing external data}
% BEGIN \input{sources/dataExamples.tex}
This example demonstrates the use of the data sources in a basic SED-ML description. In this example a model is simulated (using a uniform time course simulation), that simulation result is plotted in one plot, a second plot obtains a stored result (using the data sources), extracts the \token{S1} and \token{time} column from it and renders it.

%
\sedfigX[scale=0.6]{xml/dataExample1}{The simulation result gained from the simulation description given in \lst{dataExample1}}{fig:dataExample1}
%

\myXmlImport{SED-ML document using \SedDataSource and \SedDataDescription}
{lst:dataExample1}
{xml/dataExample1.xml}

% END \input{sources/dataExamples.tex}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/examples.tex}

%% MIASE ARCHIVES
% BEGIN \input{sources/archive.tex}
% The SED-ML archive from L1V1 has been merged/migrated into the COMBINE/OMEX
% archive.
\chapter{The COMBINE archive}
\label{app:archive}
A \concept{COMBINE archive} is a single file containing the various documents
(and in the future, references to documents), necessary for the description of
a model and all associated data and procedures. This includes for instance, but
not limited to, simulation experiment descriptions in SED-ML, all models needed
to run the simulations in SBML and their graphical representations in SBGN-ML.
It is a convenient alternative if a model source URI cannot be resolved,  or if
an end-user is offline.

The SED-ML archive described in appendix D of the SED-ML Level $1$ Version $1$
specification formed the basis for the COMBINE archive with contributions from
the SED-ML and COMBINE communities.

The COMBINE archive is described at: \url{http://co.mbine.org/documents/archive}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../sed-ml-L1V3"
%%% End:
% END \input{sources/archive.tex}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% OVERVIEW  (BPMN)
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% We've agreed not to use the overview in the L1V2 spec
% \input{sources/overview}

% REFERENCES
\bibliographystyle{plainnat}
\bibliography{sed-ml-L1V3}
\end{document} 