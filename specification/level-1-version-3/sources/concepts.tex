\pagebreak
\section{Concepts used in SED-ML}
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% MATHML
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{MathML}
\label{sec:mathML}
SED-ML encodes mathematical expressions using a subset of MathML 2.0 \citep{CIM+01}. MathML is an international standard for encoding mathematical expressions using XML. It is also used as a representation of mathematical expressions in other formats, such as SBML and CellML, two of the model languages supported by SED-ML. 

SED-ML files can use mathematical expressions to encode for example pre-processing steps applied to the computational model (see \hyperref[class:computeChange]{ComputeChange}), or post processing steps applied to the raw simulation data before output (see \hyperref[class:dataGenerator]{DataGenerator}). 

SED-ML classes reference MathML expressions via attributes of data type \hyperref[type:mathml]{MathML}.

% ~~~ MATHML ELEMENTS ~~~
\subsubsection{MathML elements}
The allowed MathML in SED-ML is restricted to the following subset: 

\begin{itemize}\setlength{\parskip}{-0.1ex}

\item \emph{token}: \token{cn}, \token{ci}, \token{csymbol},
  \token{sep}
  
\item \emph{general}: \token{apply}, \token{piecewise},
  \token{piece}, \token{otherwise}, \token{lambda} 

\item \emph{relational operators}: \token{eq}, \token{neq},
  \token{gt}, \token{lt}, \token{geq}, \token{leq}

\item \emph{arithmetic operators}: \token{plus}, \token{minus},
  \token{times}, \token{divide}, \token{power}, \token{root},
  \token{abs}, \token{exp}, \token{ln}, \token{log},
  \token{floor}, \token{ceiling}, \token{factorial}

\item \emph{logical operators}: \token{and}, \token{or},
  \token{xor}, \token{not}

\item \emph{qualifiers}: \token{degree}, \token{bvar},
  \token{logbase}

\item \emph{trigonometric operators}: \token{sin}, \token{cos},
  \token{tan}, \token{sec}, \token{csc}, \token{cot},
  \token{sinh}, \token{cosh}, \token{tanh}, \token{sech},
  \token{csch}, \token{coth}, \token{arcsin}, \token{arccos},
  \token{arctan}, \token{arcsec}, \token{arccsc}, \token{arccot},
  \token{arcsinh}, \token{arccosh}, \token{arctanh},
  \token{arcsech}, \token{arccsch}, \token{arccoth}

\item \emph{constants}: \token{true}, \token{false},
  \token{notanumber}, \token{pi}, \token{infinity},
  \token{exponentiale}

\item \emph{MathML annotations}: \token{semantics},
  \token{annotation}, \token{annotation-xml}
\end{itemize}


% ~~~ MATHML SYMBOLS ~~~
\subsubsection{MathML symbols}
All the operations listed above only operate on \emph{scalar} values. However, as one of SED-ML's aims is to provide post processing on the results of simulation experiments, this basic set needs to be extended by some aggregate functions. Therefore a defined set of MathML symbols that represent vector values are supported by SED-ML \currentLV. The only allowed symbols to be used in aggregate functions are the identifiers of variables defined in the listOfVariables of DataGenerators. These variables represent the data collected from the simulation experiment in the associated task. 


% ~~~ MATHML FUNCTIONS ~~~
\subsubsection{MathML functions}
The only aggregate functions available in SED-ML \currentLV are:

\begin{itemize}\setlength{\parskip}{-0.1ex}

\item \emph{min}: Where the minimum of a variable represents the smallest value 
the simulation experiment yielded (Listing~\ref{lst:minFunction}). 

\begin{myXmlLst}{Example for the use of the MathML \code{min} function.}{lst:minFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org/#min">
 		min
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\item \emph{max}: Where the maximum of a variables represents the largest value 
the simulation experiment yielded (\lst{maxFunction}).

\begin{myXmlLst}{Example for the use of the MathML \code{max} function.}{lst:maxFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org/#max">
 		max
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\item \emph{sum}: All values of the variable returned by the simulation 
experiment are summed (\lst{sumFunction}).

\begin{myXmlLst}{Example for the use of the MathML \code{sum} function.}{lst:sumFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org/#sum">
 		sum
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\item \emph{product}: All values of the variable returned by the simulation 
experiment are multiplied (\lst{productFunction}).
%
\begin{myXmlLst}{Example for the use of the MathML \code{product} function.}{lst:productFunction}
<apply>
 	<csymbol encoding="text" definitionURL="http://sed-ml.org//#product">
 		product
 	</csymbol>
 	<ci> variableId </ci>
</apply>
\end{myXmlLst}

\end{itemize}

These represent the only exceptions. At this point SED-ML \currentLV does not define a complete algebra of vector values. For more information see the description of the \hyperref[class:dataGenerator]{DataGenerator} class.
  
  
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% URI SCHEME
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{URI scheme}  
\label{sec:uriScheme}

URIs are used at various points in SED-ML \currentLV. They are used 
\begin{itemize}
	\item as a mechanism to reference models (\ref{sec:modelURI})
	\item as a mechanism to reference data files (\ref{sec:dataURI})
	\item to specify the language of the referenced model (\ref{sec:languageURI})
	\item to enable addressing implicit model variables (\ref{sec:implicitVariable})
\end{itemize}

Finally, annotations (\ref{sec:annotations}) of SED-ML elements should be provided with a standardised annotation scheme. The use of a standardised URI Scheme ensures long-time availability of particular information that can unambiguously be identified. 


% ~~~ MODEL REFERENCES ~~~
\subsubsection{Model references}
\label{sec:modelURI}
One way for referencing a model from a SED-ML file is adopted from the \concept{MIRIAM URI Scheme}. MIRIAM enables identification of a data resource (in this case a model resource) by a predefined URN. A data entry inside that resource is identified by an ID. That way each single  model  in a particular model repository can be unambiguously referenced. To become part of MIRIAM resources, a model repository must ensure permanent and consistent model references, that is stable IDs.

One model repository that is part of MIRIAM resources is the \concept{BioModels Database} \citep{LDR+10}. Its data resource name in MIRIAM is \code{urn:miriam:biomodels.db}. To refer to a particular model, a standardised identifier scheme is defined in \concept{MIRIAM Resources}\footnote{\url{http://www.ebi.ac.uk/miriam/}}. The ID entry maps to a particular model in the model repository. That model is never deleted. A sample BioModels Database ID is \code{BIOMD0000000048}. Together with the data resource name it becomes unambiguously identifiable by the URN \code{urn:miriam:biomodels.db:BIOMD0000000048}. 

SED-ML recommends to follow the above scheme for model references, if possible. 
SED-ML does not specify how to resolve the URNs. However, MIRIAM Resources offers web services to do so\footnote{\url{http://www.ebi.ac.uk/miriam/}}. For the above example of the \code{urn:miriam:biomodels.db:BIOMD0000000048} model, the resolved URL may look like \code{http://www.ebi.ac.uk/biomodels-main/BIOMD0000000048}.

Additional information on the \hyperref[sec:model_source]{source} attribute referencing the model location is provided in Section~\ref{sec:model_source}.

An alternative means to obtain a model may be to provide a single resource containing necessary models and a SED-ML file. Although a specification of such a resource is beyond the scope of this document, the recommended means is the \hyperref[sec:archive]{COMBINE archive}.


% ~~~ DATA REFERENCES ~~~
\subsubsection{Data references}
\label{sec:dataURI}
One way for referencing a data file from a SED-ML file is adopted from the \concept{MIRIAM URI Scheme}. MIRIAM enables identification of a data resource by a predefined URN. Additional information on the \hyperref[sec:data_source]{source} attribute referencing the data file location is provided in Section~\ref{sec:data_source}.

An alternative means to obtain a data file may be to provide a single resource containing necessary data files and the SED-ML file is the \hyperref[sec:archive]{COMBINE archive}. 


% ~~~ LANGUAGE REFERENCES ~~~
\subsubsection{Language references}
\label{sec:languageURI}
To specify the language a model is encoded in, a set of pre-defined SED-ML URNs can be used. The structure of SED-ML language URNs is \element{urn:sedml:language:}\emph{name.version}. SED-ML allows to specify a model representation format very generally as being \code{XML}, if no standardised representation format has been used to encode the model. On the other hand, one can be as specific as defining a model being in a particular version of a language, as ``SBML Level 3, Version 1, Revision 1''.

The list of URNs is available from \url{http://sed-ml.org/}. Further information on the \hyperref[sec:language]{language} attribute is provided in Section~\ref{sec:language}.

% ~~~ IMPLICIT VARIABLES ~~~
\subsubsection{Implicit variables (symbols)}
\label{sec:implicitVariable}

Some variables used in an experiment are not explicitly defined in the model, but may be implicitly contained in it. For example, to plot a variable's behaviour over time, that variable is defined in an SBML model, while \emph{time} is not explicitly defined. 

To overcome this issue and allow SED-ML to refer to such variables in a common way, the notion of \emph{implicit variables} is used. Those variables are called \code{symbols} in SED-ML. They are defined following the idea of MIRIAM URNs and using the SED-ML URN scheme. The structure of the URNs is \element{urn:sedml:symbol:}\emph{implicit variable}. To refer from a SED-ML file to the definition of \emph{time}, for example, the URN is \element{urn:sedml:symbol:time}.

The list of predefined symbols is available from the SED-ML site on \url{http://sed-ml.org/}.
From that source, a mapping of SED-ML symbols on existing concepts in the languages supported by SED-ML is provided.

% ~~~ ANNOTATIONS ~~~
\subsubsection{Annotations}
\label{sec:annotations}
When annotating SED-ML elements with semantic \hyperref[class:annotation]{annotation}s, the \concept{MIRIAM URI Scheme} should be used. In addition to providing the data type (e.\,g.\ PubMed) and the particular data entry inside that data type (e.\,g.\ \code{10415827}), the relation of the annotation to the annotated element should be described using the standardised \concept{biomodels.net qualifier}. The list of qualifiers, as well as further information about their usage, is available from \url{http://www.biomodels.net/qualifiers/}.


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% XPATH
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{XPath}  
\label{sec:xpath}
XPath is a language for finding information in an XML document \citep{xpath:1999}. Within SED-ML \currentLV, XPath version 1 expressions are used to identify nodes and attributes within an XML representation of a biological model in the following ways:

\begin{itemize}
	\item {Within a \hyperref[class:variable]{Variable} definition, where XPath identifies the model variable required for manipulation in SED-ML.}
	\item {Within a \hyperref[class:change]{Change} definition, where XPath is used to identify the target XML to which a change should be applied.} 
\end{itemize}

For proper application, XPath expressions should contain prefixes that allow their resolution to the correct XML namespace within an XML document. For example, the XPath expression referring to a species \emph{X} in an SBML model:
\begin{alltt}
/sbml:sbml/sbml:model/sbml:listOfSpecies/sbml:species[@id=`X'] {\tickYes -\emph{CORRECT}}
\end{alltt}
is preferable to 
\begin{alltt}
/sbml/model/listOfSpecies/species[@id=`X'] {\tickNo -\emph{INCORRECT} }
\end{alltt}

which will only be interpretable by standard XML software tools if the SBML file declares no namespaces (and hence is invalid SBML).

Following the convention of other XPath host languages such as XPointer and XSLT, the prefixes used within XPath expressions must be declared using namespace declarations within the SED-ML document, and be in-scope for the relevant expression.
Thus for the correct example above, there must also be an ancestor element of the node containing the XPath expression that has an attribute like:
\begin{alltt}
xmlns:sbml=`http://www.sbml.org/sbml/level3/version1/core'
\end{alltt}
(a different namespace URI may be used; the key point is that the prefix `sbml' must match that used in the XPath expression).


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% NUML
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{NuML}
\label{sec:numl}
The Numerical Markup Language (NuML) aims to standardize the exchange and archiving of numerical results. NuML originates from the numerical aspects of the Systems Biology Results Markup Language (SBRML) with the aim of re-using it in multiple other standardization efforts.

NuML constructs are used in SED-ML for referencing external data sets in the \hyperref[class:dataDescription]{DataDescription} class. NuML is used to define the \hyperref[sec:dimensionDescription]{DimensionDescription} of external datasets in the \hyperref[class:dataDescription]{DataDescription}. In addition, \hyperref[type:numlsid]{\element{NuMLSIds}} are used for retrieving subsets of data via either the \hyperref[sec:indexSet]{\element{indexSet}} element in the \hyperref[class:dataSource]{DataSource} or within the \hyperref[class:slice]{Slice} class.

Additional information including the specification is available from the project homepage \url{https://github.com/NuML/NuML}.

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% KISAO
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{KiSAO}
\label{sec:kisao}
The Kinetic Simulation Algorithm Ontology (KiSAO \citep{CWK+10}) is used in SED-ML to specify simulation algorithms and algorithm parameters. KiSAO is a community-driven approach of classifying and structuring simulation approaches by model characteristics and numerical characteristics. The ontology is available  in OWL format from \concept{BioPortal} at \url{http://purl.bioontology.org/ontology/KiSAO}. 

Defining simulation algorithms through KISAO terms not only identifies the simulation algorithm used for the SED-ML simulation, it also enables software to find related algorithms, if the specific implementation is not available. For example, software could decide to use the CVODE integration library for an analysis instead of a specific Runge Kutta 4,5 implementation. 

Should a particular simulation algorithm or algorithm parameter not exist in KISAO, please 
request one via \url{http://www.biomodels.net/kisao/}.

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% COMBINE ARCHIVE
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{COMBINE archive}
\label{sec:archive}

A \concept{COMBINE archive} \citep{Bergmann2014} is a single file that supports the exchange of all the information necessary for a modeling and simulation experiment in biology. A COMBINE archive file is a ZIP container that includes a manifest file, listing the content of the archive, an optional metadata file adding information about the archive and its content, and the files describing the model. The content of a COMBINE Archive consists of files encoded in COMBINE standards whenever possible, but may include additional files defined by an Internet Media Type. Several tools that support the COMBINE Archive are available, either as independent libraries or embedded in modeling software.

The COMBINE archive is described at \url{http://co.mbine.org/documents/archive} and 
in \citep{Bergmann2014}.

COMBINE archives are the recommended means for distributing simulation experiment descriptions in SED-ML, the respective data and model files, and the simulation results (figures and reports).

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% RESOURCES
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\subsection{SED-ML resources}
\label{sec:resources}

Information on SED-ML can be found on \url{http://sed-ml.org}. The SED-ML XML Schema, the UML schema, SED-ML examples and additional information is available from the SED-ML github project at \url{https://github.com/sed-ml}.
